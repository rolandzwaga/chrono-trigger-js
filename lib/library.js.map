{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./src/timeline-event-names.js","webpack://library/external \"$\"","webpack://library/./src/operation/helper/internalResolve.js","webpack://library/./src/operation/helper/mergeOperationData.js","webpack://library/./src/operation/helper/getElementData.js","webpack://library/./src/index.js","webpack://library/./src/action/index.js","webpack://library/./src/action/action.js","webpack://library/./src/action/endableaction.js","webpack://library/./src/language-manager.js","webpack://library/./src/operation/helper/getNestedValue.js","webpack://library/./src/operation/helper/extractOperationDataArgumentValues.js","webpack://library/./src/operation/helper/resolvePropertyValues.js","webpack://library/./src/action/timelineaction.js","webpack://library/./src/chrono-trigger-engine.js","webpack://library/./src/engine-factory.js","webpack://library/./src/eventbus/index.js","webpack://library/./src/eventbus/eventbus.js","webpack://library/./src/eventbus/actionregistry-eventbus-listener.js","webpack://library/./src/eventbus/request-video-uri-interceptor.js","webpack://library/./src/configuration/configuration-resolver.js","webpack://library/./src/importer/webpack-resource-importer.js","webpack://library/./src/controllers/index.js","webpack://library/./src/controllers/EventListenerController.js","webpack://library/./src/controllers/LabelController.js","webpack://library/./src/controllers/LottieController.js","webpack://library/external \"lottie\"","webpack://library/./src/controllers/NavigationController.js","webpack://library/./src/controllers/ProgressbarController.js","webpack://library/./src/controllers/RoutingController.js","webpack://library/./src/controllers/SubtitlesController.js","webpack://library/./src/operation/index.js","webpack://library/./src/operation/addClass.js","webpack://library/./src/operation/addControllerToElement.js","webpack://library/./src/operation/helper/attachControllerToElement.js","webpack://library/./src/operation/addOptionList.js","webpack://library/./src/operation/animate.js","webpack://library/./src/operation/animateWithClass.js","webpack://library/./src/operation/broadcastEvent.js","webpack://library/./src/operation/helper/resolveEventArguments.js","webpack://library/./src/operation/helper/removeEventDataFromOperationData.js","webpack://library/./src/operation/clearElement.js","webpack://library/./src/operation/clearOperationData.js","webpack://library/./src/operation/customFunction.js","webpack://library/./src/operation/endAction.js","webpack://library/./src/operation/extendController.js","webpack://library/./src/operation/getControllerFromElement.js","webpack://library/./src/operation/getControllerInstance.js","webpack://library/./src/operation/getElementDimensions.js","webpack://library/./src/operation/helper/modifyDimensions.js","webpack://library/./src/operation/loadJSON.js","webpack://library/./src/operation/removeClass.js","webpack://library/./src/operation/removeControllerFromElement.js","webpack://library/./src/operation/removeElement.js","webpack://library/./src/operation/removePropertiesFromOperationData.js","webpack://library/./src/operation/reparentElement.js","webpack://library/./src/operation/requestAction.js","webpack://library/./src/operation/resizeAction.js","webpack://library/./src/operation/selectElement.js","webpack://library/./src/operation/setElementAttributes.js","webpack://library/./src/operation/setElementContent.js","webpack://library/./src/operation/setOperationData.js","webpack://library/./src/operation/setStyle.js","webpack://library/./src/operation/startAction.js","webpack://library/./src/operation/toggleClass.js","webpack://library/./src/operation/toggleElement.js","webpack://library/./src/operation/wait.js","webpack://library/./src/timelineproviders/index.js","webpack://library/./src/timelineproviders/jwplayer-timeline-provider.js","webpack://library/./src/timelineproviders/request-animation-frame-timeline-provider.js"],"names":["TimelineEventNames","PLAY_REQUEST","STOP_REQUEST","PAUSE_REQUEST","SEEK_REQUEST","RESIZE_REQUEST","CONTAINER_REQUEST","DURATION_REQUEST","DURATION","TIME","SEEKED","COMPLETE","PLAY","STOP","PAUSE","SEEK","RESIZE","POSITION_UPDATE","TIME_UPDATE","REQUEST_INSTANCE","REQUEST_ACTION","REQUEST_FUNCTION","REQUEST_TIMELINE_URI","BEFORE_REQUEST_TIMELINE_URI","REQUEST_ENGINE_ROOT","REQUEST_CURRENT_TIMELINE_POSITION","REQUEST_TIMELINE_CLEANUP","EXECUTE_TIMELINEACTION","RESIZE_TIMELINEACTION","REQUEST_LABEL_COLLECTION","REQUEST_LABEL_COLLECTIONS","REQUEST_CURRENT_LANGUAGE","LANGUAGE_CHANGE","internalResolve","resolve","operationData","newOperationData","mergeOperationData","getElementData","name","element","data","getElementControllers","bind","actions","Action","actionData","eventBus","startOperations","eventbus","initOperationData","result","Promise","reject","executeOperation","e","console","error","operations","idx","previousOperationData","length","operationInfo","copy","JSON","parse","stringify","mergedOperationData","instance","then","resultOperationData","executeResizeOperation","resizeInstance","EndableAction","endOperations","LanguageManager","language","labels","Error","_labelLookup","_currentLanguage","eventbusListeners","createLabelLookup","addEventbusListeners","push","on","handleRequestLabelCollection","handleRequestLabelCollections","handleRequestCurrentLanguage","handleLanguageChange","resultCallback","labelId","labelIds","labelCollections","map","forEach","label","id","getNestedValue","properties","sourceObject","currentInstance","suffix","prop","index","parts","split","extractOperationDataArgumentValues","argumentValue","substr","toLowerCase","startsWith","propNames","shift","resolvePropertyValues","extract","propertyName","propertyValue","TimelineAction","active","duration","start","end","ChronoTriggerEngine","configuration","timelineProvider","_timeLineActionsLookup","_eventbusListeners","createLayoutTemplate","addInitialisationListeners","languageManager","timelines","_currentVideoUri","uri","createTimelineLookup","initializeTimelineProvider","container","containerSelector","layoutTemplate","html","timelineProviderSettings","playerContainer","selector","init","executeActions","initActions","onTimeHandler","Math","floor","onSeekHandler","func","destroy","handleRequestEngineRoot","handleRequestTimelineUri","handleRequestTimelinePosition","handleTimelineComplete","handleExecuteTimelineAction","resizeTimelineAction","timelineInfo","timelineActions","addTimelineAction","timeLineAction","timelineStartPositions","initializeTimelinePosition","initializeUriLookup","startMethod","isNaN","Infinity","isFinite","timelineEndPositions","endMethod","lookup","position","methodName","action","promise","engineRootSelector","previousVideoPosition","stop","cleanUpTimeline","timelineConfig","loop","once","FIRST_FRAME","pause","broadcastForTopic","playerid","getDuration","executeStartActions","seek","offset","playlistItem","executeRelevantActions","getActiveActions","getActionsForPosition","allActions","filter","sort","a","b","executionType","getRelevantTimelineActions","currentActions","apply","getPosition","getTimelineActionsForUri","resize","some","event","pos","_lastPosition","executeActionsForPosition","executeSeekActions","play","executions","exec","newActions","EngineFactory","importer","windowRef","resizeTimeout","actionsLookup","Eventbus","requestInstanceHandler","requestActionHandler","requestFunctionHandler","resizeHandler","clear","clearTimeout","setTimeout","broadcast","systemName","ctor","importSystemEntry","importSystemEntryWithEventbusDependency","engine","engineClass","actionRegistryListener","eventActions","ActionRegistryEventbusListener","registerEventlistener","registerInterceptor","RequestVideoUriInterceptor","resolver","ConfigurationResolver","process","timelineProviderClass","chronoTriggerEngine","eventHandlers","eventListeners","eventInterceptors","eventName","eventTopic","eventHandler","getEventHandlers","off","_this","eventHandlerDecorator","arguments","handlers","indexOf","splice","args","callHandlers","eventbusListener","interceptor","interceptors","getEventInterceptors","intercept","listener","handleEvent","i","l","actionRegistry","eventArgs","slice","processConfiguration","resolveOperations","initializeTimelineActions","initializeInitActions","initializeActions","initializeEventActions","config","eventAction","registerAction","initAction","initializeTimelineAction","timelineAction","timelineOperations","_gatherOperations","systemNameHolders","concat","holder","parentConfig","constructor","Array","ii","Object","keys","key","_processConfigProperty","value","configProperty","_getNestedPropertyValue","templateKey","jsonKey","json","propertyChain","WebpackResourceImporter","controllers","providers","main","EventListenerController","selectedElement","actionOperationData","actionOperationDatab","undefined","actionName","isStartAction","doStart","actionInstance","tagName","toUpperCase","selectEventHandler","prefix","target","targetValue","executeAction","act","$","extend","options","opt","selected","LabelController","listeners","currentLanguage","labelData","labelCollection","createTextDataLookup","setLabel","code","d","LottieController","anim","serializedData","serializedIEData","animationData","freezePosition","endPosition","renderer","autoplay","viewBox","url","parseFilename","iefallback","params","settings","setting","values","resultHolder","createAnimation","onComplete","playSegments","serialized","isIE","join","animData","lottie","loadAnimation","timeCompleted","find","attr","infos","document","isEdge","window","NavigationController","playerId","navigation","navLookup","navVidIdLookup","ctrlLookup","activeNavigationPoint","labelControllers","eventhandlers","buildNavigationData","handleNavigateVideoUrl","highlightMenu","handleRequestCurrentNavigation","handleVideoComplete","buildHtml","initHistory","navId","getQueryVariable","videoIndex","nav","videoUrlIndex","variableIdx","href","location","hashIndex","query","substring","vars","navigationData","title","handler","ctrl","detach","onpopstate","state","parentElm","ul","addNavElement","append","visible","li","addLabel","addClickHandler","children","mouseup","menuMouseupHandler","navdata","requestedVideoPosition","pushCurrentState","navElm","removeClass","addClass","log","navData","autoNext","next","attach","previous","nextId","roots","ProgressbarController","textElement","detachers","positionUpdateHandler","clickHandler","detacher","perc","css","text","RoutingController","handleBeforeRequestVideoUrl","handlePushHistoryState","handlePopstate","history","pushState","navigationId","isHistoryRequest","item","currentPosition","currentState","replaceState","SubtitlesController","actionLookup","lastFunc","detachTime","detachLangChange","languageChangeHandler","internalDetach","detachMethods","f","newLanguage","titleLanguageLookup","controllerData","subtitleData","titles","subtitleTimeLookup","j","jj","subs","lang","setTitle","removeTitle","createActionLookup","className","addControllerToElement","controllerInstance","attachControllerToElement","controller","createOptionElementText","valueProperty","labelProperty","defaultIndex","defaultValue","addOptionList","optionData","createOption","optionElements","animate","animationEasing","animationProperties","animationDuration","animateWithClass","one","broadcastEvent","eventArguments","resolveEventArguments","removeEventDataFromOperationData","clearElement","empty","clearOperationData","customFunction","endAction","mergedData","extendController","controllerExtension","getControllerFromElement","controllerName","warn","getControllerInstance","getElementDimensions","dimensions","modifier","width","innerWidth","height","innerHeight","modifyDimensionsByRatio","ratioModifier","ratio","ratios","getModifierSuffix","endIdx","isPercent","_modifyDimensions","widthModifier","heightModifier","modifyDimensions","parseInt","loadJSON","jsonCache","cache","fetch","response","body","removeControllerFromElement","removeElement","remove","removePropertiesFromOperationData","propertyNames","reparentElement","newParentSelector","appendTo","requestAction","resizeAction","findElementBySelector","root","hasOwnProperty","selectElement","useExistingAsRoot","currentRoot","rootCallback","setElementAttributes","attributes","attrName","setElementContent","template","setOperationData","setStyle","startAction","toggleClass","toggleElement","toggle","wait","milliseconds","JwPlayerTimelineProvider","playerSettings","player","currentLoopHandler","_addEventListeners","urls","timeline","type","_extractUrls","jwp","jwplayer","p","w","h","setup","file","image","poster","controls","autostart","displaytitle","displaydescription","nextUpDisplay","abouttext","aboutlink","stretching","repeat","playlist","_handlePlayerReady","load","_loopHandler","_seekedHandler","_handlePlayerComplete","getPlaylistIndex","_container","getProvider","callback","getState","getMute","getVolume","setMute","volume","setVolume","RequestAnimationFrameTimelineProvider","requestID","last","current","_updateBound","_update","random","currentPlaylistItem","firstFrame","paused","reset","_resize","requestDurationHandler","now","FIRSTFRAME","_reset","requestAnimationFrame","_cancelAnimationFrame","callBack","cancelAnimationFrame","_extractPlaylist","_start"],"mappings":"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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"$\"), require(\"lottie\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [\"$\", \"lottie\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory(require(\"$\"), require(\"lottie\"));\n\telse\n\t\troot[\"library\"] = factory(root[\"$\"], root[\"lottie\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__26__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","class TimelineEventNames {\r\n    // timeline requests\r\n    static PLAY_REQUEST = 'timeline-play-request';\r\n    static STOP_REQUEST = 'timeline-stop-request';\r\n    static PAUSE_REQUEST = 'timeline-pause-request';\r\n    static SEEK_REQUEST = 'timeline-seek-request';\r\n    static RESIZE_REQUEST = 'timeline-resize-request';\r\n    static CONTAINER_REQUEST = 'timeline-container-request';\r\n    static DURATION_REQUEST = 'timeline-duration-request';\r\n\r\n    // timeline announcements\r\n    static DURATION = 'timeline-duration';\r\n    static TIME = 'timeline-time';\r\n    static SEEKED = 'timeline-seeked';\r\n    static COMPLETE = 'timeline-complete';\r\n    static PLAY = 'timeline-play';\r\n    static STOP = 'timeline-stop';\r\n    static PAUSE = 'timeline-pause';\r\n    static SEEK = 'timeline-seek';\r\n    static RESIZE = 'timeline-resize';\r\n    static POSITION_UPDATE = 'timeline-position-update';\r\n    static TIME_UPDATE = 'timeline-time-update';\r\n\r\n    // factory and engine events\r\n    static REQUEST_INSTANCE = 'request-instance';\r\n    static REQUEST_ACTION = 'request-action';\r\n    static REQUEST_FUNCTION = 'request-function';\r\n    static REQUEST_TIMELINE_URI = 'request-timeline-uri';\r\n    static BEFORE_REQUEST_TIMELINE_URI = 'before-request-timeline-uri';\r\n    static REQUEST_ENGINE_ROOT = 'request-engine-root';\r\n    static REQUEST_CURRENT_TIMELINE_POSITION = 'request-current-timeline-position';\r\n    static REQUEST_TIMELINE_CLEANUP = 'request-timeline-cleanup';\r\n    static EXECUTE_TIMELINEACTION = 'execute-timelineaction';\r\n    static RESIZE_TIMELINEACTION = 'resize-timelineaction';\r\n\r\n    //language manager events\r\n    static REQUEST_LABEL_COLLECTION = 'request-label-collection';\r\n    static REQUEST_LABEL_COLLECTIONS = 'request-label-collections';\r\n    static REQUEST_CURRENT_LANGUAGE = 'request-current-language';\r\n    static LANGUAGE_CHANGE = 'language-change';\r\n}\r\n\r\nexport default TimelineEventNames;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import mergeOperationData from './mergeOperationData';\r\n\r\nfunction internalResolve(resolve, operationData, newOperationData) {\r\n    if (newOperationData) {\r\n        resolve(mergeOperationData(operationData, newOperationData));\r\n    } else {\r\n        resolve(operationData);\r\n    }\r\n}\r\n\r\nexport default internalResolve;\r\n","function mergeOperationData(operationData, newOperationData) {\r\n    return Object.assign(operationData, newOperationData);\r\n}\r\n\r\nexport default mergeOperationData;\r\n","function getElementData(name, element) {\r\n    return element.data(name);\r\n}\r\n\r\nconst getElementControllers = getElementData.bind(null, \"chronoEngineControllers\");\r\n\r\nexport {\r\n    getElementData,\r\n    getElementControllers\r\n}","import * as actions from './action';\r\nexport { default as ChronoTriggerEngine } from './chrono-trigger-engine';\r\nexport { default as EngineFactory } from './engine-factory';\r\nexport { default as TimelineEventNames } from './timeline-event-names';\r\nexport { default as LanguageManager } from './language-manager';\r\nexport { default as WebpackResourceImporter } from './importer/webpack-resource-importer';\r\nexport default actions;","export { default as Action } from './action';\r\nexport { default as EndableAction } from './endableaction';\r\nexport { default as TimelineAction } from './timelineaction';","import $ from 'jquery';\r\n\r\nclass Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tthis.name = actionData.name;\r\n\t\tthis.startOperations = actionData.startOperations;\r\n\t\tthis.eventbus = eventBus; \r\n\t}\r\n\r\n\tstart(initOperationData) {\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeOperation(this.startOperations, 0, resolve, reject, initOperationData);\r\n\t\t}).catch((e) => {\r\n\t\t\tconsole.error(`Error in action start '${this.name}'`);\r\n\t\t\tthrow e;\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tconst copy = (operationInfo.operationData) ? JSON.parse(JSON.stringify(operationInfo.operationData)) : {};\r\n\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\t\t\t\r\n\t\t\tconst result = operationInfo.instance(mergedOperationData, this.eventbus);\r\n\t\t\t\r\n            if (result.then) {\r\n\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\tthis.executeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n            } else {\r\n                this.executeOperation(operations, ++idx, resolve, reject, result);\r\n            }\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tconst idx = 0;\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeResizeOperation(this.startOperations, idx, resolve, reject, operationData);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteResizeOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\t\t\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tif ((operationInfo.resizeInstance)) {\r\n\t\t\t\tconst copy = ((operationInfo.operationData)) ? JSON.parse(JSON.stringify(operationInfo.operationData)) : {};\r\n\t\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\r\n\t\t\t\tconst result = operationInfo.resizeInstance(mergedOperationData);\r\n\t\t\t\tif (result.then){\r\n\t\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, result);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, previousOperationData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Action;\r\n","import Action from './action';\r\n\r\nclass EndableAction extends Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.endOperations = actionData.endOperations;\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tif ((this.endOperations) && (this.endOperations.length)) {\r\n\t\t\tconst idx = 0;\r\n\t\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\t\tthis.executeOperation(this.endOperations, idx, resolve, reject, initOperationData);\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tconsole.error(`Error in action end'${this.name}'`);\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve(initOperationData);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default EndableAction;\r\n","import TimelineEventNames from \"./timeline-event-names\";\r\n\r\nclass LanguageManager {\r\n\r\n    constructor(language, labels, eventbus) {\r\n        if (!language || !language.length) {\r\n            throw new Error('language ctor arg cannot be null or have zero length');\r\n        }\r\n        if (!labels) {\r\n            throw new Error('labels ctor arg cannot be null');\r\n        }\r\n        if (!eventbus) {\r\n            throw new Error('eventbus ctor arg cannot be null');\r\n        }\r\n        this._labelLookup = {};\r\n        this._currentLanguage = language;\r\n        this.eventbusListeners = [];\r\n        this.createLabelLookup(labels);\r\n        this.addEventbusListeners(eventbus);\r\n    }\r\n\r\n    addEventbusListeners(eventbus) {\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTION, this.handleRequestLabelCollection.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTIONS, this.handleRequestLabelCollections.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, this.handleRequestCurrentLanguage.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n    }\r\n\r\n    handleRequestCurrentLanguage(resultCallback) {\r\n        resultCallback(this._currentLanguage);\r\n    }\r\n\r\n    handleRequestLabelCollection(labelId, resultCallback) {\r\n        resultCallback(this._labelLookup[labelId]);\r\n    }\r\n\r\n    handleRequestLabelCollections(labelIds, resultCallback) {\r\n        const labelCollections = labelIds.map((labelId) => {\r\n            return this._labelLookup[labelId];\r\n        });\r\n        resultCallback(labelCollections);\r\n    }\r\n\r\n    handleLanguageChange(language) {\r\n        if (language && language.length) {\r\n            this._currentLanguage = language;\r\n        } else {\r\n            console.error('Language cannot be changed to null or empty string');\r\n        }\r\n    }\r\n\r\n    createLabelLookup(labels) {\r\n        labels.forEach((label) => {\r\n            this._labelLookup[label.id] = label.labels;\r\n        });\r\n    }\r\n}\r\n\r\nexport default LanguageManager;\r\n","function getNestedValue(properties, sourceObject) {\r\n    if (!properties) {\r\n        throw Error('properties arg cannot be null');\r\n    }\r\n    if (!sourceObject) {\r\n        throw Error('sourceObject arg cannot be null');\r\n    }\r\n    let currentInstance = sourceObject;\r\n    let suffix = null;\r\n    properties.forEach((prop, index) => {\r\n        if (index === properties.length-1) {\r\n            const parts = prop.split('+');\r\n            if (parts.length > 1) {\r\n                prop = parts[0];\r\n                suffix = parts[1];\r\n            }\r\n        }\r\n        currentInstance = currentInstance[prop];\r\n    });\r\n\r\n    return (suffix) ? currentInstance + suffix : currentInstance;\r\n}\r\n\r\nexport default getNestedValue;\r\n","import getNestedValue from './getNestedValue';\r\n\r\nfunction extractOperationDataArgumentValues(sourceObject, argumentValue) {\r\n    if ((argumentValue) && (argumentValue.substr) && (argumentValue.toLowerCase().startsWith('operationdata.'))) {\r\n        let propNames = argumentValue.split('.');\r\n        propNames.shift();\r\n        return getNestedValue(propNames, sourceObject);\r\n    }\r\n    return argumentValue;\r\n}\r\n\r\nexport default extractOperationDataArgumentValues;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolvePropertyValues(operationData, properties) {\r\n    const copy = Object.assign({}, properties);\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    for(let propertyName in properties) {\r\n        const propertyValue = properties[propertyName];\r\n        copy[propertyName] = extract(propertyValue);\r\n    }\r\n    return copy;\r\n}\r\n\r\nexport default resolvePropertyValues\r\n","import EndableAction from './endableaction';\r\n\r\nclass TimelineAction extends EndableAction {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.active = false;\r\n\t\tthis.duration = actionData.duration;\r\n\t\tthis.duration.start = +this.duration.start;\r\n\t\tthis.duration.end = +this.duration.end;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tif ((!this.active) || (this.duration.end < 0)) {\r\n\t\t\tthis.active = (this.duration.end > -1);\r\n\t\t\treturn super.start();\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tthis.active = false;\r\n\t\treturn super.end(initOperationData);\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tif ((this.active) || (this.duration.end < 0)) {\r\n\t\t\treturn super.resize(operationData);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default TimelineAction;\r\n","import LanguageManager from './language-manager';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\n\r\nclass ChronoTriggerEngine {\r\n\r\n    constructor(configuration, eventbus, timelineProvider) {\r\n        this.configuration = configuration;\r\n        this.eventbus = eventbus;\r\n        this.timelineProvider = timelineProvider;\r\n        this._timeLineActionsLookup = {};\r\n        this._eventbusListeners = [];\r\n    }\r\n\r\n    init() {\r\n        this.createLayoutTemplate();\r\n\r\n        this.addInitialisationListeners();\r\n\r\n        this.languageManager = new LanguageManager(this.configuration.language, this.configuration.labels, this.eventbus);\r\n\r\n        const { timelines } = this.configuration;\r\n        this._currentVideoUri = (timelines && timelines.length) ? timelines[0].uri : null;\r\n\r\n        this.createTimelineLookup();\r\n\r\n        return this.initializeTimelineProvider();\r\n    }\r\n\r\n    createLayoutTemplate() {\r\n        const container = $(this.configuration.containerSelector);\r\n        if (!container || !container.length) {\r\n            throw new Error(`Container selector not found: ${this.configuration.containerSelector}`);\r\n        }\r\n        const { layoutTemplate } = this.configuration; \r\n        if (layoutTemplate && layoutTemplate.length) {\r\n            container.html(layoutTemplate);\r\n        }\r\n    }\r\n\r\n    initializeTimelineProvider() {\r\n        if (!this.configuration.timelineProviderSettings) {\r\n            return;\r\n        }\r\n\r\n        const playerContainer = $(`#${this.configuration.timelineProviderSettings.selector}`);\r\n\r\n        if (playerContainer.length) {\r\n            return new Promise((resolve) => {\r\n                this.timelineProvider.init().then(() => {\r\n                    this.executeActions((this.configuration.initActions), \"start\").then(() => {\r\n                        this.timelineProvider.on(TimelineEventNames.TIME, this.onTimeHandler.bind(this, Math.floor));\r\n                        this.timelineProvider.on(TimelineEventNames.SEEK, this.onSeekHandler.bind(this, Math.floor));\r\n                        resolve(this.timelineProvider);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        return new Promise((resolve)=> {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this.configuration = null;\r\n        this.eventbus = null;\r\n        this.timelineProvider = null;\r\n        this._timeLineActionsLookup = null;\r\n        this._eventbusListeners.forEach(func => func());\r\n        if (this.timelineProvider) {\r\n            this.timelineProvider.destroy();\r\n        }\r\n    }\r\n\r\n    addInitialisationListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_ENGINE_ROOT, this.handleRequestEngineRoot.bind(this, this.configuration.containerSelector)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_TIMELINE_URI, this.handleRequestTimelineUri.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_CURRENT_TIMELINE_POSITION, this.handleRequestTimelinePosition.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_TIMELINE_CLEANUP, this.handleTimelineComplete.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.EXECUTE_TIMELINEACTION, this.handleExecuteTimelineAction.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_TIMELINEACTION, this.resizeTimelineAction.bind(this)));\r\n    }\r\n\r\n    createTimelineLookup() {\r\n        if (!this.configuration.timelines) {\r\n            return;\r\n        }\r\n        this.configuration.timelines.forEach((timelineInfo) => {\r\n            timelineInfo.timelineActions.forEach(this.addTimelineAction.bind(this, timelineInfo.uri));\r\n        });\r\n    }\r\n\r\n    addTimelineAction(uri, timeLineAction) {\r\n        const start = timeLineAction.duration.start;\r\n        const timelineStartPositions = this.initializeTimelinePosition(this.initializeUriLookup(this._timeLineActionsLookup, uri), start);\r\n        const startMethod = timeLineAction.start.bind(timeLineAction);\r\n        timelineStartPositions.push(startMethod);\r\n\r\n        let end = timeLineAction.duration.end;\r\n        if ((!end) || (isNaN(end))) {\r\n            end = timeLineAction.duration.end = Infinity;\r\n        }\r\n        if (isFinite(end)) {\r\n            const timelineEndPositions = this.initializeTimelinePosition(this._timeLineActionsLookup[uri], end);\r\n            const endMethod = timeLineAction.end.bind(timeLineAction);\r\n            timelineEndPositions.push(endMethod);\r\n        }\r\n    }\r\n\r\n    initializeUriLookup(lookup, uri) {\r\n        if (!lookup[uri]) {\r\n            lookup[uri] = {};\r\n        }\r\n        return lookup[uri];\r\n    }\r\n\r\n    initializeTimelinePosition(lookup, position) {\r\n        if (!lookup[position]) {\r\n            lookup[position] = [];\r\n        }\r\n        return lookup[position];\r\n    }\r\n\r\n    executeActions(actions, methodName, idx=0) {\r\n        if (idx < actions.length) {\r\n            const action = actions[idx];\r\n\r\n            const promise = action[methodName]();\r\n            return promise.then(() => {\r\n                return this.executeActions(actions, methodName, ++idx);\r\n            });\r\n        }\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    handleRequestEngineRoot(engineRootSelector, resultCallback) {\r\n        resultCallback($(engineRootSelector));\r\n    }\r\n\r\n    handleRequestTimelineUri(index, position, previousVideoPosition) {\r\n        position = position || 0;\r\n        previousVideoPosition = previousVideoPosition || 0;\r\n        this.timelineProvider.stop();\r\n        this.cleanUpTimeline().then(() => {\r\n            const timelineConfig = this.configuration.timelines[index];\r\n            this._currentVideoUri = timelineConfig.uri;\r\n            this.timelineProvider.loop = timelineConfig.loop;\r\n            if ((!this.timelineProvider.loop) && (position > 0)) {\r\n                this.timelineProvider.once(TimelineEventNames.FIRST_FRAME, () => {\r\n                    this.timelineProvider.pause();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.timelineProvider.playerid, [this.getDuration()]);\r\n                    this.executeStartActions().then(() => {\r\n                        this.timelineProvider.seek(position);\r\n                        this.onSeekHandler(Math.floor, { offset: position });\r\n                    });\r\n                });\r\n            }\r\n            this.timelineProvider.playlistItem(index);\r\n        });\r\n    }\r\n\r\n    cleanUpTimeline() {\r\n        return this.executeRelevantActions(this.getActiveActions, \"end\");\r\n    }\r\n\r\n    executeStartActions() {\r\n        return this.executeRelevantActions(this.getActionsForPosition.bind(this, 0), \"start\");\r\n    }\r\n\r\n    getActionsForPosition(position, allActions) {\r\n        return allActions.filter((action) => {\r\n            return (!action.active) && ((action.duration.start <= position) && (action.duration.end >= position));\r\n        });\r\n    }\r\n\r\n    getActiveActions(allActions) {\r\n        const actions = allActions.filter((action) => {\r\n            return action.active;\r\n        });\r\n        return actions.sort((a, b) => {\r\n            if (b.duration.start < a.duration.start) {\r\n                return -1;\r\n            } else if (b.duration.start > a.duration.start) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    executeRelevantActions(filter, executionType) {\r\n        const timelineActions = this.getRelevantTimelineActions();\r\n        const currentActions = filter.apply(this, [timelineActions]);\r\n        return this.executeActions(currentActions, executionType, 0);\r\n    }\r\n\r\n    handleRequestTimelinePosition(resultCallback) {\r\n        resultCallback(Math.floor(this.timelineProvider.getPosition()));\r\n    }\r\n\r\n    handleTimelineComplete() {\r\n        this.cleanUpTimeline();\r\n    }\r\n\r\n    handleExecuteTimelineAction(uri, index, start) {\r\n        const actions = this.getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            if (start) {\r\n                action.start();\r\n            } else {\r\n                action.end();\r\n            }\r\n        }\r\n    }\r\n\r\n    resizeTimelineAction(uri, index) {\r\n        const actions = this.getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            action.resize();\r\n        }\r\n    }\r\n\r\n    getRelevantTimelineActions() {\r\n        return this.getTimelineActionsForUri(this._currentVideoUri);\r\n    }\r\n\r\n    getTimelineActionsForUri(uri) {\r\n        let timelineActions;\r\n        this.configuration.timelines.some((timelineInfo) => {\r\n            if (timelineInfo.uri === uri) {\r\n                timelineActions = timelineInfo.timelineActions;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return timelineActions;\r\n    }\r\n\r\n    onTimeHandler(floor, event) {\r\n        if (!isNaN(event.position)) {\r\n            const pos = floor(event.position);\r\n            if (this._lastPosition !== pos) {\r\n                this.executeActionsForPosition(pos);\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.POSITION_UPDATE, this.timelineProvider.playerid, [pos, this.timelineProvider.getDuration()]);\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME_UPDATE, this.timelineProvider.playerid, [event.position, this.timelineProvider.getDuration()]);\r\n        }\r\n    }\r\n\r\n    onSeekHandler(floor, event) {\r\n        const pos = floor(event.offset);\r\n        if (isNaN(pos)) {\r\n            return;\r\n        }\r\n        this.executeSeekActions(pos).then(() => {\r\n            this.timelineProvider.play();\r\n        });\r\n    }\r\n\r\n    executeActionsForPosition(position) {\r\n        this._lastPosition = position;\r\n        const actions = this._timeLineActionsLookup[this._currentVideoUri];\r\n        if (actions) {\r\n            const executions = actions[position];\r\n            if (executions) {\r\n                executions.forEach((exec) => {\r\n                    exec();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    executeSeekActions(pos) {\r\n        const timelineActions = this.getRelevantTimelineActions();\r\n        const currentActions = this.getActiveActions(timelineActions);\r\n        const newActions = this.getActionsForPosition(pos, timelineActions);\r\n\r\n        const promise = this.executeActions(currentActions, \"end\", 0);\r\n\r\n        return new Promise((resolve) => {\r\n            promise.then(() => {\r\n                this.executeActions(newActions, \"start\", 0).then(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ChronoTriggerEngine;\r\n","import { Eventbus, ActionRegistryEventbusListener, RequestVideoUriInterceptor } from './eventbus';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\nimport ConfigurationResolver from './configuration/configuration-resolver';\r\n\r\nclass EngineFactory {\r\n    \r\n    constructor(importer, windowRef, eventbus) {\r\n        this.init(importer, windowRef, eventbus);\r\n    }\r\n\r\n    init(importer, windowRef, eventbus) {\r\n        this.resizeTimeout = -1;\r\n        this.actionsLookup = null;\r\n\r\n        this.importer = importer;\r\n\r\n        this.eventBus = eventbus || new Eventbus();\r\n        this.eventBus.on(TimelineEventNames.REQUEST_INSTANCE, this.requestInstanceHandler.bind(this));\r\n        this.eventBus.on(TimelineEventNames.REQUEST_ACTION, this.requestActionHandler.bind(this));\r\n        this.eventBus.on(TimelineEventNames.REQUEST_FUNCTION, this.requestFunctionHandler.bind(this));\r\n        \r\n        $(windowRef).resize(this.resizeHandler.bind(this));\r\n    }\r\n\r\n    destroy() {\r\n        this.eventBus.clear();\r\n        this.eventBus = null;\r\n    }\r\n\r\n    resizeHandler() {\r\n        if (this.resizeTimeout > -1) {\r\n            clearTimeout(this.resizeTimeout);\r\n        }\r\n        this.resizeTimeout = setTimeout(() => {\r\n            this.eventBus.broadcast(TimelineEventNames.RESIZE);\r\n        }, 200);\r\n    }\r\n\r\n    importSystemEntryWithEventbusDependency(systemName) {\r\n        const ctor = this.importSystemEntry(systemName);\r\n        return new ctor(this.eventBus);\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    requestInstanceHandler(systemName, resultCallback) {\r\n        resultCallback(this.importSystemEntryWithEventbusDependency(systemName));\r\n    }\r\n\r\n    requestFunctionHandler(systemName, resultCallback) {\r\n        resultCallback(this.importSystemEntry(systemName));\r\n    }\r\n\r\n    requestActionHandler(systemName, resultCallback) {\r\n        const action = this.actionsLookup[systemName];\r\n        if (action) {\r\n            resultCallback(action);\r\n        } else {\r\n            console.error(`Unknown action: ${systemName}`);\r\n            resultCallback(null);\r\n        }\r\n    }\r\n\r\n    createEngine(configuration) {\r\n        const { systemName } = configuration.engine;\r\n        const engineClass = this.importSystemEntry(systemName);\r\n\r\n        let actionRegistryListener = null;\r\n        if ((configuration.eventActions) && (configuration.eventActions.length)) {\r\n            actionRegistryListener = new ActionRegistryEventbusListener();\r\n            this.eventBus.registerEventlistener(actionRegistryListener);\r\n        }\r\n\r\n        this.eventBus.registerInterceptor(TimelineEventNames.REQUEST_TIMELINE_URI, new RequestVideoUriInterceptor(this.eventBus));\r\n\r\n        const resolver = new ConfigurationResolver(this.importer, this.eventBus);\r\n        this.actionsLookup = resolver.process(actionRegistryListener, configuration)\r\n\r\n        const timelineProviderClass = this.importSystemEntry(configuration.timelineProviderSettings.systemName);\r\n        const timelineProvider = new timelineProviderClass(this.eventBus, configuration);\r\n\r\n        const chronoTriggerEngine = new engineClass(configuration, this.eventBus, timelineProvider);\r\n        return chronoTriggerEngine;\r\n    }\r\n\r\n}\r\n\r\nexport default EngineFactory;\r\n","export { default as Eventbus } from './eventbus';\r\nexport { default as ActionRegistryEventbusListener } from './actionregistry-eventbus-listener';\r\nexport { default as RequestVideoUriInterceptor } from './request-video-uri-interceptor';","class Eventbus {\r\n\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.eventHandlers = {};\r\n\t\tthis.eventListeners = [];\r\n\t\tthis.eventInterceptors = {};\r\n\t}\r\n\r\n\tgetEventInterceptors(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventInterceptors[eventName]) {\r\n\t\t\tthis.eventInterceptors[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventInterceptors[eventName];\r\n\t}\r\n\r\n\tgetEventHandlers(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventHandlers[eventName]) {\r\n\t\t\tthis.eventHandlers[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventHandlers[eventName];\r\n\t}\r\n\r\n\ton(eventName, eventHandler, eventTopic) {\r\n\t\tthis.getEventHandlers(eventName, eventTopic).push(eventHandler);\r\n\t\treturn () => {\r\n\t\t\tthis.off(eventName, eventHandler, eventTopic);\r\n\t\t}\r\n\t}\r\n\r\n\tonce(eventName, eventHandler, eventTopic) {\r\n\t\tconst _this = this;\r\n\t\tconst eventHandlerDecorator = function() {\r\n\t\t\teventHandler(...arguments)\r\n\t\t\t_this.off(eventName, eventHandlerDecorator, eventTopic);\r\n\t\t};\r\n\t\tthis.on(eventName, eventHandlerDecorator, eventTopic);\r\n\t}\r\n\r\n\toff(eventName, eventHandler, eventTopic) {\r\n\t\tconst handlers = this.getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tconst idx = handlers.indexOf(eventHandler);\r\n\t\t\tif (idx > -1) {\r\n\t\t\t\thandlers.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbroadcast(eventName, args) {\r\n\t\tthis.callHandlers(eventName, null, args);\r\n\t}\r\n\r\n\tbroadcastForTopic(eventName, eventTopic, args) {\r\n\t\tthis.callHandlers(eventName, eventTopic, args);\r\n\t}\r\n\r\n\tregisterEventlistener(eventbusListener) {\r\n\t\tthis.eventListeners.push(eventbusListener);\r\n\t}\r\n\r\n\tregisterInterceptor(eventName, interceptor, eventTopic) {\r\n\t\tconst interceptors = this.getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.push(interceptor);\r\n\t}\r\n\r\n\tcallHandlers(eventName, eventTopic, args=[]) {\r\n\t\tconst interceptors = this.getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.forEach((interceptor) => {\r\n\t\t\targs = interceptor.intercept(args);\r\n\t\t});\r\n\t\tthis.eventListeners.forEach((listener) => {\r\n\t\t\tlistener.handleEvent(eventName, eventTopic, args);\r\n\t\t});\r\n\t\tconst handlers = this.getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tfor (let i = 0, l = handlers.length; i < l; i++) {\r\n\t\t\t\thandlers[i](...args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Eventbus;\r\n","class ActionRegistryEventbusListener {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionRegistry = {};\r\n\t}\r\n\r\n\tregisterAction(action, eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.actionRegistry[eventName]) {\r\n\t\t\tthis.actionRegistry[eventName] = [];\r\n\t\t}\r\n\t\tthis.actionRegistry[eventName].push(action);\r\n\t}\r\n\r\n\thandleEvent(eventName, eventTopic, args) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tconst actions = this.actionRegistry[eventName];\r\n\t\tif (actions) {\r\n\t\t\tconst operationData = {\r\n\t\t\t\teventArgs: args\r\n\t\t\t};\r\n\t\t\tactions.forEach((action) => {\r\n\t\t\t\taction.start(operationData);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ActionRegistryEventbusListener;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass RequestVideoUriInterceptor {\r\n\r\n\tconstructor(eventbus) {\r\n\t\tthis.eventbus = eventbus;\r\n\t}\r\n\r\n\tintercept(args) {\r\n\t\tthis.eventbus.broadcast(TimelineEventNames.BEFORE_REQUEST_TIMELINE_URI, args.slice());\r\n\t\treturn args;\r\n\t}\r\n\r\n}\r\n\r\nexport default RequestVideoUriInterceptor;\r\n","import { TimelineAction, EndableAction, Action } from '../action';\r\nimport getNestedValue from '../operation/helper/getNestedValue';\r\n\r\nclass ConfigurationResolver {\r\n\r\n    constructor(importer, eventbus) {\r\n        this.importer = importer;\r\n        this.eventbus = eventbus;\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    process(actionRegistryListener, configuration) {\r\n        const actionsLookup = {};\r\n        this.processConfiguration(configuration, configuration);\r\n        this.resolveOperations(configuration);\r\n        this.initializeTimelineActions(configuration);\r\n        this.initializeInitActions(configuration, actionsLookup);\r\n        this.initializeActions(configuration, actionsLookup);\r\n        this.initializeEventActions(actionRegistryListener, configuration);\r\n        return actionsLookup;\r\n    }\r\n\r\n    initializeEventActions(actionRegistryListener, config) {\r\n        if ((actionRegistryListener) && (config.eventActions)) {\r\n            config.eventActions.forEach((actionData) => {\r\n                const eventAction = new Action(actionData, this.eventbus);\r\n                actionRegistryListener.registerAction(eventAction, actionData.eventName, actionData.eventTopic);\r\n            });\r\n            delete config.eventActions;\r\n        }\r\n    }\r\n\r\n    initializeActions(config, actionsLookup) {\r\n        if (config.actions) {\r\n            config.actions.forEach((actionData) => {\r\n                const action = new EndableAction(actionData, this.eventbus);\r\n                actionsLookup[actionData.name] = action;\r\n            });\r\n            delete config.actions;\r\n        }\r\n    }\r\n\r\n    initializeInitActions(config, actionsLookup) {\r\n        if (!config.initActions) {\r\n            return;\r\n        }\r\n        config.initActions = config.initActions.map((actionData) => {\r\n            const initAction = new EndableAction(actionData, this.eventbus);\r\n            actionsLookup[actionData.name] = initAction;\r\n            return initAction;\r\n        });\r\n    }\r\n\r\n    initializeTimelineActions(config) {\r\n        if (config.timelines) {\r\n            config.timelines.forEach(this.initializeTimelineAction.bind(this));\r\n        }\r\n    }\r\n\r\n    initializeTimelineAction(timelineConfig) {\r\n        if (!timelineConfig.timelineActions) {\r\n            return;\r\n        }\r\n        timelineConfig.timelineActions = timelineConfig.timelineActions.map((actionData) => {\r\n            const timelineAction = new TimelineAction(actionData, this.eventbus);\r\n            if (!timelineAction.endOperations) {\r\n                timelineAction.endOperations = [];\r\n            }\r\n            return timelineAction;\r\n        });\r\n    }\r\n\r\n    resolveOperations(config) {\r\n        const timelineOperations = [];\r\n        if (config.timelines) {\r\n            config.timelines.forEach((timelineInfo) => {\r\n                timelineOperations.push(...this._gatherOperations(timelineInfo.timelineActions));\r\n            });\r\n        }\r\n\r\n        const systemNameHolders = this._gatherOperations(config.initActions)\r\n                                    .concat(timelineOperations)\r\n                                    .concat(this._gatherOperations(config.actions))\r\n                                    .concat(this._gatherOperations(config.eventActions));\r\n\r\n        systemNameHolders.forEach((holder)=> {\r\n            holder.instance = this.importSystemEntry(holder.systemName);\r\n        });\r\n    }\r\n\r\n    processConfiguration(config, parentConfig) {\r\n        if (config == null) {\r\n            return;\r\n        }\r\n        if (config.constructor === Array) {\r\n            for (let i = 0, ii = config.length; i < ii; i++) {\r\n                this.processConfiguration(config[i], parentConfig);\r\n            }\r\n        } else {\r\n            Object.keys(config).forEach((key) => {\r\n                this._processConfigProperty(key, config, parentConfig);\r\n            });\r\n        }\r\n    }\r\n\r\n    _processConfigProperty(key, config, parentConfig) {\r\n        const value = config[key];\r\n        if (typeof value === 'string') {           \r\n            if ((value.startsWith('config:'))) {\r\n                const configProperty = value.substr(7, value.length);\r\n                config[key] = this._getNestedPropertyValue(configProperty, parentConfig);\r\n            }\r\n            else if ((value.startsWith('template:'))) {\r\n                const templateKey = value.substr(9, value.length);\r\n                config[key] = this.importSystemEntry(templateKey);\r\n            }\r\n            else if ((value.startsWith('json:'))) {\r\n                const jsonKey = value.substr(5, value.length);\r\n                const json = this.importSystemEntry(jsonKey);\r\n                config[key] = json;\r\n            }\r\n        } else if (typeof value === 'object') {\r\n            this.processConfiguration(config[key], parentConfig);\r\n        }\r\n    }\r\n\r\n    _getNestedPropertyValue(propertyChain, sourceObject) {\r\n        const properties = propertyChain.split('.');\r\n        return getNestedValue(properties, sourceObject);\r\n    }\r\n\r\n    _gatherOperations(actions) {\r\n        let result = [];\r\n        if (!actions) {\r\n            return result;\r\n        }\r\n        actions.forEach((action) => {\r\n            if (action.endOperations) {\r\n                result = result.concat(action.startOperations.concat(action.endOperations));\r\n            } else {\r\n                result = result.concat(action.startOperations);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nexport default ConfigurationResolver;\r\n","import * as controllers from '../controllers';\r\nimport * as operations from '../operation';\r\nimport * as providers from '../timelineproviders';\r\nimport * as main from '../';\r\n\r\nclass WebpackResourceImporter {\r\n\r\n    import(name) {\r\n        if (operations[name]) {\r\n            return {\r\n                [name]: operations[name]\r\n            };\r\n        } else if (controllers[name]) {\r\n            return {\r\n                [name]: controllers[name]\r\n            };\r\n        } else if (providers[name]) {\r\n            return {\r\n                [name]: providers[name]\r\n            };\r\n        } else if (main[name]) {\r\n            return {\r\n                [name]: main[name]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default WebpackResourceImporter;\r\n","export { default as EventListenerController } from './EventListenerController';\r\nexport { default as LabelController } from './LabelController';\r\nexport { default as LottieController } from './LottieController';\r\nexport { default as NavigationController } from './NavigationController';\r\nexport { default as ProgressbarController } from './ProgressbarController';\r\nexport { default as RoutingController } from './RoutingController';\r\nexport { default as SubtitlesController } from './SubtitlesController';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass EventListenerController {\r\n\r\n\tconstructor() {\r\n\t\tthis.operationData = null;\r\n\t\tthis.actions = null;\r\n\t\tthis.name = \"EventListenerController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\teventName: operationData.eventName,\r\n\t\t\tactions: operationData.actions.slice(),\r\n\t\t\tactionOperationData: operationData.actionOperationDatab ? JSON.parse(JSON.stringify(operationData.actionOperationData)) : undefined\r\n\t\t}\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tif (!this.actions) {\r\n            this.actions = [];\r\n\t\t\tthis.operationData.actions.forEach((actionName) => {\r\n\t\t\t\tconst [doStart, name] = this.isStartAction(actionName);\r\n                const resultCallback = (actionInstance)=> {\r\n                    this.actions.push({ start:doStart, action: actionInstance});\r\n\t\t\t\t};\r\n\t\t\t\t\r\n                eventbus.broadcast(TimelineEventNames.REQUEST_ACTION, [name, resultCallback]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.operationData.selectedElement[0].tagName.toUpperCase() === \"SELECT\") {\r\n\t\t\tthis.operationData.selectedElement.on(this.operationData.eventName, this.selectEventHandler.bind(this));\r\n\t\t} else {\r\n\t\t\tthis.operationData.selectedElement.on(this.operationData.eventName, this.eventHandler.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tisStartAction(actionName) {\r\n\t\tconst prefix = actionName.substr(0, \"end:\".length);\r\n\t\tif (prefix === \"end:\") {\r\n\t\t\treturn [false, actionName.substr(\"end:\".length)];\r\n\t\t} else {\r\n\t\t\treturn [true, actionName];\r\n\t\t}\r\n\t}\r\n\r\n\teventHandler(event) {\r\n\t\tconst copy = (this.operationData.actionOperationData) ? JSON.parse(JSON.stringify(this.operationData.actionOperationData)) : {};\r\n\t\tif (event.target) {\r\n\t\t\tcopy.targetValue = event.target.value;\r\n\t\t}\r\n\t\tthis.executeAction(this.actions, copy, 0);\r\n\t}\r\n\r\n\texecuteAction(actions, operationData, idx) {\r\n\t\tif (idx < actions.length) {\r\n\t\t\tconst act = actions[idx];\r\n\t\t\tconst action = act.action;\r\n\t\t\tif (act.start) {\r\n\t\t\t\t//console.debug(\"Start action: \" + action.name);\r\n\t\t\t\taction.start(operationData)\r\n\t\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\t\treturn this.executeAction(actions, $.extend(operationData, resultOperationData), ++idx);\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t//console.debug(\"End action: \" + action.name);\r\n\t\t\t\taction.end()\r\n\t\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\t\treturn this.executeAction(actions, $.extend(operationData, resultOperationData), ++idx);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tselectEventHandler(event) {\r\n\t\tconst options = event.target;\r\n\t\tfor (let i = 0, l = options.length; i < l; i++) {\r\n\t\t\tconst opt = options[i];\r\n\t\t\tif (opt.selected) {\r\n\t\t\t\tconst copy = (this.operationData.actionOperationData) ? JSON.parse(JSON.stringify(this.operationData.actionOperationData)) : {};\r\n\t\t\t\tthis.executeAction(this.actions, $.extend({ eventArgs: [opt.value] }, copy), 0);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.operationData.selectedElement.off(this.operationData.eventName);\r\n\t}\r\n\r\n}\r\n\r\nexport default EventListenerController;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass LabelController {\r\n\r\n\tconstructor() {\r\n\t\tthis.listeners = [];\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.name = \"LabelController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = $.extend({},operationData, true);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, [(language)=> {\r\n\t\t\tthis.currentLanguage = language;\r\n\t\t}]);\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_LABEL_COLLECTION, [this.operationData.labelId, (labelCollection)=> {\r\n\t\t\tthis.createTextDataLookup(labelCollection);\r\n\t\t}]);\r\n\t\tthis.setLabel();\r\n\t\tthis.listeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n\t}\r\n\r\n\tsetLabel() {\r\n\t\tthis.operationData.selectedElement.html(this.labelData[this.currentLanguage]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.setLabel();\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((d) => {\r\n\t\t\tthis.labelData[d.code] = d.label;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default LabelController;\r\n","import lottie from 'lottie-web';\r\n\r\nclass LottieController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = \"LottieController\";\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.listeners = [];\r\n\t\tthis.anim = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.serializedData = null;\r\n\t\tthis.serializedIEData = null;\r\n\t\tthis.animationData = null;\r\n\t\tthis.freezePosition = -1;\r\n\t\tthis.endPosition = -1;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\trenderer: operationData.renderer,\r\n\t\t\tloop: operationData.loop,\r\n\t\t\tautoplay: operationData.autoplay,\r\n\t\t\tanimationData: operationData.animationData,\r\n\t\t\tjson: operationData.json,\r\n\t\t\tlabelIds: operationData.labelIds,\r\n\t\t\tviewBox: operationData.viewBox\r\n\t\t};\r\n\t\tif (operationData.url.indexOf(\"[\") > -1) {\r\n\t\t\tthis.parseFilename(operationData.url);\r\n\t\t}\r\n\t\tthis.serializedData = this.operationData.json\r\n\t\t\t? JSON.stringify(this.operationData.json)\r\n\t\t\t: JSON.stringify(this.operationData.animationData);\r\n\t\tif (this.operationData.iefallback) {\r\n\t\t\tthis.serializedIEData = JSON.stringify(this.operationData.iefallback);\r\n\t\t}\r\n\t}\r\n\r\n\tparseFilename(name) {\r\n\t\tconst params = name.substr(name.indexOf(\"[\") + 1, name.indexOf(\"]\") - name.indexOf(\"[\") - 1);\r\n\t\tconst settings = params.split(\",\");\r\n\t\tsettings.forEach((setting) => {\r\n\t\t\tconst values = setting.split(\"=\");\r\n\t\t\tif (values[0] === \"freeze\") {\r\n\t\t\t\tthis.freezePosition = +values[1];\r\n\t\t\t} else if (values[0] === \"end\") {\r\n\t\t\t\tthis.endPosition = +values[1];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tif ((this.operationData.labelIds) && (this.operationData.labelIds.length)) {\r\n\t\t\tconst resultHolder = {};\r\n\t\t\teventbus.broadcast('request-current-language', [resultHolder]);\r\n\t\t\tthis.currentLanguage = resultHolder.language;\r\n\t\t\tthis.listeners.push(eventbus.on('language-change', this.handleLanguageChange.bind(this)));\r\n\t\t\teventbus.broadcast('request-label-collections', [this.operationData.labelIds, resultHolder]);\r\n\t\t\tthis.createTextDataLookup(resultHolder.labelCollections);\r\n\t\t}\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t\tif (this.anim) {\r\n\t\t\tif (this.endPosition > -1) {\r\n\t\t\t\tthis.anim.onComplete = this.destroy.bind(this);\r\n\t\t\t\tthis.anim.playSegments([this.freezePosition, this.endPosition], true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.anim.destroy();\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    \r\n\tdestroy() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t\tthis.anim = null;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateAnimation() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t}\r\n\t\tlet serialized = (this.isIE()) ? this.serializedIEData : this.serializedData;\r\n\r\n\t\tconst labelIds = this.operationData.labelIds;\r\n\t\tif ((labelIds) && (labelIds.length)) {\r\n\t\t\tlabelIds.forEach((id) => {\r\n\t\t\t\tserialized = serialized.split(`!!${id}!!`).join(this.labelData[id][this.currentLanguage]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst animData = JSON.parse(serialized);\r\n\r\n\t\tconst animationData = {\r\n\t\t\tautoplay: this.operationData.autoplay,\r\n\t\t\tcontainer: this.operationData.selectedElement[0],\r\n\t\t\tloop: this.operationData.loop,\r\n\t\t\trenderer: this.operationData.renderer,\r\n\t\t\tanimationData:animData\r\n\t\t}\r\n\r\n\t\tthis.anim = lottie.loadAnimation(animationData);\r\n\t\tif (this.endPosition < 0) {\r\n\t\t\tthis.endPosition = this.anim.timeCompleted;\r\n\t\t}\r\n\r\n\t\tif (this.freezePosition > -1) {\r\n\t\t\tthis.anim.playSegments([0, this.freezePosition], true);\r\n\t\t}\r\n\t\tif (this.operationData.viewBox) {\r\n\t\t\tthis.operationData.selectedElement.find(\"svg\").attr('viewBox', this.operationData.viewBox);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((infos, index) => {\r\n\t\t\tinfos.forEach((d) => {\r\n\t\t\t\tthis.labelData[this.operationData.labelIds[index]][d.code] = d.label;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tisIE() {\r\n\t\tconst isIE = false || !!document['documentMode'];\r\n\r\n\t\t// Edge 20+\r\n\t\tconst isEdge = !isIE && !!window['StyleMedia'];\r\n\r\n\t\treturn isEdge || isIE;\r\n\t}\r\n\r\n}\r\n\r\nexport default LottieController;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","import $ from 'jquery';\r\n\r\nclass NavigationController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = 'NavigationController';\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.ctrlLookup = {};\r\n\t\tthis.activeNavigationPoint = null;\r\n\t\tthis.labelControllers = null;\r\n\t\tthis.eventhandlers = null;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.container = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.labelControllers = [];\r\n\t\tthis.eventhandlers.push(eventbus.on('navigate-to-video-url', this.handleNavigateVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('highlight-navigation', this.highlightMenu.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('request-current-navigation', this.handleRequestCurrentNavigation.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('video-complete', this.handleVideoComplete.bind(this), this.playerId));\r\n\t\tthis.eventbus = eventbus;\r\n\r\n        this.buildHtml(this.container, this.navigation);\r\n        this.initHistory.bind(this);\r\n\t}\r\n\r\n\tinitHistory() {\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[0];\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tlet videoIndex = 0;\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tvideoIndex = nav.videoUrlIndex;\r\n\t\t}\r\n\t\tthis.highlightMenu(videoIndex);\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf('#');\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split('/');\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleRequestCurrentNavigation(resultCallback) {\r\n\t\tresultCallback({\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]\r\n\t\t});\r\n\t}\r\n\r\n\t detach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.labelControllers.forEach((ctrl) => {\r\n\t\t\tctrl.detach(eventbus);\r\n\t\t});\r\n\t\tthis.labelControllers.length = 0;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t\twindow.onpopstate = null;\r\n\t}\r\n\r\n\tpushCurrentState(position = -1) {\r\n\t\tconst state = {\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint\r\n\t\t\t\t.labelId].currentLanguage]\r\n\t\t};\r\n\t\tif (position > -1) {\r\n\t\t\tstate.position = position;\r\n\t\t}\r\n\t\tthis.eventbus.broadcast('push-history-state',[state]);\r\n\t}\r\n\r\n\tbuildHtml(parentElm, data) {\r\n\t\tconst ul = $('<ul/>');\r\n\t\tdata.forEach(this.addNavElement.bind(this, ul));\r\n\t\tparentElm.append(ul);\r\n\t}\r\n\r\n\taddNavElement(parentElm, data) {\r\n\t\tif (data.visible) {\r\n\t\t\tconst li = $('<li/>');\r\n\t\t\tconst a = $(`<a href='javascript:;' id='nav_${data.videoUrlIndex}'/>`);\r\n\t\t\tli.append(a);\r\n\t\t\tthis.addLabel(a, data.labelId);\r\n\t\t\tthis.addClickHandler(a, data.videoUrlIndex);\r\n\t\t\tif (data.children) {\r\n\t\t\t\tconst ul = $('<ul/>');\r\n\t\t\t\tdata.children.forEach(this.addNavElement.bind(this, ul));\r\n\t\t\t\tli.append(ul);\r\n\t\t\t}\r\n\t\t\tparentElm.append(li);\r\n\t\t}\r\n\t}\r\n\r\n\taddClickHandler(parentElm, videoIndex) {\r\n\t\tparentElm.mouseup(this.menuMouseupHandler.bind(this, videoIndex));\r\n\t}\r\n\r\n\tmenuMouseupHandler(videoIndex) {\r\n\t\tconst navdata = this.navVidIdLookup[videoIndex];\r\n\t\tif (navdata) {\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navdata.videoUrlIndex]);\r\n\t\t\tthis.handleNavigateVideoUrl(navdata.videoUrlIndex);\r\n\t\t}\r\n\t}\r\n\r\n\thandleNavigateVideoUrl(index, requestedVideoPosition) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n\t\tthis.highlightMenu(index);\r\n\t\tthis.eventbus.broadcast('request-video-url', [index, requestedVideoPosition]);\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[index];\r\n\t\tthis.pushCurrentState(requestedVideoPosition);\r\n\t}\r\n\r\n\thighlightMenu(index) {\r\n\t\tconst navElm = $(`#nav_${index}`);\r\n\t\tif (navElm.length) {\r\n\t\t\t$('.current-menu-item').removeClass('current-menu-item');\r\n\t\t\tnavElm.addClass('current-menu-item');\r\n\t\t}\r\n\t}\r\n\r\n\thandleVideoComplete(index) {\r\n\t\tconsole.log('Navigation controller received video complete');\r\n\t\tconst navData = this.navVidIdLookup[index];\r\n\t\tif (navData.autoNext) {\r\n\t\t\tconsole.log('NavigationController.handleVideoComplete - request-video-url: ' + navData.next.videoUrlIndex);\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navData.next.videoUrlIndex]);\r\n\t\t} else {\r\n\t\t\tconsole.log('handleVideoComplete - request-video-cleanup');\r\n\t\t\tthis.eventbus.broadcast('request-video-cleanup');\r\n\t\t}\r\n\t}\r\n\r\n\taddLabel(parentElm, labelId) {\r\n\t\tconst data = {\r\n\t\t\t\tselectedElement: parentElm,\r\n\t\t\t\tlabelId: labelId\r\n\t\t\t};\r\n\t\tconst resultCallback = (instance)=> {\r\n            instance.init(data);\r\n            instance.attach(this.eventbus);\r\n            this.labelControllers.push(instance);\r\n            this.ctrlLookup[labelId] = instance;\r\n\t\t};\r\n\t\tthis.eventbus.broadcast('request-instance', ['LabelController', resultCallback]);\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nexport default NavigationController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass ProgressbarController {\r\n\r\n\tconstructor() {\r\n\t\tthis.selectedElement = null;\r\n\t\tthis.textElement = null;\r\n\t\tthis.detachers = [];\r\n\t\tthis.name = \"ProgressbarController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.selectedElement = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.textElement = operationData.textElement;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.detachers.push(eventbus.on(TimelineEventNames.POSITION_UPDATE, this.positionUpdateHandler.bind(this), this.playerId));\r\n\t\tconst clickHandler = this.clickHandler.bind(this);\r\n\t\tthis.selectedElement.on(\"click\", clickHandler);\r\n\t\tthis.detachers.push(()=> this.selectedElement.off(\"click\"), clickHandler);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.detacher.forEach((func)=> {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\tpositionUpdateHandler(position, duration) {\r\n\t\tlet perc = (100 / duration) * position;\r\n\t\tif (this.selectedElement) {\r\n\t\t\tthis.selectedElement.css(\"width\", `${perc}%`);\r\n\t\t}\r\n\t\tperc = Math.floor(perc);\r\n\t\tif (this.textElement) {\r\n\t\t\tthis.textElement.text(`${perc}%`);\r\n\t\t}\r\n\t}\r\n\r\n\tclickHandler() {\r\n\r\n\t}\r\n}\r\n\r\nexport default ProgressbarController;\r\n","class RoutingController {\r\n\r\n\tconstructor() {\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.eventbus = null;\r\n\t\tthis.name = \"RoutingController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t\tthis.playerId = operationData.playerId;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers.push(eventbus.on(\"before-request-video-url\", this.handleBeforeRequestVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on(\"push-history-state\", this.handlePushHistoryState.bind(this)));\r\n\t\tthis.eventbus = eventbus;\r\n\t\twindow.onpopstate = this.handlePopstate.bind(this);\r\n\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tlet pos = this.getQueryVariable(1);\r\n\t\t\tpos = (pos) ? +pos : 0;\r\n\t\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, pos, true]);\r\n\t\t} else {\r\n\t\t\twindow.history.pushState({ navigationId: this.navigation[0].id },\r\n\t\t\t\t\"\",\r\n\t\t\t\t`#/${this.navigation[0].id}`);\r\n\t\t}\r\n\t}\r\n\r\n\thandlePopstate(event) {\r\n\t\tconst navigationId = (event.state) ? event.state.navigationId : this.navigation[0].id;\r\n\t\tconst position = (event.state) ? event.state.position : 0;\r\n\t\tconst nav = this.navLookup[navigationId];\r\n\t\tthis.eventbus.broadcast(\"highlight-navigation\", [nav.videoUrlIndex]);\r\n\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, position, true]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.eventbus = null;\r\n\t}\r\n\r\n\thandleBeforeRequestVideoUrl(index, requestedVideoPosition, isHistoryRequest) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n        isHistoryRequest = (isHistoryRequest !== undefined) ? isHistoryRequest : false;\r\n\t\tif (!isHistoryRequest) {\r\n            const resultCallback = (item)=> {\r\n                this.pushState(item);\r\n            };\r\n\t\t\tthis.eventbus.broadcast(\"request-current-navigation\", [resultCallback]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf(\"#\");\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split(\"/\");\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandlePushHistoryState(state) {\r\n\t\tthis.pushState(state);\r\n\t}\r\n\r\n\tpushState(state) {\r\n\t\tif ((state) && (state.navigationData) && (state.navigationData.visible)) {\r\n\t\t\tlet currentPosition = (state.position !== undefined) ? state.position : -1;\r\n\t\t\tif (currentPosition < 0) {\r\n\t\t\t\tconst resultCallback = (position)=> {\r\n                    currentPosition = (position > 3) ? (position - 3) : 0;\r\n                };\r\n\t\t\t\tthis.eventbus.broadcast(\"request-current-video-position\", [resultCallback]);\r\n\t\t\t}\r\n\r\n\t\t\tconst currentState = window.history.state;\r\n\t\t\tif ((currentState) && (currentState.navigationId !== state.navigationData.id)) {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t} else if ((currentState) && (currentState.navigationId === state.navigationData.id)) {\r\n\t\t\t\twindow.history.replaceState({ navigationId: currentState.navigationId, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${currentState.navigationId}/${currentPosition}`);\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t}\r\n\t\t\twindow.document.title = state.title;\r\n\t\t}\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nexport default RoutingController;\r\n","class SubtitlesController {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionLookup = null;\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.lastFunc = null;\r\n\t\tthis.name = \"SubtitlesController\";\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst detachTime = eventbus.on(\"time\", this.onTimeHandler.bind(this));\r\n\t\tconst detachLangChange = eventbus.on(\"language-change\", this.languageChangeHandler.bind(this));\r\n\t\tthis.internalDetach = this.internalDetach.bind(this, [detachTime, detachLangChange]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.internalDetach();\r\n\t}\r\n\r\n\tinternalDetach(detachMethods) {\r\n\t\tif (detachMethods) {\r\n\t\t\tdetachMethods.forEach((f) => {\r\n\t\t\t\tf();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tlanguageChangeHandler(newLanguage) {\r\n\t\tthis.currentLanguage = newLanguage;\r\n\t\tif (this.lastFunc) {\r\n\t\t\tthis.lastFunc();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveTitle(container) {\r\n\t\tcontainer.text(\"\");\r\n\t\tthis.lastFunc = null;\r\n\t}\r\n\r\n\tonTimeHandler(position) {\r\n\t\tconst func = this.actionLookup[position];\r\n\t\tif (func) {\r\n\t\t\tfunc();\r\n\t\t\tthis.lastFunc = func;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTitle(container, titleLanguageLookup) {\r\n\t\tcontainer.text(titleLanguageLookup[this.currentLanguage]);\r\n\t}\r\n\r\n\tcreateActionLookup(controllerData, container) {\r\n\t\tconst subtitleData = controllerData.subtitleData;\r\n\t\tconst titles = subtitleData[0].titles;\r\n\t\tconst subtitleTimeLookup = {};\r\n\t\tfor (let i = 0, ii = titles.length; i < ii; i++) {\r\n\t\t\tconst titleLanguageLookup = {};\r\n\t\t\tfor (let j = 0, jj = subtitleData.length; j < jj; j++) {\r\n\t\t\t\tconst subs = subtitleData[j];\r\n\t\t\t\ttitleLanguageLookup[subs.lang] = subs.titles[i].text;\r\n\t\t\t}\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.start] = this.setTitle.bind(this, container, titleLanguageLookup);\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.end] = this.removeTitle;\r\n\t\t}\r\n\t\treturn subtitleTimeLookup;\r\n\t}\r\n\r\n\tinit(controllerData) {\r\n\t\tconst container = controllerData.selectedElement;\r\n\t\tthis.removeTitle = this.removeTitle.bind(this, container);\r\n\t\tthis.currentLanguage = controllerData.language;\r\n\t\tthis.actionLookup = this.createActionLookup(controllerData, container);\r\n\t}\r\n}\r\n\r\nexport default SubtitlesController;\r\n","export { default as addClass } from './addClass';\r\nexport { default as addControllerToElement } from './addControllerToElement';\r\nexport { default as addOptionList } from './addOptionList';\r\nexport { default as animate } from './animate';\r\nexport { default as animateWithClass } from './animateWithClass';\r\nexport { default as broadcastEvent } from './broadcastEvent';\r\nexport { default as clearElement } from './clearElement';\r\nexport { default as clearOperationData } from './clearOperationData';\r\nexport { default as customFunction } from './customFunction';\r\nexport { default as endAction } from './endAction';\r\nexport { default as extendController } from './extendController';\r\nexport { default as getControllerFromElement } from './getControllerFromElement';\r\nexport { default as getControllerInstance } from './getControllerInstance';\r\nexport { default as getElementDimensions } from './getElementDimensions';\r\nexport { default as loadJSON } from './loadJSON';\r\nexport { default as removeClass } from './removeClass';\r\nexport { default as removeControllerFromElement } from './removeControllerFromElement';\r\nexport { default as removeElement } from './removeElement';\r\nexport { default as removePropertiesFromOperationData } from './removePropertiesFromOperationData';\r\nexport { default as reparentElement } from './reparentElement';\r\nexport { default as requestAction } from './requestAction';\r\nexport { default as resizeAction } from './resizeAction';\r\nexport { default as selectElement } from './selectElement';\r\nexport { default as setElementAttributes } from './setElementAttributes';\r\nexport { default as setElementContent } from './setElementContent';\r\nexport { default as setOperationData } from './setOperationData';\r\nexport { default as setStyle } from './setStyle';\r\nexport { default as startAction } from './startAction';\r\nexport { default as toggleClass } from './toggleClass';\r\nexport { default as toggleElement } from './toggleElement';\r\nexport { default as wait } from './wait';\r\n","function addClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.addClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default addClass;\r\n","import attachControllerToElement from './helper/attachControllerToElement';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction addControllerToElement(operationData, eventBus) {\r\n    const {selectedElement, controllerInstance} = operationData;\r\n    \r\n    attachControllerToElement(selectedElement, controllerInstance);\r\n    \r\n    controllerInstance.init(operationData);\r\n\r\n    const promise = controllerInstance.attach(eventBus);\r\n\r\n    if (promise) {\r\n        return new Promise((resolve, reject)=> {\r\n            promise.then((newOperationData) => {\r\n                internalResolve(resolve, operationData, newOperationData);\r\n            }, reject);\r\n        })\r\n    } else {\r\n        return operationData;\r\n    }\r\n}\r\n\r\nexport default addControllerToElement;\r\n","import { getElementControllers } from './getElementData';\r\n\r\nfunction attachControllerToElement(element, controller) {\r\n    if (!element.data('chronoEngineControllers')) {\r\n        element.data('chronoEngineControllers', []);\r\n    }\r\n    const controllers = getElementControllers(element);\r\n    controllers.push(controller);\r\n}\r\n\r\nexport default attachControllerToElement;\r\n","function createOptionElementText(valueProperty, labelProperty, defaultIndex, defaultValue, data, index) {\r\n    let selected = '';\r\n    if (defaultValue) {\r\n        selected = (data[valueProperty] === defaultValue) ? ' selected' : '';\r\n    } else if (defaultIndex) {\r\n        selected = (index === defaultIndex) ? ' selected' : '';\r\n    }\r\n    return `<option value='${data[valueProperty]}'${selected}>${data[labelProperty]}</option>`;\r\n}\r\n\r\nfunction addOptionList(operationData, eventBus) {\r\n    const { valueProperty, labelProperty, defaultIndex, defaultValue, optionData, selectedElement } = operationData;\r\n\r\n    const createOption = createOptionElementText.bind(null, valueProperty, labelProperty, defaultIndex, defaultValue);\r\n\r\n    const optionElements = optionData.map(createOption);\r\n\r\n    selectedElement.html(optionElements);\r\n\r\n    return operationData;\r\n}\r\n\r\nexport default addOptionList;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animate(operationData, eventBus) {\r\n    const {animationEasing, selectedElement, animationProperties, animationDuration} = operationData;\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            if (animationEasing) {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    animationEasing,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            } else {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            }\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n    return promise;\r\n}\r\n\r\nexport default animate;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animateWithClass(operationData, eventBus) {\r\n    let {selectedElement, className, removeClass } = operationData;\r\n    removeClass = (removeClass !== undefined) ? removeClass : true;\r\n\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            selectedElement.one(\"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd\",\r\n            () => {\r\n                if (removeClass) {\r\n                    selectedElement.removeClass(className);\r\n                }\r\n                internalResolve(resolve, {}, operationData);\r\n            });\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n    selectedElement.addClass(className);\r\n\r\n    return promise;\r\n}\r\n\r\nexport default animateWithClass;\r\n","import resolveEventArguments from './helper/resolveEventArguments';\r\nimport removeEventDataFromOperationData from './helper/removeEventDataFromOperationData';\r\n\r\nfunction broadcastEvent(operationData, eventBus) {\r\n    const {eventArgs, eventTopic, eventName} = operationData;\r\n\r\n    const eventArguments = resolveEventArguments(operationData, eventArgs);\r\n    \r\n    if (eventTopic) {\r\n        eventBus.broadcastForTopic(eventName, eventTopic, eventArguments);\r\n    } else {\r\n        eventBus.broadcast(eventName, eventArguments);\r\n    }\r\n\r\n    removeEventDataFromOperationData(operationData);\r\n}\r\n\r\nexport default broadcastEvent;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolveEventArguments(operationData, eventArgs) {\r\n    if (!eventArgs) {\r\n        return;\r\n    }\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    return eventArgs.map(extract);\r\n}\r\n\r\nexport default resolveEventArguments;\r\n","function removeEventDataFromOperationData(operationData) {\r\n    delete operationData.eventName;\r\n    delete operationData.eventTopic;\r\n    delete operationData.eventArgs;\r\n}\r\n\r\nexport default removeEventDataFromOperationData;\r\n","function clearElement(operationData, eventBus) {\r\n    const {selectedElement} = operationData;\r\n    selectedElement.empty();\r\n    return operationData;\r\n}\r\n\r\nexport default clearElement;\r\n","function clearOperationData(operationData, eventBus) {\r\n    return {};\r\n}\r\n\r\nexport default clearOperationData;\r\n","import internalResolve from './helper/internalResolve';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction customFunction(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    return new Promise((resolve, reject) => {\r\n        const resultCallback = (func)=> {\r\n            const promise = func(operationData, eventBus);\r\n            if (promise) {\r\n                promise.then(() => {\r\n                    internalResolve(resolve, {}, operationData);\r\n                }, reject);\r\n            } else {\r\n                internalResolve(resolve, {}, operationData);\r\n            }\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_FUNCTION, [systemName, resultCallback]);\r\n    });\r\n}\r\n\r\nexport default customFunction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction endAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    delete operationData.actionOperationData;\r\n    return new Promise((resolve, reject)=> {\r\n        const mergedData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.end(mergedData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default endAction;\r\n","function extendController(operationData, eventBus) {\r\n    const { controllerInstance, controllerExtension } = operationData;\r\n    \r\n    operationData.controllerInstance = Object.assign(controllerInstance, controllerExtension);\r\n    \r\n    return operationData;\r\n}\r\n\r\nexport default extendController;\r\n","import { getElementControllers } from './helper/getElementData';\r\n\r\nfunction getControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n    const controllers = getElementControllers(selectedElement);\r\n    let controller = null;\r\n    controllers.some((ctrl) => {\r\n        if (ctrl.name === controllerName) {\r\n            controller = ctrl;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (!controller) {\r\n        console.warn(`controller for name '${controllerName}' was not found on the given element`);\r\n    }\r\n    operationData.controllerInstance = controller;\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerFromElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction getControllerInstance(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    let {propertyName} = operationData;\r\n    \r\n    propertyName = propertyName || \"controllerInstance\";\r\n    const resultCallback = (instance)=> {\r\n        operationData[propertyName] = instance;\r\n    }\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_INSTANCE, [systemName, resultCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerInstance;\r\n","import modifyDimensions from './helper/modifyDimensions';\r\n\r\nfunction getElementDimensions(operationData, eventBus) {\r\n    let {selectedElement, dimensions, modifier} = operationData;\r\n    dimensions = dimensions || {};\r\n    dimensions.width = selectedElement.innerWidth();\r\n    dimensions.height = selectedElement.innerHeight();\r\n    if (dimensions.height === 0) {\r\n        dimensions.height = dimensions.width;\r\n    }\r\n    if (modifier) {\r\n        modifyDimensions(dimensions, modifier);\r\n    }\r\n    operationData.dimensions = dimensions;\r\n    return operationData;\r\n}\r\n\r\nexport default getElementDimensions;\r\n","function modifyDimensionsByRatio(ratioModifier, dimensions) {\r\n    //h[ar=8-1]\r\n    let prefix = ratioModifier.substr(0, 1);\r\n    let ratio = ratioModifier.substr(ratioModifier.indexOf('[') + 1, ratioModifier.indexOf(']') - ratioModifier.indexOf('[') - 1);\r\n    let ratios = ratio.split('=')[1].split('-');\r\n    if (prefix === 'h') {\r\n        dimensions.height = (dimensions.width / +ratios[0]) * +ratios[1];\r\n    } else if (prefix === 'w') {\r\n        dimensions.width = (dimensions.height / +ratios[1]) * +ratios[0];\r\n    }\r\n}\r\n\r\nfunction getModifierSuffix(modifier) {\r\n    let endIdx = 1;\r\n    let suffix = modifier.substr(modifier.length - 1, 1);\r\n    if ((suffix !== 'h') && (suffix !== 'w') && (suffix !== '%')) {\r\n        suffix = null;\r\n    }\r\n    const isPercent = (suffix === '%');\r\n    if (isPercent) {\r\n        endIdx = 2;\r\n        suffix = modifier.substr(modifier.length - endIdx, 1);\r\n        if ((suffix !== 'h') && (suffix !== 'w')) {\r\n            suffix = null;\r\n            endIdx = 1;\r\n        }\r\n    }\r\n    return [suffix, endIdx, isPercent];\r\n}\r\n\r\nfunction _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier) {\r\n    switch (prefix) {\r\n        case '+':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height += heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width += widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height += heightModifier;\r\n                    dimensions.width += widthModifier;\r\n            }\r\n            break;\r\n        case '-':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height -= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width -= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height -= heightModifier;\r\n                    dimensions.width -= widthModifier;\r\n            }\r\n            break;\r\n        case '/':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height /= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width /= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height /= heightModifier;\r\n                    dimensions.width /= widthModifier;\r\n            }\r\n            break;\r\n        case '*':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height *= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width *= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height *= heightModifier;\r\n                    dimensions.width *= widthModifier;\r\n            }\r\n            break;\r\n        default:\r\n            console.error(`Unknown operator found: ${prefix}`);\r\n    }\r\n    return dimensions;\r\n}\r\n\r\nfunction modifyDimensions(dimensions, modifier) {\r\n    let ratioModifier = null;\r\n    if (modifier.indexOf('|') > -1) {\r\n        [modifier, ratioModifier] = modifier.split('|');\r\n    }\r\n\r\n    const prefix = modifier.substr(0, 1);\r\n    let [suffix, endIdx, isPercent] = getModifierSuffix(modifier);\r\n\r\n    const value = parseInt((suffix !== null) ? modifier.substr(1, modifier.length - endIdx - 1) : modifier.substr(1, modifier.length), 10);\r\n\r\n    let widthModifier = value;\r\n    let heightModifier = value;\r\n    if (isPercent) {\r\n        widthModifier = (dimensions.width / 100) * value;\r\n        heightModifier = (dimensions.height / 100) * value;\r\n    }\r\n\r\n    dimensions = _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier);\r\n\r\n    if (ratioModifier) {\r\n        modifyDimensionsByRatio(ratioModifier, dimensions)\r\n    }\r\n}\r\n\r\nexport default modifyDimensions;","function loadJSON(jsonCache, operationData, eventBus) {\r\n    const {url, cache} = operationData;\r\n\r\n    let { propertyName } = operationData;\r\n    propertyName = propertyName || \"json\";\r\n\r\n    if (cache && jsonCache[url]) {\r\n        operationData[propertyName] = jsonCache[url];\r\n        return operationData;\r\n    }\r\n\r\n\r\n    return new Promise((resolve, reject)=> {\r\n        fetch(url)\r\n        .then((response)=> {\r\n            jsonCache[url] = operationData[propertyName] = response.body;\r\n            resolve(operationData);\r\n        })\r\n        .catch(reject);\r\n    });\r\n}\r\n\r\nexport default loadJSON.bind(null, {});\r\n","function removeClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.removeClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default removeClass;\r\n","import {getElementControllers} from './helper/getElementData';\r\n\r\nfunction removeControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n\r\n    const controllers = getElementControllers(selectedElement);\r\n    if (controllers) {\r\n        let controller = null;\r\n        controllers.some((ctrl) => {\r\n            if (ctrl.name === controllerName) {\r\n                controller = ctrl;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (controller) {\r\n            const idx = controllers.indexOf(controller);\r\n            if (idx > -1) {\r\n                controllers.splice(idx, 1);\r\n            }\r\n            controller.detach(eventBus);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default removeControllerFromElement;\r\n","export function removeElement(operationData, eventBus) {\r\n    operationData.selectedElement.remove();\r\n    return operationData;\r\n}\r\n\r\nexport default removeElement;\r\n","function removePropertiesFromOperationData(operationData, eventBus) {\r\n    const {\r\n        propertyNames\r\n    } = operationData;\r\n\r\n    propertyNames.forEach(name => {\r\n        delete operationData[name];\r\n    });\r\n    delete operationData.propertyNames;\r\n    return operationData;\r\n}\r\n\r\nexport default removePropertiesFromOperationData;","function reparentElement(operationData, eventBus) {\r\n    const {selectedElement, newParentSelector} = operationData;\r\n    selectedElement.remove().appendTo(newParentSelector);\r\n}\r\n\r\nexport default reparentElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction requestAction(operationData, eventBus) {\r\n        const { actionName } = operationData;\r\n\r\n        const resultCallback = (action) => {\r\n            operationData.actionInstance = action;\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_ACTION, [actionName, resultCallback]);\r\n        return operationData;\r\n}\r\n\r\nexport default requestAction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\n\r\nfunction resizeAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    operationData = mergeOperationData(operationData, actionOperationData);\r\n    if (actionInstance.resize) {\r\n        return actionInstance.resize(operationData);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default resizeAction;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction findElementBySelector(root, selector, operationData, propertyName) {\r\n    const element = root.find(selector);\r\n    if (!element.length) {\r\n        console.warn(`selector '${selector}' wasn't found!`);\r\n    }\r\n    operationData[propertyName] = element;\r\n    if (operationData.hasOwnProperty(\"propertyName\")) {\r\n        delete operationData.propertyName;\r\n    }\r\n}\r\n\r\nfunction selectElement(operationData, eventBus) {\r\n    let {selector, propertyName, useExistingAsRoot} = operationData;\r\n\r\n    if (!selector) {\r\n        throw new Error(\"selector is undefined!\");\r\n    }\r\n    propertyName = (propertyName) ? propertyName : \"selectedElement\";\r\n\r\n    if (useExistingAsRoot && operationData[propertyName]) {\r\n        const currentRoot = operationData[propertyName];\r\n        findElementBySelector(currentRoot, selector, operationData, propertyName);\r\n        return operationData;\r\n    }\r\n\r\n    const rootCallback = (root)=> {\r\n        findElementBySelector(root, selector, operationData, propertyName);\r\n    };\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_ENGINE_ROOT, [rootCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default selectElement;\r\n","function setElementAttributes(operationData, eventBus) {\r\n    const {attributes, selectedElement} = operationData;\r\n    for (let attrName in attributes) {\r\n        if (attributes.hasOwnProperty(attrName)) {\r\n            selectedElement.attr(attrName, attributes[attrName]);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementAttributes;\r\n","function setElementContent(operationData, eventBus) {\r\n    const {append, selectedElement, template} = operationData;\r\n    if (!append) {\r\n        selectedElement.html(template);\r\n    } else {\r\n        selectedElement.append(template);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementContent;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setOperationData(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData = Object.assign(operationData, properties);\r\n    delete operationData.properties;\r\n    return operationData;\r\n}\r\n\r\nexport default setOperationData;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setStyle(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData.selectedElement.css(properties);\r\n    return operationData;\r\n}\r\n\r\nexport default setStyle;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction startAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    return new Promise((resolve, reject)=> {\r\n        operationData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.start(operationData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default startAction;\r\n","function toggleClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.toggleClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default toggleClass;\r\n","function toggleElement(operationData, eventBus) {\r\n    operationData.selectedElement.toggle();\r\n    return operationData;\r\n}\r\n\r\nexport default toggleElement;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction wait(operationData, eventBus) {\r\n    const { milliseconds } = operationData;\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, milliseconds);\r\n    });\r\n}\r\n\r\nexport default wait;\r\n","export { default as JwPlayerTimelineProvider } from './jwplayer-timeline-provider';\r\n// export { default as MediaElementTimelineProvider} from './mediaelement-timeline-provider';\r\nexport { default as RequestAnimationFrameTimelineProvider } from './request-animation-frame-timeline-provider';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass JwPlayerTimelineProvider {\r\n\r\n   constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.playerid = config.playerSettings.selector;\r\n        this.loop = false;\r\n        this.player = null;\r\n        this.currentLoopHandler = null;\r\n        this._eventbusListeners = [];\r\n        this._addEventListeners();\r\n    }\r\n\r\n    _extractUrls(configuration) {\r\n        const urls = configuration.timelines.filter(timeline => timeline.type === \"video\").map(timeline => {\r\n            return timeline.uri;\r\n        });\r\n        return urls;\r\n    }\r\n\r\n    init(selector) {\r\n        const urls = this._extractUrls(this.config);\r\n        const jwp = window.jwplayer;\r\n        const p = $(`#${selector}`);\r\n        if (!p.length) {\r\n            throw new Error(`videoplayer selector '${selector}' not found`);\r\n        }\r\n        let w = p.innerWidth();\r\n        let h = p.innerHeight();\r\n        if (w === 0) {\r\n            w = 100;\r\n        }\r\n        if (h === 0) {\r\n            h = 300;\r\n        }\r\n\r\n        this.player = jwp(this.config.playerSettings.selector);\r\n        this.player.setup({\r\n            file: urls[0],\r\n            image: this.config.playerSettings.poster,\r\n            height: h,\r\n            width: w,\r\n            controls: true,\r\n            autostart: false,\r\n            displaytitle: false,\r\n            displaydescription: false,\r\n            nextUpDisplay: false,\r\n            abouttext: 'Rosetta Group',\r\n            aboutlink: 'http://www.rosettagroup.nl',\r\n            stretching: \"fill\",\r\n            repeat: false\r\n        });\r\n        const playlist = [];\r\n        urls.forEach((url) => {\r\n            playlist.push({\r\n                file: url,\r\n                title: url,\r\n                image: this.config.playerSettings.poster\r\n            });\r\n        });\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.player.once(\"ready\", () => {\r\n                this._handlePlayerReady(resolve);\r\n            });\r\n            this.player.load(playlist);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    _handlePlayerReady(resolve) {\r\n        this.player.once(\"firstFrame\", () => {\r\n            this.player.pause();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.player.playerid, [this.getDuration()]);\r\n            resolve(this);\r\n        });\r\n        this.player.on(TimelineEventNames.TIME, this._loopHandler.bind(this, Math.floor));\r\n        this.player.on(TimelineEventNames.SEEKED, this._seekedHandler.bind(this));\r\n        this.player.on(TimelineEventNames.COMPLETE, this._handlePlayerComplete.bind(this));\r\n        setTimeout(()=> {\r\n            this.player.play();\r\n        },10);\r\n    }\r\n\r\n    _handlePlayerComplete() {\r\n        if (!this.loop) {\r\n            this.stop();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.playerid, [this.player.getPlaylistIndex()]);\r\n        }\r\n    }\r\n\r\n    _seekedHandler() {\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.playerid, [this.getPosition(), this.getDuration()]);\r\n    }\r\n\r\n    destroy() {\r\n        this.player.remove();\r\n        this._eventbusListeners.forEach(func => func());\r\n    }\r\n\r\n    _loopHandler(floor, event) {\r\n        const pos = floor(event.position);\r\n        if ((this.loop) && (pos === floor(this.player.getDuration() - 1))) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _timeResetLoopHandler(event) {\r\n        if (this.loop) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this.resize.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.duration.bind(this), this.playerid));\r\n    }\r\n\r\n    _container(resultCallback) {\r\n        let suffix = \"\";\r\n        if (this.player.getProvider().name !== \"html5\") {\r\n            suffix = \"_wrapper\";\r\n        }\r\n        const container = $(`#${this.playerid}${suffix}`);\r\n        resultCallback(container);\r\n    }\r\n\r\n    play() {\r\n        this.player.play();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.playerid);\r\n    }\r\n\r\n    stop() {\r\n        this.player.stop();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.playerid);\r\n    }\r\n\r\n    pause() {\r\n        this.player.pause();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.playerid);\r\n    }\r\n\r\n    seek(position) {\r\n        const currentPosition = this.player.getPosition();\r\n        this.player.seek(position);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.playerid, [position, currentPosition, this.player.getDuration()]);\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.player.resize(width, height);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.RESIZE, this.playerid, [width, height]);\r\n    }\r\n\r\n    duration(resultCallback) {\r\n        resultCallback(Math.floor(this.getDuration()));\r\n    }\r\n\r\n    playlistItem(index) {\r\n        this.player.playlistItem(index);\r\n    }\r\n\r\n    once(eventName, callback) {\r\n        this.player.once(eventName, callback);\r\n    }\r\n\r\n    off(eventName, callback) {\r\n        this.player.off(eventName, callback);\r\n    }\r\n\r\n    on(eventName, callback) {\r\n        this.player.on(eventName, callback);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.player.getPosition();\r\n    }\r\n\r\n    getPlaylistIndex() {\r\n        return this.player.getPlaylistIndex();\r\n    }\r\n\r\n    getState() {\r\n        return this.player.getState();\r\n    }\r\n\r\n    getDuration() {\r\n        return this.player.getDuration();\r\n    }\r\n\r\n    getMute() {\r\n        return this.player.getMute();\r\n    }\r\n\r\n    getVolume() {\r\n        return this.player.getVolume();\r\n    }\r\n\r\n    setMute(state) {\r\n        this.player.setMute(state);\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.player.setVolume(volume);\r\n    }\r\n}\r\n\r\nexport default JwPlayerTimelineProvider;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass RequestAnimationFrameTimelineProvider {\r\n\r\n    constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.requestID = null;\r\n        this.last = 0;\r\n        this.current = 0;\r\n        this._updateBound = this._update.bind(this);\r\n        this.loop = false;\r\n        this._eventbusListeners = [];\r\n        this.playerid = `provider${Math.random()*1000}`;\r\n        this._addEventListeners();\r\n        this.playlist = [];\r\n        this.currentPlaylistItem = null;\r\n        this.firstFrame = true;\r\n        this.paused = true;\r\n    }\r\n\r\n    _extractPlaylist(configuration) {\r\n        const playlist = configuration.timelines.filter(timeline => timeline.type === \"animation\").map(timeline => {\r\n            return timeline;\r\n        });\r\n        return playlist;\r\n    }\r\n\r\n    playlistItem(index) {\r\n        if (index < 0 || index > this.playlist.length) {\r\n            return;\r\n        }\r\n        this.currentPlaylistItem = this.playlist[index];\r\n        this.firstFrame = true;\r\n        this.reset();\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this._resize.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.requestDurationHandler.bind(this), this.playerid));\r\n    }\r\n\r\n    _update(now) {\r\n        if (!this.paused) {\r\n            return;\r\n        }\r\n        if(!this.last || now - this.last >= 1000) {\r\n            if (!this.last && this.firstFrame) {\r\n                this.firstFrame = false;\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.FIRSTFRAME, this.playerid);\r\n            }\r\n            this.last = now;\r\n            this.current++;\r\n            if (this.current > this.currentPlaylistItem.duration) {\r\n                if (this.loop) {\r\n                    this._reset();\r\n                } else {\r\n                    this.stop();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.playerid);\r\n                    return;\r\n                }\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME, this.playerid, this.current);\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound);\r\n    }\r\n\r\n    _start() {\r\n        if (this.requestID) {\r\n            return;\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound)\r\n    }\r\n\r\n    _reset() {\r\n        this._cancelAnimationFrame();\r\n        this.last = 0;\r\n        this.current = 0;\r\n    }\r\n\r\n    _resize() {\r\n        console.error('Not implemented yet');\r\n    }\r\n\r\n    _container(callBack) {\r\n        callBack(this.container);\r\n    }\r\n\r\n    _cancelAnimationFrame() {\r\n        if (this.requestID) {\r\n            cancelAnimationFrame(this.requestID);\r\n            this.requestID =  null;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.playlist = this._extractPlaylist(this.config);\r\n        this.currentPlaylistItem = this.playlist[0];\r\n        this.container = $(this.currentPlaylistItem.selector);\r\n        if (!this.container.length) {\r\n            throw new Error(`timeline selector '${selector}' not found`);\r\n        }\r\n        const promise = new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n        return promise;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this._eventbusListeners.forEach(func => {\r\n            func();\r\n        });\r\n    }\r\n\r\n    play(){\r\n        this.paused = false;\r\n        this._start();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.playerid);\r\n    }\r\n\r\n    stop(){\r\n        this._cancelAnimationFrame();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.playerid);\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.playerid);\r\n    }\r\n\r\n    seek(position) {\r\n        if (position < 0 || position > this.currentPlaylistItem.duration) {\r\n            return;\r\n        }\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.playerid);\r\n        this.current = position;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.playerid);\r\n    }\r\n\r\n    requestDurationHandler(callBack) {\r\n        callBack(this.currentPlaylistItem.duration);\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        return this.eventbus.on(eventName, handler, this.playerid);\r\n    }\r\n\r\n    once(eventName, handler) {\r\n        return this.eventbus.once(eventName, handler, this.playerid);\r\n    }\r\n}\r\n\r\nexport default RequestAnimationFrameTimelineProvider;\r\n"],"sourceRoot":""}