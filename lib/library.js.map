{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./src/timeline-event-names.js","webpack://library/external \"$\"","webpack://library/./src/operation/helper/internalResolve.js","webpack://library/./src/operation/helper/mergeOperationData.js","webpack://library/./src/operation/helper/getElementData.js","webpack://library/./src/index.js","webpack://library/./src/action/index.js","webpack://library/./src/action/action.js","webpack://library/./src/action/endableaction.js","webpack://library/./src/language-manager.js","webpack://library/./src/operation/helper/getNestedValue.js","webpack://library/./src/operation/helper/extractOperationDataArgumentValues.js","webpack://library/./src/operation/helper/resolvePropertyValues.js","webpack://library/./src/action/timelineaction.js","webpack://library/./src/chrono-trigger-engine.js","webpack://library/./src/engine-factory.js","webpack://library/./src/eventbus/index.js","webpack://library/./src/eventbus/eventbus.js","webpack://library/./src/eventbus/actionregistry-eventbus-listener.js","webpack://library/./src/eventbus/request-video-uri-interceptor.js","webpack://library/./src/configuration/configuration-resolver.js","webpack://library/./src/importer/webpack-resource-importer.js","webpack://library/./src/controllers/index.js","webpack://library/./src/controllers/EventListenerController.js","webpack://library/./src/controllers/LabelController.js","webpack://library/./src/controllers/LottieController.js","webpack://library/external \"lottie\"","webpack://library/./src/controllers/NavigationController.js","webpack://library/./src/controllers/ProgressbarController.js","webpack://library/./src/controllers/RoutingController.js","webpack://library/./src/controllers/SubtitlesController.js","webpack://library/./src/operation/index.js","webpack://library/./src/operation/addClass.js","webpack://library/./src/operation/addControllerToElement.js","webpack://library/./src/operation/helper/attachControllerToElement.js","webpack://library/./src/operation/addOptionList.js","webpack://library/./src/operation/animate.js","webpack://library/./src/operation/animateWithClass.js","webpack://library/./src/operation/broadcastEvent.js","webpack://library/./src/operation/helper/resolveEventArguments.js","webpack://library/./src/operation/helper/removeEventDataFromOperationData.js","webpack://library/./src/operation/clearElement.js","webpack://library/./src/operation/clearOperationData.js","webpack://library/./src/operation/customFunction.js","webpack://library/./src/operation/endAction.js","webpack://library/./src/operation/extendController.js","webpack://library/./src/operation/getControllerFromElement.js","webpack://library/./src/operation/getControllerInstance.js","webpack://library/./src/operation/getElementDimensions.js","webpack://library/./src/operation/helper/modifyDimensions.js","webpack://library/./src/operation/loadJSON.js","webpack://library/./src/operation/removeClass.js","webpack://library/./src/operation/removeControllerFromElement.js","webpack://library/./src/operation/removeElement.js","webpack://library/./src/operation/removePropertiesFromOperationData.js","webpack://library/./src/operation/reparentElement.js","webpack://library/./src/operation/requestAction.js","webpack://library/./src/operation/resizeAction.js","webpack://library/./src/operation/selectElement.js","webpack://library/./src/operation/setElementAttributes.js","webpack://library/./src/operation/setElementContent.js","webpack://library/./src/operation/setOperationData.js","webpack://library/./src/operation/setStyle.js","webpack://library/./src/operation/startAction.js","webpack://library/./src/operation/toggleClass.js","webpack://library/./src/operation/toggleElement.js","webpack://library/./src/operation/wait.js","webpack://library/./src/timelineproviders/index.js","webpack://library/./src/timelineproviders/jwplayer-timeline-provider.js","webpack://library/./src/timelineproviders/request-animation-frame-timeline-provider.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__26__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TimelineEventNames","PLAY_REQUEST","STOP_REQUEST","PAUSE_REQUEST","SEEK_REQUEST","RESIZE_REQUEST","CONTAINER_REQUEST","DURATION_REQUEST","DURATION","TIME","SEEKED","COMPLETE","PLAY","STOP","PAUSE","SEEK","RESIZE","POSITION_UPDATE","TIME_UPDATE","REQUEST_INSTANCE","REQUEST_ACTION","REQUEST_FUNCTION","REQUEST_TIMELINE_URI","BEFORE_REQUEST_TIMELINE_URI","REQUEST_ENGINE_ROOT","REQUEST_CURRENT_TIMELINE_POSITION","REQUEST_TIMELINE_CLEANUP","EXECUTE_TIMELINEACTION","RESIZE_TIMELINEACTION","REQUEST_LABEL_COLLECTION","REQUEST_LABEL_COLLECTIONS","REQUEST_CURRENT_LANGUAGE","LANGUAGE_CHANGE","_mergeOperationData","resolve","operationData","newOperationData","_extends","getElementData","element","data","getElementControllers","actions","_interopRequireWildcard","_chronoTriggerEngine","_interopRequireDefault","_engineFactory","_timelineEventNames","_languageManager","_webpackResourceImporter","_action","_endableaction","_timelineaction","Action","actionData","eventBus","_classCallCheck","this","startOperations","eventbus","initOperationData","_this","Promise","reject","executeOperation","e","console","error","concat","operations","idx","previousOperationData","_this2","length","operationInfo","mergedOperationData","JSON","parse","stringify","result","instance","then","resultOperationData","_this3","executeResizeOperation","_this4","resizeInstance","EndableAction","_possibleConstructorReturn","_getPrototypeOf","endOperations","LanguageManager","language","labels","Error","_labelLookup","_currentLanguage","eventbusListeners","createLabelLookup","addEventbusListeners","push","on","handleRequestLabelCollection","handleRequestLabelCollections","handleRequestCurrentLanguage","handleLanguageChange","resultCallback","labelId","labelIds","map","forEach","label","id","properties","sourceObject","currentInstance","suffix","prop","index","parts","split","_getNestedValue","argumentValue","substr","toLowerCase","startsWith","propNames","shift","_extractOperationDataArgumentValues","copy","extract","extractOperationDataArgumentValues","propertyName","propertyValue","TimelineAction","active","duration","start","end","_get","_jquery","ChronoTriggerEngine","configuration","timelineProvider","_timeLineActionsLookup","_eventbusListeners","createLayoutTemplate","addInitialisationListeners","languageManager","timelines","_currentVideoUri","uri","createTimelineLookup","initializeTimelineProvider","container","containerSelector","layoutTemplate","html","timelineProviderSettings","selector","init","executeActions","initActions","onTimeHandler","Math","floor","onSeekHandler","func","destroy","handleRequestEngineRoot","handleRequestTimelineUri","handleRequestTimelinePosition","handleTimelineComplete","handleExecuteTimelineAction","resizeTimelineAction","timelineInfo","timelineActions","addTimelineAction","timeLineAction","timelineStartPositions","initializeTimelinePosition","initializeUriLookup","startMethod","isNaN","Infinity","isFinite","timelineEndPositions","endMethod","lookup","position","methodName","arguments","undefined","engineRootSelector","previousVideoPosition","stop","cleanUpTimeline","timelineConfig","loop","once","FIRST_FRAME","pause","broadcastForTopic","playerid","getDuration","executeStartActions","seek","offset","playlistItem","executeRelevantActions","getActiveActions","getActionsForPosition","allActions","filter","action","sort","a","b","executionType","getRelevantTimelineActions","currentActions","apply","getPosition","getTimelineActionsForUri","resize","some","event","pos","_lastPosition","executeActionsForPosition","_this5","executeSeekActions","play","executions","exec","_this6","newActions","promise","_eventbus","_configurationResolver","EngineFactory","importer","windowRef","resizeTimeout","actionsLookup","Eventbus","requestInstanceHandler","requestActionHandler","requestFunctionHandler","resizeHandler","clear","clearTimeout","setTimeout","broadcast","systemName","importSystemEntry","importSystemEntryWithEventbusDependency","engine","engineClass","actionRegistryListener","eventActions","ActionRegistryEventbusListener","registerEventlistener","registerInterceptor","RequestVideoUriInterceptor","resolver","ConfigurationResolver","process","_actionregistryEventbusListener","_requestVideoUriInterceptor","eventHandlers","eventListeners","eventInterceptors","eventName","eventTopic","eventHandler","getEventHandlers","off","eventHandlerDecorator","handlers","indexOf","splice","args","callHandlers","eventbusListener","interceptor","getEventInterceptors","intercept","listener","handleEvent","_toConsumableArray","actionRegistry","eventArgs","slice","processConfiguration","resolveOperations","initializeTimelineActions","initializeInitActions","initializeActions","initializeEventActions","config","eventAction","registerAction","initAction","initializeTimelineAction","timelineAction","timelineOperations","_gatherOperations","holder","parentConfig","constructor","Array","ii","keys","_processConfigProperty","configProperty","_getNestedPropertyValue","templateKey","jsonKey","json","_typeof","propertyChain","controllers","providers","main","_defineProperty","_EventListenerController","_LabelController","_LottieController","_NavigationController","_ProgressbarController","_RoutingController","_SubtitlesController","EventListenerController","selectedElement","actionOperationData","actionOperationDatab","actionName","_this$isStartAction2","_slicedToArray","isStartAction","doStart","actionInstance","tagName","toUpperCase","selectEventHandler","target","targetValue","executeAction","act","$","extend","options","opt","selected","LabelController","listeners","currentLanguage","labelData","labelCollection","createTextDataLookup","setLabel","code","_lottieWeb","LottieController","anim","serializedData","serializedIEData","animationData","freezePosition","endPosition","renderer","autoplay","viewBox","url","parseFilename","iefallback","setting","values","resultHolder","labelCollections","createAnimation","onComplete","playSegments","serialized","isIE","join","animData","lottie","loadAnimation","timeCompleted","find","attr","infos","document","NavigationController","playerId","navigation","navLookup","navVidIdLookup","ctrlLookup","activeNavigationPoint","labelControllers","eventhandlers","buildNavigationData","handleNavigateVideoUrl","highlightMenu","handleRequestCurrentNavigation","handleVideoComplete","buildHtml","initHistory","navId","getQueryVariable","videoIndex","videoUrlIndex","variableIdx","href","location","hashIndex","query","substring","navigationData","title","handler","ctrl","detach","onpopstate","state","parentElm","ul","addNavElement","append","visible","li","addLabel","addClickHandler","children","mouseup","menuMouseupHandler","navdata","requestedVideoPosition","pushCurrentState","navElm","removeClass","addClass","log","navData","autoNext","next","attach","nav","previous","nextId","roots","ProgressbarController","textElement","detachers","positionUpdateHandler","clickHandler","detacher","perc","css","text","RoutingController","handleBeforeRequestVideoUrl","handlePushHistoryState","handlePopstate","history","pushState","navigationId","isHistoryRequest","item","currentPosition","currentState","replaceState","SubtitlesController","actionLookup","lastFunc","detachTime","detachLangChange","languageChangeHandler","internalDetach","detachMethods","f","newLanguage","titleLanguageLookup","controllerData","subtitleData","titles","subtitleTimeLookup","j","jj","subs","lang","setTitle","removeTitle","createActionLookup","_addClass","_addControllerToElement","_addOptionList","_animate","_animateWithClass","_broadcastEvent","_clearElement","_clearOperationData","_customFunction","_endAction","_extendController","_getControllerFromElement","_getControllerInstance","_getElementDimensions","_loadJSON","_removeClass","_removeControllerFromElement","_removeElement","_removePropertiesFromOperationData","_reparentElement","_requestAction","_resizeAction","_selectElement","_setElementAttributes","_setElementContent","_setOperationData","_setStyle","_startAction","_toggleClass","_toggleElement","_wait","className","_attachControllerToElement","_internalResolve","controllerInstance","_getElementData","controller","valueProperty","labelProperty","defaultIndex","defaultValue","optionData","createOption","optionElements","animationEasing","animationProperties","animationDuration","animate","one","_resolveEventArguments","_removeEventDataFromOperationData","eventArguments","empty","mergedData","controllerExtension","controllerName","warn","_modifyDimensions","dimensions","modifier","width","innerWidth","height","innerHeight","ratioModifier","_modifier$split2","prefix","_getModifierSuffix2","endIdx","isPercent","getModifierSuffix","parseInt","widthModifier","heightModifier","ratios","modifyDimensionsByRatio","jsonCache","cache","fetch","response","body","removeElement","remove","propertyNames","newParentSelector","appendTo","_operationData","findElementBySelector","useExistingAsRoot","attributes","attrName","template","_resolvePropertyValues","toggleClass","toggle","milliseconds","_jwplayerTimelineProvider","_requestAnimationFrameTimelineProvider","JwPlayerTimelineProvider","playerSettings","player","currentLoopHandler","_addEventListeners","timeline","type","urls","_extractUrls","jwp","jwplayer","w","h","setup","file","image","poster","controls","autostart","displaytitle","displaydescription","nextUpDisplay","abouttext","aboutlink","stretching","repeat","playlist","_handlePlayerReady","load","_loopHandler","_seekedHandler","_handlePlayerComplete","getPlaylistIndex","_container","getProvider","callback","getState","getMute","getVolume","setMute","volume","setVolume","RequestAnimationFrameTimelineProvider","requestID","last","current","_updateBound","_update","random","currentPlaylistItem","firstFrame","paused","reset","_resize","requestDurationHandler","now","FIRSTFRAME","_reset","requestAnimationFrame","_cancelAnimationFrame","callBack","cancelAnimationFrame","_extractPlaylist","_start"],"mappings":"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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"$\"), require(\"lottie\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [\"$\", \"lottie\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory(require(\"$\"), require(\"lottie\"));\n\telse\n\t\troot[\"library\"] = factory(root[\"$\"], root[\"lottie\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__26__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","class TimelineEventNames {\r\n    // timeline requests\r\n    static PLAY_REQUEST = 'timeline-play-request';\r\n    static STOP_REQUEST = 'timeline-stop-request';\r\n    static PAUSE_REQUEST = 'timeline-pause-request';\r\n    static SEEK_REQUEST = 'timeline-seek-request';\r\n    static RESIZE_REQUEST = 'timeline-resize-request';\r\n    static CONTAINER_REQUEST = 'timeline-container-request';\r\n    static DURATION_REQUEST = 'timeline-duration-request';\r\n\r\n    // timeline announcements\r\n    static DURATION = 'timeline-duration';\r\n    static TIME = 'timeline-time';\r\n    static SEEKED = 'timeline-seeked';\r\n    static COMPLETE = 'timeline-complete';\r\n    static PLAY = 'timeline-play';\r\n    static STOP = 'timeline-stop';\r\n    static PAUSE = 'timeline-pause';\r\n    static SEEK = 'timeline-seek';\r\n    static RESIZE = 'timeline-resize';\r\n    static POSITION_UPDATE = 'timeline-position-update';\r\n    static TIME_UPDATE = 'timeline-time-update';\r\n\r\n    // factory and engine events\r\n    static REQUEST_INSTANCE = 'request-instance';\r\n    static REQUEST_ACTION = 'request-action';\r\n    static REQUEST_FUNCTION = 'request-function';\r\n    static REQUEST_TIMELINE_URI = 'request-timeline-uri';\r\n    static BEFORE_REQUEST_TIMELINE_URI = 'before-request-timeline-uri';\r\n    static REQUEST_ENGINE_ROOT = 'request-engine-root';\r\n    static REQUEST_CURRENT_TIMELINE_POSITION = 'request-current-timeline-position';\r\n    static REQUEST_TIMELINE_CLEANUP = 'request-timeline-cleanup';\r\n    static EXECUTE_TIMELINEACTION = 'execute-timelineaction';\r\n    static RESIZE_TIMELINEACTION = 'resize-timelineaction';\r\n\r\n    //language manager events\r\n    static REQUEST_LABEL_COLLECTION = 'request-label-collection';\r\n    static REQUEST_LABEL_COLLECTIONS = 'request-label-collections';\r\n    static REQUEST_CURRENT_LANGUAGE = 'request-current-language';\r\n    static LANGUAGE_CHANGE = 'language-change';\r\n}\r\n\r\nexport default TimelineEventNames;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import mergeOperationData from './mergeOperationData';\r\n\r\nfunction internalResolve(resolve, operationData, newOperationData) {\r\n    if (newOperationData) {\r\n        resolve(mergeOperationData(operationData, newOperationData));\r\n    } else {\r\n        resolve(operationData);\r\n    }\r\n}\r\n\r\nexport default internalResolve;\r\n","function mergeOperationData(operationData, newOperationData) {\r\n    return Object.assign(operationData, newOperationData);\r\n}\r\n\r\nexport default mergeOperationData;\r\n","function getElementData(name, element) {\r\n    return element.data(name);\r\n}\r\n\r\nconst getElementControllers = getElementData.bind(null, \"chronoEngineControllers\");\r\n\r\nexport {\r\n    getElementData,\r\n    getElementControllers\r\n}","import * as actions from './action';\r\nexport { default as ChronoTriggerEngine } from './chrono-trigger-engine';\r\nexport { default as EngineFactory } from './engine-factory';\r\nexport { default as TimelineEventNames } from './timeline-event-names';\r\nexport { default as LanguageManager } from './language-manager';\r\nexport { default as WebpackResourceImporter } from './importer/webpack-resource-importer';\r\nexport default actions;","export { default as Action } from './action';\r\nexport { default as EndableAction } from './endableaction';\r\nexport { default as TimelineAction } from './timelineaction';","import $ from 'jquery';\r\n\r\nclass Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tthis.name = actionData.name;\r\n\t\tthis.startOperations = actionData.startOperations;\r\n\t\tthis.eventbus = eventBus; \r\n\t}\r\n\r\n\tstart(initOperationData) {\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeOperation(this.startOperations, 0, resolve, reject, initOperationData);\r\n\t\t}).catch((e) => {\r\n\t\t\tconsole.error(`Error in action start '${this.name}'`);\r\n\t\t\tthrow e;\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tconst copy = (operationInfo.operationData) ? JSON.parse(JSON.stringify(operationInfo.operationData)) : {};\r\n\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\t\t\t\r\n\t\t\tconst result = operationInfo.instance(mergedOperationData, this.eventbus);\r\n\t\t\t\r\n            if (result.then) {\r\n\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\tthis.executeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n            } else {\r\n                this.executeOperation(operations, ++idx, resolve, reject, result);\r\n            }\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tconst idx = 0;\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeResizeOperation(this.startOperations, idx, resolve, reject, operationData);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteResizeOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\t\t\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tif ((operationInfo.resizeInstance)) {\r\n\t\t\t\tconst copy = ((operationInfo.operationData)) ? JSON.parse(JSON.stringify(operationInfo.operationData)) : {};\r\n\t\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\r\n\t\t\t\tconst result = operationInfo.resizeInstance(mergedOperationData);\r\n\t\t\t\tif (result.then){\r\n\t\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, result);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, previousOperationData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Action;\r\n","import Action from './action';\r\n\r\nclass EndableAction extends Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.endOperations = actionData.endOperations;\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tif ((this.endOperations) && (this.endOperations.length)) {\r\n\t\t\tconst idx = 0;\r\n\t\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\t\tthis.executeOperation(this.endOperations, idx, resolve, reject, initOperationData);\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tconsole.error(`Error in action end'${this.name}'`);\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve(initOperationData);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default EndableAction;\r\n","import TimelineEventNames from \"./timeline-event-names\";\r\n\r\nclass LanguageManager {\r\n\r\n    constructor(language, labels, eventbus) {\r\n        if (!language || !language.length) {\r\n            throw new Error('language ctor arg cannot be null or have zero length');\r\n        }\r\n        if (!labels) {\r\n            throw new Error('labels ctor arg cannot be null');\r\n        }\r\n        if (!eventbus) {\r\n            throw new Error('eventbus ctor arg cannot be null');\r\n        }\r\n        this._labelLookup = {};\r\n        this._currentLanguage = language;\r\n        this.eventbusListeners = [];\r\n        this.createLabelLookup(labels);\r\n        this.addEventbusListeners(eventbus);\r\n    }\r\n\r\n    addEventbusListeners(eventbus) {\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTION, this.handleRequestLabelCollection.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTIONS, this.handleRequestLabelCollections.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, this.handleRequestCurrentLanguage.bind(this)));\r\n        this.eventbusListeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n    }\r\n\r\n    handleRequestCurrentLanguage(resultCallback) {\r\n        resultCallback(this._currentLanguage);\r\n    }\r\n\r\n    handleRequestLabelCollection(labelId, resultCallback) {\r\n        resultCallback(this._labelLookup[labelId]);\r\n    }\r\n\r\n    handleRequestLabelCollections(labelIds, resultCallback) {\r\n        const labelCollections = labelIds.map((labelId) => {\r\n            return this._labelLookup[labelId];\r\n        });\r\n        resultCallback(labelCollections);\r\n    }\r\n\r\n    handleLanguageChange(language) {\r\n        if (language && language.length) {\r\n            this._currentLanguage = language;\r\n        } else {\r\n            console.error('Language cannot be changed to null or empty string');\r\n        }\r\n    }\r\n\r\n    createLabelLookup(labels) {\r\n        labels.forEach((label) => {\r\n            this._labelLookup[label.id] = label.labels;\r\n        });\r\n    }\r\n}\r\n\r\nexport default LanguageManager;\r\n","function getNestedValue(properties, sourceObject) {\r\n    if (!properties) {\r\n        throw Error('properties arg cannot be null');\r\n    }\r\n    if (!sourceObject) {\r\n        throw Error('sourceObject arg cannot be null');\r\n    }\r\n    let currentInstance = sourceObject;\r\n    let suffix = null;\r\n    properties.forEach((prop, index) => {\r\n        if (index === properties.length-1) {\r\n            const parts = prop.split('+');\r\n            if (parts.length > 1) {\r\n                prop = parts[0];\r\n                suffix = parts[1];\r\n            }\r\n        }\r\n        currentInstance = currentInstance[prop];\r\n    });\r\n\r\n    return (suffix) ? currentInstance + suffix : currentInstance;\r\n}\r\n\r\nexport default getNestedValue;\r\n","import getNestedValue from './getNestedValue';\r\n\r\nfunction extractOperationDataArgumentValues(sourceObject, argumentValue) {\r\n    if ((argumentValue) && (argumentValue.substr) && (argumentValue.toLowerCase().startsWith('operationdata.'))) {\r\n        let propNames = argumentValue.split('.');\r\n        propNames.shift();\r\n        return getNestedValue(propNames, sourceObject);\r\n    }\r\n    return argumentValue;\r\n}\r\n\r\nexport default extractOperationDataArgumentValues;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolvePropertyValues(operationData, properties) {\r\n    const copy = Object.assign({}, properties);\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    for(let propertyName in properties) {\r\n        const propertyValue = properties[propertyName];\r\n        copy[propertyName] = extract(propertyValue);\r\n    }\r\n    return copy;\r\n}\r\n\r\nexport default resolvePropertyValues\r\n","import EndableAction from './endableaction';\r\n\r\nclass TimelineAction extends EndableAction {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.active = false;\r\n\t\tthis.duration = actionData.duration;\r\n\t\tthis.duration.start = +this.duration.start;\r\n\t\tthis.duration.end = +this.duration.end;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tif ((!this.active) || (this.duration.end < 0)) {\r\n\t\t\tthis.active = (this.duration.end > -1);\r\n\t\t\treturn super.start();\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tthis.active = false;\r\n\t\treturn super.end(initOperationData);\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tif ((this.active) || (this.duration.end < 0)) {\r\n\t\t\treturn super.resize(operationData);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default TimelineAction;\r\n","import LanguageManager from './language-manager';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\n\r\nclass ChronoTriggerEngine {\r\n\r\n    constructor(configuration, eventbus, timelineProvider) {\r\n        this.configuration = configuration;\r\n        this.eventbus = eventbus;\r\n        this.timelineProvider = timelineProvider;\r\n        this._timeLineActionsLookup = {};\r\n        this._eventbusListeners = [];\r\n    }\r\n\r\n    init() {\r\n        this.createLayoutTemplate();\r\n\r\n        this.addInitialisationListeners();\r\n\r\n        this.languageManager = new LanguageManager(this.configuration.language, this.configuration.labels, this.eventbus);\r\n\r\n        const { timelines } = this.configuration;\r\n        this._currentVideoUri = (timelines && timelines.length) ? timelines[0].uri : null;\r\n\r\n        this.createTimelineLookup();\r\n\r\n        return this.initializeTimelineProvider();\r\n    }\r\n\r\n    createLayoutTemplate() {\r\n        const container = $(this.configuration.containerSelector);\r\n        if (!container || !container.length) {\r\n            throw new Error(`Container selector not found: ${this.configuration.containerSelector}`);\r\n        }\r\n        const { layoutTemplate } = this.configuration; \r\n        if (layoutTemplate && layoutTemplate.length) {\r\n            container.html(layoutTemplate);\r\n        }\r\n    }\r\n\r\n    initializeTimelineProvider() {\r\n        if (!this.configuration.timelineProviderSettings) {\r\n            return;\r\n        }\r\n\r\n        const playerContainer = $(`#${this.configuration.timelineProviderSettings.selector}`);\r\n\r\n        if (playerContainer.length) {\r\n            return new Promise((resolve) => {\r\n                this.timelineProvider.init().then(() => {\r\n                    this.executeActions((this.configuration.initActions), \"start\").then(() => {\r\n                        this.timelineProvider.on(TimelineEventNames.TIME, this.onTimeHandler.bind(this, Math.floor));\r\n                        this.timelineProvider.on(TimelineEventNames.SEEK, this.onSeekHandler.bind(this, Math.floor));\r\n                        resolve(this.timelineProvider);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        return new Promise((resolve)=> {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this.configuration = null;\r\n        this.eventbus = null;\r\n        this.timelineProvider = null;\r\n        this._timeLineActionsLookup = null;\r\n        this._eventbusListeners.forEach(func => func());\r\n        if (this.timelineProvider) {\r\n            this.timelineProvider.destroy();\r\n        }\r\n    }\r\n\r\n    addInitialisationListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_ENGINE_ROOT, this.handleRequestEngineRoot.bind(this, this.configuration.containerSelector)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_TIMELINE_URI, this.handleRequestTimelineUri.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_CURRENT_TIMELINE_POSITION, this.handleRequestTimelinePosition.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.REQUEST_TIMELINE_CLEANUP, this.handleTimelineComplete.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.EXECUTE_TIMELINEACTION, this.handleExecuteTimelineAction.bind(this)));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_TIMELINEACTION, this.resizeTimelineAction.bind(this)));\r\n    }\r\n\r\n    createTimelineLookup() {\r\n        if (!this.configuration.timelines) {\r\n            return;\r\n        }\r\n        this.configuration.timelines.forEach((timelineInfo) => {\r\n            timelineInfo.timelineActions.forEach(this.addTimelineAction.bind(this, timelineInfo.uri));\r\n        });\r\n    }\r\n\r\n    addTimelineAction(uri, timeLineAction) {\r\n        const start = timeLineAction.duration.start;\r\n        const timelineStartPositions = this.initializeTimelinePosition(this.initializeUriLookup(this._timeLineActionsLookup, uri), start);\r\n        const startMethod = timeLineAction.start.bind(timeLineAction);\r\n        timelineStartPositions.push(startMethod);\r\n\r\n        let end = timeLineAction.duration.end;\r\n        if ((!end) || (isNaN(end))) {\r\n            end = timeLineAction.duration.end = Infinity;\r\n        }\r\n        if (isFinite(end)) {\r\n            const timelineEndPositions = this.initializeTimelinePosition(this._timeLineActionsLookup[uri], end);\r\n            const endMethod = timeLineAction.end.bind(timeLineAction);\r\n            timelineEndPositions.push(endMethod);\r\n        }\r\n    }\r\n\r\n    initializeUriLookup(lookup, uri) {\r\n        if (!lookup[uri]) {\r\n            lookup[uri] = {};\r\n        }\r\n        return lookup[uri];\r\n    }\r\n\r\n    initializeTimelinePosition(lookup, position) {\r\n        if (!lookup[position]) {\r\n            lookup[position] = [];\r\n        }\r\n        return lookup[position];\r\n    }\r\n\r\n    executeActions(actions, methodName, idx=0) {\r\n        if (idx < actions.length) {\r\n            const action = actions[idx];\r\n\r\n            const promise = action[methodName]();\r\n            return promise.then(() => {\r\n                return this.executeActions(actions, methodName, ++idx);\r\n            });\r\n        }\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    handleRequestEngineRoot(engineRootSelector, resultCallback) {\r\n        resultCallback($(engineRootSelector));\r\n    }\r\n\r\n    handleRequestTimelineUri(index, position, previousVideoPosition) {\r\n        position = position || 0;\r\n        previousVideoPosition = previousVideoPosition || 0;\r\n        this.timelineProvider.stop();\r\n        this.cleanUpTimeline().then(() => {\r\n            const timelineConfig = this.configuration.timelines[index];\r\n            this._currentVideoUri = timelineConfig.uri;\r\n            this.timelineProvider.loop = timelineConfig.loop;\r\n            if ((!this.timelineProvider.loop) && (position > 0)) {\r\n                this.timelineProvider.once(TimelineEventNames.FIRST_FRAME, () => {\r\n                    this.timelineProvider.pause();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.timelineProvider.playerid, [this.getDuration()]);\r\n                    this.executeStartActions().then(() => {\r\n                        this.timelineProvider.seek(position);\r\n                        this.onSeekHandler(Math.floor, { offset: position });\r\n                    });\r\n                });\r\n            }\r\n            this.timelineProvider.playlistItem(index);\r\n        });\r\n    }\r\n\r\n    cleanUpTimeline() {\r\n        return this.executeRelevantActions(this.getActiveActions, \"end\");\r\n    }\r\n\r\n    executeStartActions() {\r\n        return this.executeRelevantActions(this.getActionsForPosition.bind(this, 0), \"start\");\r\n    }\r\n\r\n    getActionsForPosition(position, allActions) {\r\n        return allActions.filter((action) => {\r\n            return (!action.active) && ((action.duration.start <= position) && (action.duration.end >= position));\r\n        });\r\n    }\r\n\r\n    getActiveActions(allActions) {\r\n        const actions = allActions.filter((action) => {\r\n            return action.active;\r\n        });\r\n        return actions.sort((a, b) => {\r\n            if (b.duration.start < a.duration.start) {\r\n                return -1;\r\n            } else if (b.duration.start > a.duration.start) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    executeRelevantActions(filter, executionType) {\r\n        const timelineActions = this.getRelevantTimelineActions();\r\n        const currentActions = filter.apply(this, [timelineActions]);\r\n        return this.executeActions(currentActions, executionType, 0);\r\n    }\r\n\r\n    handleRequestTimelinePosition(resultCallback) {\r\n        resultCallback(Math.floor(this.timelineProvider.getPosition()));\r\n    }\r\n\r\n    handleTimelineComplete() {\r\n        this.cleanUpTimeline();\r\n    }\r\n\r\n    handleExecuteTimelineAction(uri, index, start) {\r\n        const actions = this.getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            if (start) {\r\n                action.start();\r\n            } else {\r\n                action.end();\r\n            }\r\n        }\r\n    }\r\n\r\n    resizeTimelineAction(uri, index) {\r\n        const actions = this.getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            action.resize();\r\n        }\r\n    }\r\n\r\n    getRelevantTimelineActions() {\r\n        return this.getTimelineActionsForUri(this._currentVideoUri);\r\n    }\r\n\r\n    getTimelineActionsForUri(uri) {\r\n        let timelineActions;\r\n        this.configuration.timelines.some((timelineInfo) => {\r\n            if (timelineInfo.uri === uri) {\r\n                timelineActions = timelineInfo.timelineActions;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return timelineActions;\r\n    }\r\n\r\n    onTimeHandler(floor, event) {\r\n        if (!isNaN(event.position)) {\r\n            const pos = floor(event.position);\r\n            if (this._lastPosition !== pos) {\r\n                this.executeActionsForPosition(pos);\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.POSITION_UPDATE, this.timelineProvider.playerid, [pos, this.timelineProvider.getDuration()]);\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME_UPDATE, this.timelineProvider.playerid, [event.position, this.timelineProvider.getDuration()]);\r\n        }\r\n    }\r\n\r\n    onSeekHandler(floor, event) {\r\n        const pos = floor(event.offset);\r\n        if (isNaN(pos)) {\r\n            return;\r\n        }\r\n        this.executeSeekActions(pos).then(() => {\r\n            this.timelineProvider.play();\r\n        });\r\n    }\r\n\r\n    executeActionsForPosition(position) {\r\n        this._lastPosition = position;\r\n        const actions = this._timeLineActionsLookup[this._currentVideoUri];\r\n        if (actions) {\r\n            const executions = actions[position];\r\n            if (executions) {\r\n                executions.forEach((exec) => {\r\n                    exec();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    executeSeekActions(pos) {\r\n        const timelineActions = this.getRelevantTimelineActions();\r\n        const currentActions = this.getActiveActions(timelineActions);\r\n        const newActions = this.getActionsForPosition(pos, timelineActions);\r\n\r\n        const promise = this.executeActions(currentActions, \"end\", 0);\r\n\r\n        return new Promise((resolve) => {\r\n            promise.then(() => {\r\n                this.executeActions(newActions, \"start\", 0).then(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ChronoTriggerEngine;\r\n","import { Eventbus, ActionRegistryEventbusListener, RequestVideoUriInterceptor } from './eventbus';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\nimport ConfigurationResolver from './configuration/configuration-resolver';\r\n\r\nclass EngineFactory {\r\n    \r\n    constructor(importer, windowRef, eventbus) {\r\n        this.init(importer, windowRef, eventbus);\r\n    }\r\n\r\n    init(importer, windowRef, eventbus) {\r\n        this.resizeTimeout = -1;\r\n        this.actionsLookup = null;\r\n\r\n        this.importer = importer;\r\n\r\n        this.eventBus = eventbus || new Eventbus();\r\n        this.eventBus.on(TimelineEventNames.REQUEST_INSTANCE, this.requestInstanceHandler.bind(this));\r\n        this.eventBus.on(TimelineEventNames.REQUEST_ACTION, this.requestActionHandler.bind(this));\r\n        this.eventBus.on(TimelineEventNames.REQUEST_FUNCTION, this.requestFunctionHandler.bind(this));\r\n        \r\n        $(windowRef).resize(this.resizeHandler.bind(this));\r\n    }\r\n\r\n    destroy() {\r\n        this.eventBus.clear();\r\n        this.eventBus = null;\r\n    }\r\n\r\n    resizeHandler() {\r\n        if (this.resizeTimeout > -1) {\r\n            clearTimeout(this.resizeTimeout);\r\n        }\r\n        this.resizeTimeout = setTimeout(() => {\r\n            this.eventBus.broadcast(TimelineEventNames.RESIZE);\r\n        }, 200);\r\n    }\r\n\r\n    importSystemEntryWithEventbusDependency(systemName) {\r\n        const ctor = this.importSystemEntry(systemName);\r\n        return new ctor(this.eventBus);\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    requestInstanceHandler(systemName, resultCallback) {\r\n        resultCallback(this.importSystemEntryWithEventbusDependency(systemName));\r\n    }\r\n\r\n    requestFunctionHandler(systemName, resultCallback) {\r\n        resultCallback(this.importSystemEntry(systemName));\r\n    }\r\n\r\n    requestActionHandler(systemName, resultCallback) {\r\n        const action = this.actionsLookup[systemName];\r\n        if (action) {\r\n            resultCallback(action);\r\n        } else {\r\n            console.error(`Unknown action: ${systemName}`);\r\n            resultCallback(null);\r\n        }\r\n    }\r\n\r\n    createEngine(configuration) {\r\n        const { systemName } = configuration.engine;\r\n        const engineClass = this.importSystemEntry(systemName);\r\n\r\n        let actionRegistryListener = null;\r\n        if ((configuration.eventActions) && (configuration.eventActions.length)) {\r\n            actionRegistryListener = new ActionRegistryEventbusListener();\r\n            this.eventBus.registerEventlistener(actionRegistryListener);\r\n        }\r\n\r\n        this.eventBus.registerInterceptor(TimelineEventNames.REQUEST_TIMELINE_URI, new RequestVideoUriInterceptor(this.eventBus));\r\n\r\n        const resolver = new ConfigurationResolver(this.importer, this.eventBus);\r\n        this.actionsLookup = resolver.process(actionRegistryListener, configuration)\r\n\r\n        const timelineProviderClass = this.importSystemEntry(configuration.timelineProviderSettings.systemName);\r\n        const timelineProvider = new timelineProviderClass(this.eventBus, configuration);\r\n\r\n        const chronoTriggerEngine = new engineClass(configuration, this.eventBus, timelineProvider);\r\n        return chronoTriggerEngine;\r\n    }\r\n\r\n}\r\n\r\nexport default EngineFactory;\r\n","export { default as Eventbus } from './eventbus';\r\nexport { default as ActionRegistryEventbusListener } from './actionregistry-eventbus-listener';\r\nexport { default as RequestVideoUriInterceptor } from './request-video-uri-interceptor';","class Eventbus {\r\n\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.eventHandlers = {};\r\n\t\tthis.eventListeners = [];\r\n\t\tthis.eventInterceptors = {};\r\n\t}\r\n\r\n\tgetEventInterceptors(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventInterceptors[eventName]) {\r\n\t\t\tthis.eventInterceptors[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventInterceptors[eventName];\r\n\t}\r\n\r\n\tgetEventHandlers(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventHandlers[eventName]) {\r\n\t\t\tthis.eventHandlers[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventHandlers[eventName];\r\n\t}\r\n\r\n\ton(eventName, eventHandler, eventTopic) {\r\n\t\tthis.getEventHandlers(eventName, eventTopic).push(eventHandler);\r\n\t\treturn () => {\r\n\t\t\tthis.off(eventName, eventHandler, eventTopic);\r\n\t\t}\r\n\t}\r\n\r\n\tonce(eventName, eventHandler, eventTopic) {\r\n\t\tconst _this = this;\r\n\t\tconst eventHandlerDecorator = function() {\r\n\t\t\teventHandler(...arguments)\r\n\t\t\t_this.off(eventName, eventHandlerDecorator, eventTopic);\r\n\t\t};\r\n\t\tthis.on(eventName, eventHandlerDecorator, eventTopic);\r\n\t}\r\n\r\n\toff(eventName, eventHandler, eventTopic) {\r\n\t\tconst handlers = this.getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tconst idx = handlers.indexOf(eventHandler);\r\n\t\t\tif (idx > -1) {\r\n\t\t\t\thandlers.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbroadcast(eventName, args) {\r\n\t\tthis.callHandlers(eventName, null, args);\r\n\t}\r\n\r\n\tbroadcastForTopic(eventName, eventTopic, args) {\r\n\t\tthis.callHandlers(eventName, eventTopic, args);\r\n\t}\r\n\r\n\tregisterEventlistener(eventbusListener) {\r\n\t\tthis.eventListeners.push(eventbusListener);\r\n\t}\r\n\r\n\tregisterInterceptor(eventName, interceptor, eventTopic) {\r\n\t\tconst interceptors = this.getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.push(interceptor);\r\n\t}\r\n\r\n\tcallHandlers(eventName, eventTopic, args=[]) {\r\n\t\tconst interceptors = this.getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.forEach((interceptor) => {\r\n\t\t\targs = interceptor.intercept(args);\r\n\t\t});\r\n\t\tthis.eventListeners.forEach((listener) => {\r\n\t\t\tlistener.handleEvent(eventName, eventTopic, args);\r\n\t\t});\r\n\t\tconst handlers = this.getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tfor (let i = 0, l = handlers.length; i < l; i++) {\r\n\t\t\t\thandlers[i](...args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Eventbus;\r\n","class ActionRegistryEventbusListener {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionRegistry = {};\r\n\t}\r\n\r\n\tregisterAction(action, eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.actionRegistry[eventName]) {\r\n\t\t\tthis.actionRegistry[eventName] = [];\r\n\t\t}\r\n\t\tthis.actionRegistry[eventName].push(action);\r\n\t}\r\n\r\n\thandleEvent(eventName, eventTopic, args) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tconst actions = this.actionRegistry[eventName];\r\n\t\tif (actions) {\r\n\t\t\tconst operationData = {\r\n\t\t\t\teventArgs: args\r\n\t\t\t};\r\n\t\t\tactions.forEach((action) => {\r\n\t\t\t\taction.start(operationData);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ActionRegistryEventbusListener;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass RequestVideoUriInterceptor {\r\n\r\n\tconstructor(eventbus) {\r\n\t\tthis.eventbus = eventbus;\r\n\t}\r\n\r\n\tintercept(args) {\r\n\t\tthis.eventbus.broadcast(TimelineEventNames.BEFORE_REQUEST_TIMELINE_URI, args.slice());\r\n\t\treturn args;\r\n\t}\r\n\r\n}\r\n\r\nexport default RequestVideoUriInterceptor;\r\n","import { TimelineAction, EndableAction, Action } from '../action';\r\nimport getNestedValue from '../operation/helper/getNestedValue';\r\n\r\nclass ConfigurationResolver {\r\n\r\n    constructor(importer, eventbus) {\r\n        this.importer = importer;\r\n        this.eventbus = eventbus;\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    process(actionRegistryListener, configuration) {\r\n        const actionsLookup = {};\r\n        this.processConfiguration(configuration, configuration);\r\n        this.resolveOperations(configuration);\r\n        this.initializeTimelineActions(configuration);\r\n        this.initializeInitActions(configuration, actionsLookup);\r\n        this.initializeActions(configuration, actionsLookup);\r\n        this.initializeEventActions(actionRegistryListener, configuration);\r\n        return actionsLookup;\r\n    }\r\n\r\n    initializeEventActions(actionRegistryListener, config) {\r\n        if ((actionRegistryListener) && (config.eventActions)) {\r\n            config.eventActions.forEach((actionData) => {\r\n                const eventAction = new Action(actionData, this.eventbus);\r\n                actionRegistryListener.registerAction(eventAction, actionData.eventName, actionData.eventTopic);\r\n            });\r\n            delete config.eventActions;\r\n        }\r\n    }\r\n\r\n    initializeActions(config, actionsLookup) {\r\n        if (config.actions) {\r\n            config.actions.forEach((actionData) => {\r\n                const action = new EndableAction(actionData, this.eventbus);\r\n                actionsLookup[actionData.name] = action;\r\n            });\r\n            delete config.actions;\r\n        }\r\n    }\r\n\r\n    initializeInitActions(config, actionsLookup) {\r\n        if (!config.initActions) {\r\n            return;\r\n        }\r\n        config.initActions = config.initActions.map((actionData) => {\r\n            const initAction = new EndableAction(actionData, this.eventbus);\r\n            actionsLookup[actionData.name] = initAction;\r\n            return initAction;\r\n        });\r\n    }\r\n\r\n    initializeTimelineActions(config) {\r\n        if (config.timelines) {\r\n            config.timelines.forEach(this.initializeTimelineAction.bind(this));\r\n        }\r\n    }\r\n\r\n    initializeTimelineAction(timelineConfig) {\r\n        if (!timelineConfig.timelineActions) {\r\n            return;\r\n        }\r\n        timelineConfig.timelineActions = timelineConfig.timelineActions.map((actionData) => {\r\n            const timelineAction = new TimelineAction(actionData, this.eventbus);\r\n            if (!timelineAction.endOperations) {\r\n                timelineAction.endOperations = [];\r\n            }\r\n            return timelineAction;\r\n        });\r\n    }\r\n\r\n    resolveOperations(config) {\r\n        const timelineOperations = [];\r\n        if (config.timelines) {\r\n            config.timelines.forEach((timelineInfo) => {\r\n                timelineOperations.push(...this._gatherOperations(timelineInfo.timelineActions));\r\n            });\r\n        }\r\n\r\n        const systemNameHolders = this._gatherOperations(config.initActions)\r\n                                    .concat(timelineOperations)\r\n                                    .concat(this._gatherOperations(config.actions))\r\n                                    .concat(this._gatherOperations(config.eventActions));\r\n\r\n        systemNameHolders.forEach((holder)=> {\r\n            holder.instance = this.importSystemEntry(holder.systemName);\r\n        });\r\n    }\r\n\r\n    processConfiguration(config, parentConfig) {\r\n        if (config == null) {\r\n            return;\r\n        }\r\n        if (config.constructor === Array) {\r\n            for (let i = 0, ii = config.length; i < ii; i++) {\r\n                this.processConfiguration(config[i], parentConfig);\r\n            }\r\n        } else {\r\n            Object.keys(config).forEach((key) => {\r\n                this._processConfigProperty(key, config, parentConfig);\r\n            });\r\n        }\r\n    }\r\n\r\n    _processConfigProperty(key, config, parentConfig) {\r\n        const value = config[key];\r\n        if (typeof value === 'string') {           \r\n            if ((value.startsWith('config:'))) {\r\n                const configProperty = value.substr(7, value.length);\r\n                config[key] = this._getNestedPropertyValue(configProperty, parentConfig);\r\n            }\r\n            else if ((value.startsWith('template:'))) {\r\n                const templateKey = value.substr(9, value.length);\r\n                config[key] = this.importSystemEntry(templateKey);\r\n            }\r\n            else if ((value.startsWith('json:'))) {\r\n                const jsonKey = value.substr(5, value.length);\r\n                const json = this.importSystemEntry(jsonKey);\r\n                config[key] = json;\r\n            }\r\n        } else if (typeof value === 'object') {\r\n            this.processConfiguration(config[key], parentConfig);\r\n        }\r\n    }\r\n\r\n    _getNestedPropertyValue(propertyChain, sourceObject) {\r\n        const properties = propertyChain.split('.');\r\n        return getNestedValue(properties, sourceObject);\r\n    }\r\n\r\n    _gatherOperations(actions) {\r\n        let result = [];\r\n        if (!actions) {\r\n            return result;\r\n        }\r\n        actions.forEach((action) => {\r\n            if (action.endOperations) {\r\n                result = result.concat(action.startOperations.concat(action.endOperations));\r\n            } else {\r\n                result = result.concat(action.startOperations);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nexport default ConfigurationResolver;\r\n","import * as controllers from '../controllers';\r\nimport * as operations from '../operation';\r\nimport * as providers from '../timelineproviders';\r\nimport * as main from '../';\r\n\r\nclass WebpackResourceImporter {\r\n\r\n    import(name) {\r\n        if (operations[name]) {\r\n            return {\r\n                [name]: operations[name]\r\n            };\r\n        } else if (controllers[name]) {\r\n            return {\r\n                [name]: controllers[name]\r\n            };\r\n        } else if (providers[name]) {\r\n            return {\r\n                [name]: providers[name]\r\n            };\r\n        } else if (main[name]) {\r\n            return {\r\n                [name]: main[name]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default WebpackResourceImporter;\r\n","export { default as EventListenerController } from './EventListenerController';\r\nexport { default as LabelController } from './LabelController';\r\nexport { default as LottieController } from './LottieController';\r\nexport { default as NavigationController } from './NavigationController';\r\nexport { default as ProgressbarController } from './ProgressbarController';\r\nexport { default as RoutingController } from './RoutingController';\r\nexport { default as SubtitlesController } from './SubtitlesController';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass EventListenerController {\r\n\r\n\tconstructor() {\r\n\t\tthis.operationData = null;\r\n\t\tthis.actions = null;\r\n\t\tthis.name = \"EventListenerController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\teventName: operationData.eventName,\r\n\t\t\tactions: operationData.actions.slice(),\r\n\t\t\tactionOperationData: operationData.actionOperationDatab ? JSON.parse(JSON.stringify(operationData.actionOperationData)) : undefined\r\n\t\t}\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tif (!this.actions) {\r\n            this.actions = [];\r\n\t\t\tthis.operationData.actions.forEach((actionName) => {\r\n\t\t\t\tconst [doStart, name] = this.isStartAction(actionName);\r\n                const resultCallback = (actionInstance)=> {\r\n                    this.actions.push({ start:doStart, action: actionInstance});\r\n\t\t\t\t};\r\n\t\t\t\t\r\n                eventbus.broadcast(TimelineEventNames.REQUEST_ACTION, [name, resultCallback]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.operationData.selectedElement[0].tagName.toUpperCase() === \"SELECT\") {\r\n\t\t\tthis.operationData.selectedElement.on(this.operationData.eventName, this.selectEventHandler.bind(this));\r\n\t\t} else {\r\n\t\t\tthis.operationData.selectedElement.on(this.operationData.eventName, this.eventHandler.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tisStartAction(actionName) {\r\n\t\tconst prefix = actionName.substr(0, \"end:\".length);\r\n\t\tif (prefix === \"end:\") {\r\n\t\t\treturn [false, actionName.substr(\"end:\".length)];\r\n\t\t} else {\r\n\t\t\treturn [true, actionName];\r\n\t\t}\r\n\t}\r\n\r\n\teventHandler(event) {\r\n\t\tconst copy = (this.operationData.actionOperationData) ? JSON.parse(JSON.stringify(this.operationData.actionOperationData)) : {};\r\n\t\tif (event.target) {\r\n\t\t\tcopy.targetValue = event.target.value;\r\n\t\t}\r\n\t\tthis.executeAction(this.actions, copy, 0);\r\n\t}\r\n\r\n\texecuteAction(actions, operationData, idx) {\r\n\t\tif (idx < actions.length) {\r\n\t\t\tconst act = actions[idx];\r\n\t\t\tconst action = act.action;\r\n\t\t\tif (act.start) {\r\n\t\t\t\t//console.debug(\"Start action: \" + action.name);\r\n\t\t\t\taction.start(operationData)\r\n\t\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\t\treturn this.executeAction(actions, $.extend(operationData, resultOperationData), ++idx);\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t//console.debug(\"End action: \" + action.name);\r\n\t\t\t\taction.end()\r\n\t\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\t\treturn this.executeAction(actions, $.extend(operationData, resultOperationData), ++idx);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tselectEventHandler(event) {\r\n\t\tconst options = event.target;\r\n\t\tfor (let i = 0, l = options.length; i < l; i++) {\r\n\t\t\tconst opt = options[i];\r\n\t\t\tif (opt.selected) {\r\n\t\t\t\tconst copy = (this.operationData.actionOperationData) ? JSON.parse(JSON.stringify(this.operationData.actionOperationData)) : {};\r\n\t\t\t\tthis.executeAction(this.actions, $.extend({ eventArgs: [opt.value] }, copy), 0);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.operationData.selectedElement.off(this.operationData.eventName);\r\n\t}\r\n\r\n}\r\n\r\nexport default EventListenerController;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass LabelController {\r\n\r\n\tconstructor() {\r\n\t\tthis.listeners = [];\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.name = \"LabelController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = $.extend({},operationData, true);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, [(language)=> {\r\n\t\t\tthis.currentLanguage = language;\r\n\t\t}]);\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_LABEL_COLLECTION, [this.operationData.labelId, (labelCollection)=> {\r\n\t\t\tthis.createTextDataLookup(labelCollection);\r\n\t\t}]);\r\n\t\tthis.setLabel();\r\n\t\tthis.listeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n\t}\r\n\r\n\tsetLabel() {\r\n\t\tthis.operationData.selectedElement.html(this.labelData[this.currentLanguage]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.setLabel();\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((d) => {\r\n\t\t\tthis.labelData[d.code] = d.label;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default LabelController;\r\n","import lottie from 'lottie-web';\r\n\r\nclass LottieController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = \"LottieController\";\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.listeners = [];\r\n\t\tthis.anim = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.serializedData = null;\r\n\t\tthis.serializedIEData = null;\r\n\t\tthis.animationData = null;\r\n\t\tthis.freezePosition = -1;\r\n\t\tthis.endPosition = -1;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\trenderer: operationData.renderer,\r\n\t\t\tloop: operationData.loop,\r\n\t\t\tautoplay: operationData.autoplay,\r\n\t\t\tanimationData: operationData.animationData,\r\n\t\t\tjson: operationData.json,\r\n\t\t\tlabelIds: operationData.labelIds,\r\n\t\t\tviewBox: operationData.viewBox\r\n\t\t};\r\n\t\tif (operationData.url.indexOf(\"[\") > -1) {\r\n\t\t\tthis.parseFilename(operationData.url);\r\n\t\t}\r\n\t\tthis.serializedData = this.operationData.json\r\n\t\t\t? JSON.stringify(this.operationData.json)\r\n\t\t\t: JSON.stringify(this.operationData.animationData);\r\n\t\tif (this.operationData.iefallback) {\r\n\t\t\tthis.serializedIEData = JSON.stringify(this.operationData.iefallback);\r\n\t\t}\r\n\t}\r\n\r\n\tparseFilename(name) {\r\n\t\tconst params = name.substr(name.indexOf(\"[\") + 1, name.indexOf(\"]\") - name.indexOf(\"[\") - 1);\r\n\t\tconst settings = params.split(\",\");\r\n\t\tsettings.forEach((setting) => {\r\n\t\t\tconst values = setting.split(\"=\");\r\n\t\t\tif (values[0] === \"freeze\") {\r\n\t\t\t\tthis.freezePosition = +values[1];\r\n\t\t\t} else if (values[0] === \"end\") {\r\n\t\t\t\tthis.endPosition = +values[1];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tif ((this.operationData.labelIds) && (this.operationData.labelIds.length)) {\r\n\t\t\tconst resultHolder = {};\r\n\t\t\teventbus.broadcast('request-current-language', [resultHolder]);\r\n\t\t\tthis.currentLanguage = resultHolder.language;\r\n\t\t\tthis.listeners.push(eventbus.on('language-change', this.handleLanguageChange.bind(this)));\r\n\t\t\teventbus.broadcast('request-label-collections', [this.operationData.labelIds, resultHolder]);\r\n\t\t\tthis.createTextDataLookup(resultHolder.labelCollections);\r\n\t\t}\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t\tif (this.anim) {\r\n\t\t\tif (this.endPosition > -1) {\r\n\t\t\t\tthis.anim.onComplete = this.destroy.bind(this);\r\n\t\t\t\tthis.anim.playSegments([this.freezePosition, this.endPosition], true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.anim.destroy();\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    \r\n\tdestroy() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t\tthis.anim = null;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateAnimation() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t}\r\n\t\tlet serialized = (this.isIE()) ? this.serializedIEData : this.serializedData;\r\n\r\n\t\tconst labelIds = this.operationData.labelIds;\r\n\t\tif ((labelIds) && (labelIds.length)) {\r\n\t\t\tlabelIds.forEach((id) => {\r\n\t\t\t\tserialized = serialized.split(`!!${id}!!`).join(this.labelData[id][this.currentLanguage]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst animData = JSON.parse(serialized);\r\n\r\n\t\tconst animationData = {\r\n\t\t\tautoplay: this.operationData.autoplay,\r\n\t\t\tcontainer: this.operationData.selectedElement[0],\r\n\t\t\tloop: this.operationData.loop,\r\n\t\t\trenderer: this.operationData.renderer,\r\n\t\t\tanimationData:animData\r\n\t\t}\r\n\r\n\t\tthis.anim = lottie.loadAnimation(animationData);\r\n\t\tif (this.endPosition < 0) {\r\n\t\t\tthis.endPosition = this.anim.timeCompleted;\r\n\t\t}\r\n\r\n\t\tif (this.freezePosition > -1) {\r\n\t\t\tthis.anim.playSegments([0, this.freezePosition], true);\r\n\t\t}\r\n\t\tif (this.operationData.viewBox) {\r\n\t\t\tthis.operationData.selectedElement.find(\"svg\").attr('viewBox', this.operationData.viewBox);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((infos, index) => {\r\n\t\t\tinfos.forEach((d) => {\r\n\t\t\t\tthis.labelData[this.operationData.labelIds[index]][d.code] = d.label;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tisIE() {\r\n\t\tconst isIE = false || !!document['documentMode'];\r\n\r\n\t\t// Edge 20+\r\n\t\tconst isEdge = !isIE && !!window['StyleMedia'];\r\n\r\n\t\treturn isEdge || isIE;\r\n\t}\r\n\r\n}\r\n\r\nexport default LottieController;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","import $ from 'jquery';\r\n\r\nclass NavigationController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = 'NavigationController';\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.ctrlLookup = {};\r\n\t\tthis.activeNavigationPoint = null;\r\n\t\tthis.labelControllers = null;\r\n\t\tthis.eventhandlers = null;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.container = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.labelControllers = [];\r\n\t\tthis.eventhandlers.push(eventbus.on('navigate-to-video-url', this.handleNavigateVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('highlight-navigation', this.highlightMenu.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('request-current-navigation', this.handleRequestCurrentNavigation.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('video-complete', this.handleVideoComplete.bind(this), this.playerId));\r\n\t\tthis.eventbus = eventbus;\r\n\r\n        this.buildHtml(this.container, this.navigation);\r\n        this.initHistory.bind(this);\r\n\t}\r\n\r\n\tinitHistory() {\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[0];\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tlet videoIndex = 0;\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tvideoIndex = nav.videoUrlIndex;\r\n\t\t}\r\n\t\tthis.highlightMenu(videoIndex);\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf('#');\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split('/');\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleRequestCurrentNavigation(resultCallback) {\r\n\t\tresultCallback({\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]\r\n\t\t});\r\n\t}\r\n\r\n\t detach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.labelControllers.forEach((ctrl) => {\r\n\t\t\tctrl.detach(eventbus);\r\n\t\t});\r\n\t\tthis.labelControllers.length = 0;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t\twindow.onpopstate = null;\r\n\t}\r\n\r\n\tpushCurrentState(position = -1) {\r\n\t\tconst state = {\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint\r\n\t\t\t\t.labelId].currentLanguage]\r\n\t\t};\r\n\t\tif (position > -1) {\r\n\t\t\tstate.position = position;\r\n\t\t}\r\n\t\tthis.eventbus.broadcast('push-history-state',[state]);\r\n\t}\r\n\r\n\tbuildHtml(parentElm, data) {\r\n\t\tconst ul = $('<ul/>');\r\n\t\tdata.forEach(this.addNavElement.bind(this, ul));\r\n\t\tparentElm.append(ul);\r\n\t}\r\n\r\n\taddNavElement(parentElm, data) {\r\n\t\tif (data.visible) {\r\n\t\t\tconst li = $('<li/>');\r\n\t\t\tconst a = $(`<a href='javascript:;' id='nav_${data.videoUrlIndex}'/>`);\r\n\t\t\tli.append(a);\r\n\t\t\tthis.addLabel(a, data.labelId);\r\n\t\t\tthis.addClickHandler(a, data.videoUrlIndex);\r\n\t\t\tif (data.children) {\r\n\t\t\t\tconst ul = $('<ul/>');\r\n\t\t\t\tdata.children.forEach(this.addNavElement.bind(this, ul));\r\n\t\t\t\tli.append(ul);\r\n\t\t\t}\r\n\t\t\tparentElm.append(li);\r\n\t\t}\r\n\t}\r\n\r\n\taddClickHandler(parentElm, videoIndex) {\r\n\t\tparentElm.mouseup(this.menuMouseupHandler.bind(this, videoIndex));\r\n\t}\r\n\r\n\tmenuMouseupHandler(videoIndex) {\r\n\t\tconst navdata = this.navVidIdLookup[videoIndex];\r\n\t\tif (navdata) {\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navdata.videoUrlIndex]);\r\n\t\t\tthis.handleNavigateVideoUrl(navdata.videoUrlIndex);\r\n\t\t}\r\n\t}\r\n\r\n\thandleNavigateVideoUrl(index, requestedVideoPosition) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n\t\tthis.highlightMenu(index);\r\n\t\tthis.eventbus.broadcast('request-video-url', [index, requestedVideoPosition]);\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[index];\r\n\t\tthis.pushCurrentState(requestedVideoPosition);\r\n\t}\r\n\r\n\thighlightMenu(index) {\r\n\t\tconst navElm = $(`#nav_${index}`);\r\n\t\tif (navElm.length) {\r\n\t\t\t$('.current-menu-item').removeClass('current-menu-item');\r\n\t\t\tnavElm.addClass('current-menu-item');\r\n\t\t}\r\n\t}\r\n\r\n\thandleVideoComplete(index) {\r\n\t\tconsole.log('Navigation controller received video complete');\r\n\t\tconst navData = this.navVidIdLookup[index];\r\n\t\tif (navData.autoNext) {\r\n\t\t\tconsole.log('NavigationController.handleVideoComplete - request-video-url: ' + navData.next.videoUrlIndex);\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navData.next.videoUrlIndex]);\r\n\t\t} else {\r\n\t\t\tconsole.log('handleVideoComplete - request-video-cleanup');\r\n\t\t\tthis.eventbus.broadcast('request-video-cleanup');\r\n\t\t}\r\n\t}\r\n\r\n\taddLabel(parentElm, labelId) {\r\n\t\tconst data = {\r\n\t\t\t\tselectedElement: parentElm,\r\n\t\t\t\tlabelId: labelId\r\n\t\t\t};\r\n\t\tconst resultCallback = (instance)=> {\r\n            instance.init(data);\r\n            instance.attach(this.eventbus);\r\n            this.labelControllers.push(instance);\r\n            this.ctrlLookup[labelId] = instance;\r\n\t\t};\r\n\t\tthis.eventbus.broadcast('request-instance', ['LabelController', resultCallback]);\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nexport default NavigationController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass ProgressbarController {\r\n\r\n\tconstructor() {\r\n\t\tthis.selectedElement = null;\r\n\t\tthis.textElement = null;\r\n\t\tthis.detachers = [];\r\n\t\tthis.name = \"ProgressbarController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.selectedElement = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.textElement = operationData.textElement;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.detachers.push(eventbus.on(TimelineEventNames.POSITION_UPDATE, this.positionUpdateHandler.bind(this), this.playerId));\r\n\t\tconst clickHandler = this.clickHandler.bind(this);\r\n\t\tthis.selectedElement.on(\"click\", clickHandler);\r\n\t\tthis.detachers.push(()=> this.selectedElement.off(\"click\"), clickHandler);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.detacher.forEach((func)=> {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\tpositionUpdateHandler(position, duration) {\r\n\t\tlet perc = (100 / duration) * position;\r\n\t\tif (this.selectedElement) {\r\n\t\t\tthis.selectedElement.css(\"width\", `${perc}%`);\r\n\t\t}\r\n\t\tperc = Math.floor(perc);\r\n\t\tif (this.textElement) {\r\n\t\t\tthis.textElement.text(`${perc}%`);\r\n\t\t}\r\n\t}\r\n\r\n\tclickHandler() {\r\n\r\n\t}\r\n}\r\n\r\nexport default ProgressbarController;\r\n","class RoutingController {\r\n\r\n\tconstructor() {\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.eventbus = null;\r\n\t\tthis.name = \"RoutingController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t\tthis.playerId = operationData.playerId;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers.push(eventbus.on(\"before-request-video-url\", this.handleBeforeRequestVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on(\"push-history-state\", this.handlePushHistoryState.bind(this)));\r\n\t\tthis.eventbus = eventbus;\r\n\t\twindow.onpopstate = this.handlePopstate.bind(this);\r\n\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tlet pos = this.getQueryVariable(1);\r\n\t\t\tpos = (pos) ? +pos : 0;\r\n\t\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, pos, true]);\r\n\t\t} else {\r\n\t\t\twindow.history.pushState({ navigationId: this.navigation[0].id },\r\n\t\t\t\t\"\",\r\n\t\t\t\t`#/${this.navigation[0].id}`);\r\n\t\t}\r\n\t}\r\n\r\n\thandlePopstate(event) {\r\n\t\tconst navigationId = (event.state) ? event.state.navigationId : this.navigation[0].id;\r\n\t\tconst position = (event.state) ? event.state.position : 0;\r\n\t\tconst nav = this.navLookup[navigationId];\r\n\t\tthis.eventbus.broadcast(\"highlight-navigation\", [nav.videoUrlIndex]);\r\n\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, position, true]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.eventbus = null;\r\n\t}\r\n\r\n\thandleBeforeRequestVideoUrl(index, requestedVideoPosition, isHistoryRequest) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n        isHistoryRequest = (isHistoryRequest !== undefined) ? isHistoryRequest : false;\r\n\t\tif (!isHistoryRequest) {\r\n            const resultCallback = (item)=> {\r\n                this.pushState(item);\r\n            };\r\n\t\t\tthis.eventbus.broadcast(\"request-current-navigation\", [resultCallback]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf(\"#\");\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split(\"/\");\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandlePushHistoryState(state) {\r\n\t\tthis.pushState(state);\r\n\t}\r\n\r\n\tpushState(state) {\r\n\t\tif ((state) && (state.navigationData) && (state.navigationData.visible)) {\r\n\t\t\tlet currentPosition = (state.position !== undefined) ? state.position : -1;\r\n\t\t\tif (currentPosition < 0) {\r\n\t\t\t\tconst resultCallback = (position)=> {\r\n                    currentPosition = (position > 3) ? (position - 3) : 0;\r\n                };\r\n\t\t\t\tthis.eventbus.broadcast(\"request-current-video-position\", [resultCallback]);\r\n\t\t\t}\r\n\r\n\t\t\tconst currentState = window.history.state;\r\n\t\t\tif ((currentState) && (currentState.navigationId !== state.navigationData.id)) {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t} else if ((currentState) && (currentState.navigationId === state.navigationData.id)) {\r\n\t\t\t\twindow.history.replaceState({ navigationId: currentState.navigationId, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${currentState.navigationId}/${currentPosition}`);\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t}\r\n\t\t\twindow.document.title = state.title;\r\n\t\t}\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nexport default RoutingController;\r\n","class SubtitlesController {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionLookup = null;\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.lastFunc = null;\r\n\t\tthis.name = \"SubtitlesController\";\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst detachTime = eventbus.on(\"time\", this.onTimeHandler.bind(this));\r\n\t\tconst detachLangChange = eventbus.on(\"language-change\", this.languageChangeHandler.bind(this));\r\n\t\tthis.internalDetach = this.internalDetach.bind(this, [detachTime, detachLangChange]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.internalDetach();\r\n\t}\r\n\r\n\tinternalDetach(detachMethods) {\r\n\t\tif (detachMethods) {\r\n\t\t\tdetachMethods.forEach((f) => {\r\n\t\t\t\tf();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tlanguageChangeHandler(newLanguage) {\r\n\t\tthis.currentLanguage = newLanguage;\r\n\t\tif (this.lastFunc) {\r\n\t\t\tthis.lastFunc();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveTitle(container) {\r\n\t\tcontainer.text(\"\");\r\n\t\tthis.lastFunc = null;\r\n\t}\r\n\r\n\tonTimeHandler(position) {\r\n\t\tconst func = this.actionLookup[position];\r\n\t\tif (func) {\r\n\t\t\tfunc();\r\n\t\t\tthis.lastFunc = func;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTitle(container, titleLanguageLookup) {\r\n\t\tcontainer.text(titleLanguageLookup[this.currentLanguage]);\r\n\t}\r\n\r\n\tcreateActionLookup(controllerData, container) {\r\n\t\tconst subtitleData = controllerData.subtitleData;\r\n\t\tconst titles = subtitleData[0].titles;\r\n\t\tconst subtitleTimeLookup = {};\r\n\t\tfor (let i = 0, ii = titles.length; i < ii; i++) {\r\n\t\t\tconst titleLanguageLookup = {};\r\n\t\t\tfor (let j = 0, jj = subtitleData.length; j < jj; j++) {\r\n\t\t\t\tconst subs = subtitleData[j];\r\n\t\t\t\ttitleLanguageLookup[subs.lang] = subs.titles[i].text;\r\n\t\t\t}\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.start] = this.setTitle.bind(this, container, titleLanguageLookup);\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.end] = this.removeTitle;\r\n\t\t}\r\n\t\treturn subtitleTimeLookup;\r\n\t}\r\n\r\n\tinit(controllerData) {\r\n\t\tconst container = controllerData.selectedElement;\r\n\t\tthis.removeTitle = this.removeTitle.bind(this, container);\r\n\t\tthis.currentLanguage = controllerData.language;\r\n\t\tthis.actionLookup = this.createActionLookup(controllerData, container);\r\n\t}\r\n}\r\n\r\nexport default SubtitlesController;\r\n","export { default as addClass } from './addClass';\r\nexport { default as addControllerToElement } from './addControllerToElement';\r\nexport { default as addOptionList } from './addOptionList';\r\nexport { default as animate } from './animate';\r\nexport { default as animateWithClass } from './animateWithClass';\r\nexport { default as broadcastEvent } from './broadcastEvent';\r\nexport { default as clearElement } from './clearElement';\r\nexport { default as clearOperationData } from './clearOperationData';\r\nexport { default as customFunction } from './customFunction';\r\nexport { default as endAction } from './endAction';\r\nexport { default as extendController } from './extendController';\r\nexport { default as getControllerFromElement } from './getControllerFromElement';\r\nexport { default as getControllerInstance } from './getControllerInstance';\r\nexport { default as getElementDimensions } from './getElementDimensions';\r\nexport { default as loadJSON } from './loadJSON';\r\nexport { default as removeClass } from './removeClass';\r\nexport { default as removeControllerFromElement } from './removeControllerFromElement';\r\nexport { default as removeElement } from './removeElement';\r\nexport { default as removePropertiesFromOperationData } from './removePropertiesFromOperationData';\r\nexport { default as reparentElement } from './reparentElement';\r\nexport { default as requestAction } from './requestAction';\r\nexport { default as resizeAction } from './resizeAction';\r\nexport { default as selectElement } from './selectElement';\r\nexport { default as setElementAttributes } from './setElementAttributes';\r\nexport { default as setElementContent } from './setElementContent';\r\nexport { default as setOperationData } from './setOperationData';\r\nexport { default as setStyle } from './setStyle';\r\nexport { default as startAction } from './startAction';\r\nexport { default as toggleClass } from './toggleClass';\r\nexport { default as toggleElement } from './toggleElement';\r\nexport { default as wait } from './wait';\r\n","function addClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.addClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default addClass;\r\n","import attachControllerToElement from './helper/attachControllerToElement';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction addControllerToElement(operationData, eventBus) {\r\n    const {selectedElement, controllerInstance} = operationData;\r\n    \r\n    attachControllerToElement(selectedElement, controllerInstance);\r\n    \r\n    controllerInstance.init(operationData);\r\n\r\n    const promise = controllerInstance.attach(eventBus);\r\n\r\n    if (promise) {\r\n        return new Promise((resolve, reject)=> {\r\n            promise.then((newOperationData) => {\r\n                internalResolve(resolve, operationData, newOperationData);\r\n            }, reject);\r\n        })\r\n    } else {\r\n        return operationData;\r\n    }\r\n}\r\n\r\nexport default addControllerToElement;\r\n","import { getElementControllers } from './getElementData';\r\n\r\nfunction attachControllerToElement(element, controller) {\r\n    if (!element.data('chronoEngineControllers')) {\r\n        element.data('chronoEngineControllers', []);\r\n    }\r\n    const controllers = getElementControllers(element);\r\n    controllers.push(controller);\r\n}\r\n\r\nexport default attachControllerToElement;\r\n","function createOptionElementText(valueProperty, labelProperty, defaultIndex, defaultValue, data, index) {\r\n    let selected = '';\r\n    if (defaultValue) {\r\n        selected = (data[valueProperty] === defaultValue) ? ' selected' : '';\r\n    } else if (defaultIndex) {\r\n        selected = (index === defaultIndex) ? ' selected' : '';\r\n    }\r\n    return `<option value='${data[valueProperty]}'${selected}>${data[labelProperty]}</option>`;\r\n}\r\n\r\nfunction addOptionList(operationData, eventBus) {\r\n    const { valueProperty, labelProperty, defaultIndex, defaultValue, optionData, selectedElement } = operationData;\r\n\r\n    const createOption = createOptionElementText.bind(null, valueProperty, labelProperty, defaultIndex, defaultValue);\r\n\r\n    const optionElements = optionData.map(createOption);\r\n\r\n    selectedElement.html(optionElements);\r\n\r\n    return operationData;\r\n}\r\n\r\nexport default addOptionList;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animate(operationData, eventBus) {\r\n    const {animationEasing, selectedElement, animationProperties, animationDuration} = operationData;\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            if (animationEasing) {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    animationEasing,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            } else {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            }\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n    return promise;\r\n}\r\n\r\nexport default animate;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animateWithClass(operationData, eventBus) {\r\n    let {selectedElement, className, removeClass } = operationData;\r\n    removeClass = (removeClass !== undefined) ? removeClass : true;\r\n\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            selectedElement.one(\"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd\",\r\n            () => {\r\n                if (removeClass) {\r\n                    selectedElement.removeClass(className);\r\n                }\r\n                internalResolve(resolve, {}, operationData);\r\n            });\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n    selectedElement.addClass(className);\r\n\r\n    return promise;\r\n}\r\n\r\nexport default animateWithClass;\r\n","import resolveEventArguments from './helper/resolveEventArguments';\r\nimport removeEventDataFromOperationData from './helper/removeEventDataFromOperationData';\r\n\r\nfunction broadcastEvent(operationData, eventBus) {\r\n    const {eventArgs, eventTopic, eventName} = operationData;\r\n\r\n    const eventArguments = resolveEventArguments(operationData, eventArgs);\r\n    \r\n    if (eventTopic) {\r\n        eventBus.broadcastForTopic(eventName, eventTopic, eventArguments);\r\n    } else {\r\n        eventBus.broadcast(eventName, eventArguments);\r\n    }\r\n\r\n    removeEventDataFromOperationData(operationData);\r\n}\r\n\r\nexport default broadcastEvent;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolveEventArguments(operationData, eventArgs) {\r\n    if (!eventArgs) {\r\n        return;\r\n    }\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    return eventArgs.map(extract);\r\n}\r\n\r\nexport default resolveEventArguments;\r\n","function removeEventDataFromOperationData(operationData) {\r\n    delete operationData.eventName;\r\n    delete operationData.eventTopic;\r\n    delete operationData.eventArgs;\r\n}\r\n\r\nexport default removeEventDataFromOperationData;\r\n","function clearElement(operationData, eventBus) {\r\n    const {selectedElement} = operationData;\r\n    selectedElement.empty();\r\n    return operationData;\r\n}\r\n\r\nexport default clearElement;\r\n","function clearOperationData(operationData, eventBus) {\r\n    return {};\r\n}\r\n\r\nexport default clearOperationData;\r\n","import internalResolve from './helper/internalResolve';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction customFunction(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    return new Promise((resolve, reject) => {\r\n        const resultCallback = (func)=> {\r\n            const promise = func(operationData, eventBus);\r\n            if (promise) {\r\n                promise.then(() => {\r\n                    internalResolve(resolve, {}, operationData);\r\n                }, reject);\r\n            } else {\r\n                internalResolve(resolve, {}, operationData);\r\n            }\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_FUNCTION, [systemName, resultCallback]);\r\n    });\r\n}\r\n\r\nexport default customFunction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction endAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    delete operationData.actionOperationData;\r\n    return new Promise((resolve, reject)=> {\r\n        const mergedData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.end(mergedData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default endAction;\r\n","function extendController(operationData, eventBus) {\r\n    const { controllerInstance, controllerExtension } = operationData;\r\n    \r\n    operationData.controllerInstance = Object.assign(controllerInstance, controllerExtension);\r\n    \r\n    return operationData;\r\n}\r\n\r\nexport default extendController;\r\n","import { getElementControllers } from './helper/getElementData';\r\n\r\nfunction getControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n    const controllers = getElementControllers(selectedElement);\r\n    let controller = null;\r\n    controllers.some((ctrl) => {\r\n        if (ctrl.name === controllerName) {\r\n            controller = ctrl;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (!controller) {\r\n        console.warn(`controller for name '${controllerName}' was not found on the given element`);\r\n    }\r\n    operationData.controllerInstance = controller;\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerFromElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction getControllerInstance(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    let {propertyName} = operationData;\r\n    \r\n    propertyName = propertyName || \"controllerInstance\";\r\n    const resultCallback = (instance)=> {\r\n        operationData[propertyName] = instance;\r\n    }\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_INSTANCE, [systemName, resultCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerInstance;\r\n","import modifyDimensions from './helper/modifyDimensions';\r\n\r\nfunction getElementDimensions(operationData, eventBus) {\r\n    let {selectedElement, dimensions, modifier} = operationData;\r\n    dimensions = dimensions || {};\r\n    dimensions.width = selectedElement.innerWidth();\r\n    dimensions.height = selectedElement.innerHeight();\r\n    if (dimensions.height === 0) {\r\n        dimensions.height = dimensions.width;\r\n    }\r\n    if (modifier) {\r\n        modifyDimensions(dimensions, modifier);\r\n    }\r\n    operationData.dimensions = dimensions;\r\n    return operationData;\r\n}\r\n\r\nexport default getElementDimensions;\r\n","function modifyDimensionsByRatio(ratioModifier, dimensions) {\r\n    //h[ar=8-1]\r\n    let prefix = ratioModifier.substr(0, 1);\r\n    let ratio = ratioModifier.substr(ratioModifier.indexOf('[') + 1, ratioModifier.indexOf(']') - ratioModifier.indexOf('[') - 1);\r\n    let ratios = ratio.split('=')[1].split('-');\r\n    if (prefix === 'h') {\r\n        dimensions.height = (dimensions.width / +ratios[0]) * +ratios[1];\r\n    } else if (prefix === 'w') {\r\n        dimensions.width = (dimensions.height / +ratios[1]) * +ratios[0];\r\n    }\r\n}\r\n\r\nfunction getModifierSuffix(modifier) {\r\n    let endIdx = 1;\r\n    let suffix = modifier.substr(modifier.length - 1, 1);\r\n    if ((suffix !== 'h') && (suffix !== 'w') && (suffix !== '%')) {\r\n        suffix = null;\r\n    }\r\n    const isPercent = (suffix === '%');\r\n    if (isPercent) {\r\n        endIdx = 2;\r\n        suffix = modifier.substr(modifier.length - endIdx, 1);\r\n        if ((suffix !== 'h') && (suffix !== 'w')) {\r\n            suffix = null;\r\n            endIdx = 1;\r\n        }\r\n    }\r\n    return [suffix, endIdx, isPercent];\r\n}\r\n\r\nfunction _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier) {\r\n    switch (prefix) {\r\n        case '+':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height += heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width += widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height += heightModifier;\r\n                    dimensions.width += widthModifier;\r\n            }\r\n            break;\r\n        case '-':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height -= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width -= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height -= heightModifier;\r\n                    dimensions.width -= widthModifier;\r\n            }\r\n            break;\r\n        case '/':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height /= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width /= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height /= heightModifier;\r\n                    dimensions.width /= widthModifier;\r\n            }\r\n            break;\r\n        case '*':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height *= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width *= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height *= heightModifier;\r\n                    dimensions.width *= widthModifier;\r\n            }\r\n            break;\r\n        default:\r\n            console.error(`Unknown operator found: ${prefix}`);\r\n    }\r\n    return dimensions;\r\n}\r\n\r\nfunction modifyDimensions(dimensions, modifier) {\r\n    let ratioModifier = null;\r\n    if (modifier.indexOf('|') > -1) {\r\n        [modifier, ratioModifier] = modifier.split('|');\r\n    }\r\n\r\n    const prefix = modifier.substr(0, 1);\r\n    let [suffix, endIdx, isPercent] = getModifierSuffix(modifier);\r\n\r\n    const value = parseInt((suffix !== null) ? modifier.substr(1, modifier.length - endIdx - 1) : modifier.substr(1, modifier.length), 10);\r\n\r\n    let widthModifier = value;\r\n    let heightModifier = value;\r\n    if (isPercent) {\r\n        widthModifier = (dimensions.width / 100) * value;\r\n        heightModifier = (dimensions.height / 100) * value;\r\n    }\r\n\r\n    dimensions = _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier);\r\n\r\n    if (ratioModifier) {\r\n        modifyDimensionsByRatio(ratioModifier, dimensions)\r\n    }\r\n}\r\n\r\nexport default modifyDimensions;","function loadJSON(jsonCache, operationData, eventBus) {\r\n    const {url, cache} = operationData;\r\n\r\n    let { propertyName } = operationData;\r\n    propertyName = propertyName || \"json\";\r\n\r\n    if (cache && jsonCache[url]) {\r\n        operationData[propertyName] = jsonCache[url];\r\n        return operationData;\r\n    }\r\n\r\n\r\n    return new Promise((resolve, reject)=> {\r\n        fetch(url)\r\n        .then((response)=> {\r\n            jsonCache[url] = operationData[propertyName] = response.body;\r\n            resolve(operationData);\r\n        })\r\n        .catch(reject);\r\n    });\r\n}\r\n\r\nexport default loadJSON.bind(null, {});\r\n","function removeClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.removeClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default removeClass;\r\n","import {getElementControllers} from './helper/getElementData';\r\n\r\nfunction removeControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n\r\n    const controllers = getElementControllers(selectedElement);\r\n    if (controllers) {\r\n        let controller = null;\r\n        controllers.some((ctrl) => {\r\n            if (ctrl.name === controllerName) {\r\n                controller = ctrl;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (controller) {\r\n            const idx = controllers.indexOf(controller);\r\n            if (idx > -1) {\r\n                controllers.splice(idx, 1);\r\n            }\r\n            controller.detach(eventBus);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default removeControllerFromElement;\r\n","export function removeElement(operationData, eventBus) {\r\n    operationData.selectedElement.remove();\r\n    return operationData;\r\n}\r\n\r\nexport default removeElement;\r\n","function removePropertiesFromOperationData(operationData, eventBus) {\r\n    const {\r\n        propertyNames\r\n    } = operationData;\r\n\r\n    propertyNames.forEach(name => {\r\n        delete operationData[name];\r\n    });\r\n    delete operationData.propertyNames;\r\n    return operationData;\r\n}\r\n\r\nexport default removePropertiesFromOperationData;","function reparentElement(operationData, eventBus) {\r\n    const {selectedElement, newParentSelector} = operationData;\r\n    selectedElement.remove().appendTo(newParentSelector);\r\n}\r\n\r\nexport default reparentElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction requestAction(operationData, eventBus) {\r\n        const { actionName } = operationData;\r\n\r\n        const resultCallback = (action) => {\r\n            operationData.actionInstance = action;\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_ACTION, [actionName, resultCallback]);\r\n        return operationData;\r\n}\r\n\r\nexport default requestAction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\n\r\nfunction resizeAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    operationData = mergeOperationData(operationData, actionOperationData);\r\n    if (actionInstance.resize) {\r\n        return actionInstance.resize(operationData);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default resizeAction;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction findElementBySelector(root, selector, operationData, propertyName) {\r\n    const element = root.find(selector);\r\n    if (!element.length) {\r\n        console.warn(`selector '${selector}' wasn't found!`);\r\n    }\r\n    operationData[propertyName] = element;\r\n    if (operationData.hasOwnProperty(\"propertyName\")) {\r\n        delete operationData.propertyName;\r\n    }\r\n}\r\n\r\nfunction selectElement(operationData, eventBus) {\r\n    let {selector, propertyName, useExistingAsRoot} = operationData;\r\n\r\n    if (!selector) {\r\n        throw new Error(\"selector is undefined!\");\r\n    }\r\n    propertyName = (propertyName) ? propertyName : \"selectedElement\";\r\n\r\n    if (useExistingAsRoot && operationData[propertyName]) {\r\n        const currentRoot = operationData[propertyName];\r\n        findElementBySelector(currentRoot, selector, operationData, propertyName);\r\n        return operationData;\r\n    }\r\n\r\n    const rootCallback = (root)=> {\r\n        findElementBySelector(root, selector, operationData, propertyName);\r\n    };\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_ENGINE_ROOT, [rootCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default selectElement;\r\n","function setElementAttributes(operationData, eventBus) {\r\n    const {attributes, selectedElement} = operationData;\r\n    for (let attrName in attributes) {\r\n        if (attributes.hasOwnProperty(attrName)) {\r\n            selectedElement.attr(attrName, attributes[attrName]);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementAttributes;\r\n","function setElementContent(operationData, eventBus) {\r\n    const {append, selectedElement, template} = operationData;\r\n    if (!append) {\r\n        selectedElement.html(template);\r\n    } else {\r\n        selectedElement.append(template);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementContent;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setOperationData(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData = Object.assign(operationData, properties);\r\n    delete operationData.properties;\r\n    return operationData;\r\n}\r\n\r\nexport default setOperationData;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setStyle(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData.selectedElement.css(properties);\r\n    return operationData;\r\n}\r\n\r\nexport default setStyle;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction startAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    return new Promise((resolve, reject)=> {\r\n        operationData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.start(operationData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default startAction;\r\n","function toggleClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.toggleClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default toggleClass;\r\n","function toggleElement(operationData, eventBus) {\r\n    operationData.selectedElement.toggle();\r\n    return operationData;\r\n}\r\n\r\nexport default toggleElement;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction wait(operationData, eventBus) {\r\n    const { milliseconds } = operationData;\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, milliseconds);\r\n    });\r\n}\r\n\r\nexport default wait;\r\n","export { default as JwPlayerTimelineProvider } from './jwplayer-timeline-provider';\r\n// export { default as MediaElementTimelineProvider} from './mediaelement-timeline-provider';\r\nexport { default as RequestAnimationFrameTimelineProvider } from './request-animation-frame-timeline-provider';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass JwPlayerTimelineProvider {\r\n\r\n   constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.playerid = config.playerSettings.selector;\r\n        this.loop = false;\r\n        this.player = null;\r\n        this.currentLoopHandler = null;\r\n        this._eventbusListeners = [];\r\n        this._addEventListeners();\r\n    }\r\n\r\n    _extractUrls(configuration) {\r\n        const urls = configuration.timelines.filter(timeline => timeline.type === \"video\").map(timeline => {\r\n            return timeline.uri;\r\n        });\r\n        return urls;\r\n    }\r\n\r\n    init(selector) {\r\n        const urls = this._extractUrls(this.config);\r\n        const jwp = window.jwplayer;\r\n        const p = $(`#${selector}`);\r\n        if (!p.length) {\r\n            throw new Error(`videoplayer selector '${selector}' not found`);\r\n        }\r\n        let w = p.innerWidth();\r\n        let h = p.innerHeight();\r\n        if (w === 0) {\r\n            w = 100;\r\n        }\r\n        if (h === 0) {\r\n            h = 300;\r\n        }\r\n\r\n        this.player = jwp(this.config.playerSettings.selector);\r\n        this.player.setup({\r\n            file: urls[0],\r\n            image: this.config.playerSettings.poster,\r\n            height: h,\r\n            width: w,\r\n            controls: true,\r\n            autostart: false,\r\n            displaytitle: false,\r\n            displaydescription: false,\r\n            nextUpDisplay: false,\r\n            abouttext: 'Rosetta Group',\r\n            aboutlink: 'http://www.rosettagroup.nl',\r\n            stretching: \"fill\",\r\n            repeat: false\r\n        });\r\n        const playlist = [];\r\n        urls.forEach((url) => {\r\n            playlist.push({\r\n                file: url,\r\n                title: url,\r\n                image: this.config.playerSettings.poster\r\n            });\r\n        });\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.player.once(\"ready\", () => {\r\n                this._handlePlayerReady(resolve);\r\n            });\r\n            this.player.load(playlist);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    _handlePlayerReady(resolve) {\r\n        this.player.once(\"firstFrame\", () => {\r\n            this.player.pause();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.player.playerid, [this.getDuration()]);\r\n            resolve(this);\r\n        });\r\n        this.player.on(TimelineEventNames.TIME, this._loopHandler.bind(this, Math.floor));\r\n        this.player.on(TimelineEventNames.SEEKED, this._seekedHandler.bind(this));\r\n        this.player.on(TimelineEventNames.COMPLETE, this._handlePlayerComplete.bind(this));\r\n        setTimeout(()=> {\r\n            this.player.play();\r\n        },10);\r\n    }\r\n\r\n    _handlePlayerComplete() {\r\n        if (!this.loop) {\r\n            this.stop();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.playerid, [this.player.getPlaylistIndex()]);\r\n        }\r\n    }\r\n\r\n    _seekedHandler() {\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.playerid, [this.getPosition(), this.getDuration()]);\r\n    }\r\n\r\n    destroy() {\r\n        this.player.remove();\r\n        this._eventbusListeners.forEach(func => func());\r\n    }\r\n\r\n    _loopHandler(floor, event) {\r\n        const pos = floor(event.position);\r\n        if ((this.loop) && (pos === floor(this.player.getDuration() - 1))) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _timeResetLoopHandler(event) {\r\n        if (this.loop) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this.resize.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.duration.bind(this), this.playerid));\r\n    }\r\n\r\n    _container(resultCallback) {\r\n        let suffix = \"\";\r\n        if (this.player.getProvider().name !== \"html5\") {\r\n            suffix = \"_wrapper\";\r\n        }\r\n        const container = $(`#${this.playerid}${suffix}`);\r\n        resultCallback(container);\r\n    }\r\n\r\n    play() {\r\n        this.player.play();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.playerid);\r\n    }\r\n\r\n    stop() {\r\n        this.player.stop();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.playerid);\r\n    }\r\n\r\n    pause() {\r\n        this.player.pause();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.playerid);\r\n    }\r\n\r\n    seek(position) {\r\n        const currentPosition = this.player.getPosition();\r\n        this.player.seek(position);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.playerid, [position, currentPosition, this.player.getDuration()]);\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.player.resize(width, height);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.RESIZE, this.playerid, [width, height]);\r\n    }\r\n\r\n    duration(resultCallback) {\r\n        resultCallback(Math.floor(this.getDuration()));\r\n    }\r\n\r\n    playlistItem(index) {\r\n        this.player.playlistItem(index);\r\n    }\r\n\r\n    once(eventName, callback) {\r\n        this.player.once(eventName, callback);\r\n    }\r\n\r\n    off(eventName, callback) {\r\n        this.player.off(eventName, callback);\r\n    }\r\n\r\n    on(eventName, callback) {\r\n        this.player.on(eventName, callback);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.player.getPosition();\r\n    }\r\n\r\n    getPlaylistIndex() {\r\n        return this.player.getPlaylistIndex();\r\n    }\r\n\r\n    getState() {\r\n        return this.player.getState();\r\n    }\r\n\r\n    getDuration() {\r\n        return this.player.getDuration();\r\n    }\r\n\r\n    getMute() {\r\n        return this.player.getMute();\r\n    }\r\n\r\n    getVolume() {\r\n        return this.player.getVolume();\r\n    }\r\n\r\n    setMute(state) {\r\n        this.player.setMute(state);\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.player.setVolume(volume);\r\n    }\r\n}\r\n\r\nexport default JwPlayerTimelineProvider;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass RequestAnimationFrameTimelineProvider {\r\n\r\n    constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.requestID = null;\r\n        this.last = 0;\r\n        this.current = 0;\r\n        this._updateBound = this._update.bind(this);\r\n        this.loop = false;\r\n        this._eventbusListeners = [];\r\n        this.playerid = `provider${Math.random()*1000}`;\r\n        this._addEventListeners();\r\n        this.playlist = [];\r\n        this.currentPlaylistItem = null;\r\n        this.firstFrame = true;\r\n        this.paused = true;\r\n    }\r\n\r\n    _extractPlaylist(configuration) {\r\n        const playlist = configuration.timelines.filter(timeline => timeline.type === \"animation\").map(timeline => {\r\n            return timeline;\r\n        });\r\n        return playlist;\r\n    }\r\n\r\n    playlistItem(index) {\r\n        if (index < 0 || index > this.playlist.length) {\r\n            return;\r\n        }\r\n        this.currentPlaylistItem = this.playlist[index];\r\n        this.firstFrame = true;\r\n        this.reset();\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this._resize.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.playerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.requestDurationHandler.bind(this), this.playerid));\r\n    }\r\n\r\n    _update(now) {\r\n        if (!this.paused) {\r\n            return;\r\n        }\r\n        if(!this.last || now - this.last >= 1000) {\r\n            if (!this.last && this.firstFrame) {\r\n                this.firstFrame = false;\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.FIRSTFRAME, this.playerid);\r\n            }\r\n            this.last = now;\r\n            this.current++;\r\n            if (this.current > this.currentPlaylistItem.duration) {\r\n                if (this.loop) {\r\n                    this._reset();\r\n                } else {\r\n                    this.stop();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.playerid);\r\n                    return;\r\n                }\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME, this.playerid, this.current);\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound);\r\n    }\r\n\r\n    _start() {\r\n        if (this.requestID) {\r\n            return;\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound)\r\n    }\r\n\r\n    _reset() {\r\n        this._cancelAnimationFrame();\r\n        this.last = 0;\r\n        this.current = 0;\r\n    }\r\n\r\n    _resize() {\r\n        console.error('Not implemented yet');\r\n    }\r\n\r\n    _container(callBack) {\r\n        callBack(this.container);\r\n    }\r\n\r\n    _cancelAnimationFrame() {\r\n        if (this.requestID) {\r\n            cancelAnimationFrame(this.requestID);\r\n            this.requestID =  null;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.playlist = this._extractPlaylist(this.config);\r\n        this.currentPlaylistItem = this.playlist[0];\r\n        this.container = $(this.currentPlaylistItem.selector);\r\n        if (!this.container.length) {\r\n            throw new Error(`timeline selector '${selector}' not found`);\r\n        }\r\n        const promise = new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n        return promise;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this._eventbusListeners.forEach(func => {\r\n            func();\r\n        });\r\n    }\r\n\r\n    play(){\r\n        this.paused = false;\r\n        this._start();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.playerid);\r\n    }\r\n\r\n    stop(){\r\n        this._cancelAnimationFrame();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.playerid);\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.playerid);\r\n    }\r\n\r\n    seek(position) {\r\n        if (position < 0 || position > this.currentPlaylistItem.duration) {\r\n            return;\r\n        }\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.playerid);\r\n        this.current = position;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.playerid);\r\n    }\r\n\r\n    requestDurationHandler(callBack) {\r\n        callBack(this.currentPlaylistItem.duration);\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        return this.eventbus.on(eventName, handler, this.playerid);\r\n    }\r\n\r\n    once(eventName, handler) {\r\n        return this.eventbus.once(eventName, handler, this.playerid);\r\n    }\r\n}\r\n\r\nexport default RequestAnimationFrameTimelineProvider;\r\n"],"sourceRoot":""}