!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("lottie-web")):"function"==typeof define&&define.amd?define("library",["jquery","lottie-web"],t):"object"==typeof exports?exports.library=t(require("jquery"),require("lottie-web")):e.library=t(e[void 0],e[void 0])}(window,function(n,i){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}i.PLAY_REQUEST="timeline-play-request",i.STOP_REQUEST="timeline-stop-request",i.PAUSE_REQUEST="timeline-pause-request",i.SEEK_REQUEST="timeline-seek-request",i.RESIZE_REQUEST="timeline-resize-request",i.CONTAINER_REQUEST="timeline-container-request",i.DURATION_REQUEST="timeline-duration-request",i.DURATION="timeline-duration",i.TIME="timeline-time",i.SEEKED="timeline-seeked",i.COMPLETE="timeline-complete",i.PLAY="timeline-play",i.STOP="timeline-stop",i.PAUSE="timeline-pause",i.SEEK="timeline-seek",i.RESIZE="timeline-resize",i.POSITION_UPDATE="timeline-position-update",i.TIME_UPDATE="timeline-time-update",i.REQUEST_INSTANCE="request-instance",i.REQUEST_ACTION="request-action",i.REQUEST_FUNCTION="request-function",i.REQUEST_TIMELINE_URI="request-timeline-uri",i.BEFORE_REQUEST_TIMELINE_URI="before-request-timeline-uri",i.REQUEST_ENGINE_ROOT="request-engine-root",i.REQUEST_CURRENT_TIMELINE_POSITION="request-current-timeline-position",i.REQUEST_TIMELINE_CLEANUP="request-timeline-cleanup",i.EXECUTE_TIMELINEACTION="execute-timelineaction",i.RESIZE_TIMELINEACTION="resize-timelineaction",i.REQUEST_LABEL_COLLECTION="request-label-collection",i.REQUEST_LABEL_COLLECTIONS="request-label-collections",i.REQUEST_CURRENT_LANGUAGE="request-current-language",i.LANGUAGE_CHANGE="language-change";var r=i;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(3))&&i.__esModule?i:{default:i};function a(e,t,n){e(n?(0,r.default)(t,n):t)}t.default=a},function(e,t){e.exports=n},function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function r(e,t){return i(e,t)}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e){return JSON.parse(JSON.stringify(e))}t.default=i},function(e,t,n){"use strict";function i(e,t){return t.data(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementData=i,t.getElementControllers=void 0;var r=i.bind(null,"chronoEngineControllers");t.getElementControllers=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ConfigurationResolver",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ChronoTriggerEngine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"EngineFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"TimelineEventNames",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"LanguageManager",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"WebpackResourceImporter",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Eventbus",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}}(n(7)),r=f(n(10)),a=f(n(18)),o=f(n(19)),u=f(n(0)),s=f(n(12)),l=f(n(23)),c=f(n(13));function f(e){return e&&e.__esModule?e:{default:e}}var d=i;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"EndableAction",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"TimelineAction",{enumerable:!0,get:function(){return a.default}});var i=o(n(8)),r=o(n(9)),a=o(n(16));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,l=(i=n(4))&&i.__esModule?i:{default:i};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=e.name,this.startOperations=e.startOperations,this.eventbus=t}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(n,[{key:"start",value:function(n){var i=this;return new Promise(function(e,t){i.executeOperation(i.startOperations,0,e,t,n)}).catch(function(e){throw console.error("Error in action start '".concat(i.name,"'")),e})}},{key:"executeOperation",value:function(t,n,i,r,e){var a=this;if(e=e||{},n<t.length){var o=t[n],u=c(e,o.operationData?(0,l.default)(o.operationData):{}),s=o.instance(u,this.eventbus);s.then?s.then(function(e){a.executeOperation(t,++n,i,r,e)}).catch(function(e){r(e)}):this.executeOperation(t,++n,i,r,s)}else i(e)}},{key:"resize",value:function(n){var i=this;return new Promise(function(e,t){i.executeResizeOperation(i.startOperations,0,e,t,n)})}},{key:"executeResizeOperation",value:function(t,n,i,r,e){var a=this;if(e=e||{},n<t.length){var o=t[n];if(o.resizeInstance){var u=c(e,o.operationData?(0,l.default)(o.operationData):{}),s=o.resizeInstance(u);s.then?s.then(function(e){a.executeResizeOperation(t,++n,i,r,e)}).catch(function(e){r(e)}):this.executeResizeOperation(t,++n,i,r,s)}else this.executeResizeOperation(t,++n,i,r,e)}else i(e)}}]),n}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(8))&&i.__esModule?i:{default:i};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=u(this,s(i).call(this,e,t))).endOperations=e.endOperations,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,r["default"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(i,[{key:"end",value:function(n){var i=this;if(this.endOperations&&this.endOperations.length){return new Promise(function(e,t){i.executeOperation(i.endOperations,0,e,t,n)}).catch(function(e){throw console.error("Error in action end'".concat(i.name,"'")),e})}return new Promise(function(e){e(n)})}}]),i}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(7),s=(i=n(17))&&i.__esModule?i:{default:i};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.importer=e,this.eventbus=t}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(n,[{key:"importSystemEntry",value:function(e){return this.importer.import(e)[e]}},{key:"process",value:function(e,t){var n={};return this.processConfiguration(t,t),this.resolveOperations(t),this.initializeTimelineActions(t),this.initializeInitActions(t,n),this.initializeActions(t,n),this.initializeEventActions(e,t),n}},{key:"initializeEventActions",value:function(n,e){var i=this;n&&e.eventActions&&(e.eventActions.forEach(function(e){var t=new r.Action(e,i.eventbus);n.registerAction(t,e.eventName,e.eventTopic)}),delete e.eventActions)}},{key:"initializeActions",value:function(e,n){var i=this;e.actions&&(e.actions.forEach(function(e){var t=new r.EndableAction(e,i.eventbus);n[e.name]=t}),delete e.actions)}},{key:"initializeInitActions",value:function(e,n){var i=this;e.initActions&&(e.initActions=e.initActions.map(function(e){var t=new r.EndableAction(e,i.eventbus);return n[e.name]=t}))}},{key:"initializeTimelineActions",value:function(e){e.timelines&&e.timelines.forEach(this.initializeTimelineAction.bind(this))}},{key:"initializeTimelineAction",value:function(e){var n=this;e.timelineActions&&(e.timelineActions=e.timelineActions.map(function(e){var t=new r.TimelineAction(e,n.eventbus);return t.endOperations||(t.endOperations=[]),t}))}},{key:"resolveOperations",value:function(e){var t=this,n=[];e.timelines&&e.timelines.forEach(function(e){n.push.apply(n,a(t._gatherOperations(e.timelineActions)))}),this._gatherOperations(e.initActions).concat(n).concat(this._gatherOperations(e.actions)).concat(this._gatherOperations(e.eventActions)).forEach(function(e){e.instance=t.importSystemEntry(e.systemName)})}},{key:"processConfiguration",value:function(t,n){var i=this;if(null!=t)if(t.constructor===Array)for(var e=0,r=t.length;e<r;e++)this.processConfiguration(t[e],n);else Object.keys(t).forEach(function(e){i.processConfigProperty(e,t,n)})}},{key:"processConfigProperty",value:function(e,t,n){var i=t[e];if("string"==typeof i){if(i.startsWith("config:")){var r=i.substr(7,i.length);t[e]=(0,s.default)(r,n)}else if(i.startsWith("template:")){var a=i.substr(9,i.length);t[e]=this.importSystemEntry(a)}else if(i.startsWith("json:")){var o=i.substr(5,i.length),u=this.importSystemEntry(o);t[e]=u}}else"object"===l(i)&&this.processConfiguration(t[e],n)}},{key:"_gatherOperations",value:function(e){var t=[];return e&&e.forEach(function(e){t=e.endOperations?t.concat(e.startOperations.concat(e.endOperations)):t.concat(e.startOperations)}),t}}]),n}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(i,e){if(!i)throw Error("properties arg cannot be null");if(!e)throw Error("sourceObject arg cannot be null");var r=e,a=null;return i.forEach(function(e,t){if(t===i.length-1){var n=e.split("+");1<n.length&&(e=n[0],a=n[1])}r=r[e]}),a?r+a:r}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function i(e,t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!e||!e.length)throw new Error("language ctor arg cannot be null or have zero length");if(!t)throw new Error("labels ctor arg cannot be null");if(!n)throw new Error("eventbus ctor arg cannot be null");this._labelLookup={},this._currentLanguage=e,this.eventbusListeners=[],this.createLabelLookup(t),this.addEventbusListeners(n)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(i,[{key:"addEventbusListeners",value:function(e){this.eventbusListeners.push(e.on(r.default.REQUEST_LABEL_COLLECTION,this.handleRequestLabelCollection.bind(this))),this.eventbusListeners.push(e.on(r.default.REQUEST_LABEL_COLLECTIONS,this.handleRequestLabelCollections.bind(this))),this.eventbusListeners.push(e.on(r.default.REQUEST_CURRENT_LANGUAGE,this.handleRequestCurrentLanguage.bind(this))),this.eventbusListeners.push(e.on(r.default.LANGUAGE_CHANGE,this.handleLanguageChange.bind(this)))}},{key:"handleRequestCurrentLanguage",value:function(e){e(this._currentLanguage)}},{key:"handleRequestLabelCollection",value:function(e,t){t(this._labelLookup[e])}},{key:"handleRequestLabelCollections",value:function(e,t){var n=this;t(e.map(function(e){return n._labelLookup[e]}))}},{key:"handleLanguageChange",value:function(e){e&&e.length?this._currentLanguage=e:console.error("Language cannot be changed to null or empty string")}},{key:"createLabelLookup",value:function(e){var t=this;e.forEach(function(e){t._labelLookup[e.id]=e.labels})}}]),i}();t.default=o},function(e,t,n){"use strict";function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"clear",value:function(){this.eventHandlers={},this.eventListeners=[],this.eventInterceptors={}}},{key:"_getEventInterceptors",value:function(e,t){return t&&t.length&&(e="".concat(e,":").concat(t)),this.eventInterceptors[e]||(this.eventInterceptors[e]=[]),this.eventInterceptors[e]}},{key:"_getEventHandlers",value:function(e,t){return t&&t.length&&(e="".concat(e,":").concat(t)),this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e]}},{key:"on",value:function(e,t,n){var i=this;return this._getEventHandlers(e,n).push(t),function(){i.off(e,t,n)}}},{key:"once",value:function(t,n,i){var r=this;this.on(t,function e(){n.apply(void 0,arguments),r.off(t,e,i)},i)}},{key:"off",value:function(e,t,n){var i=this._getEventHandlers(e,n);if(i){var r=i.indexOf(t);-1<r&&i.splice(r,1)}}},{key:"broadcast",value:function(e,t){this._callHandlers(e,null,t)}},{key:"broadcastForTopic",value:function(e,t,n){this._callHandlers(e,t,n)}},{key:"registerEventlistener",value:function(e){this.eventListeners.push(e)}},{key:"registerInterceptor",value:function(e,t,n){this._getEventInterceptors(e,n).push(t)}},{key:"_callHandlers",value:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];this._getEventInterceptors(t,n).forEach(function(e){i=e.intercept(i)}),this.eventListeners.forEach(function(e){e.handleEvent(t,n,i)});var e=this._getEventHandlers(t,n);if(e)for(var r=0,a=e.length;r<a;r++)e[r].apply(e,o(i))}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(11))&&i.__esModule?i:{default:i};function a(e,t){if(t&&t.toLowerCase&&t.toLowerCase().startsWith("operationdata.")){var n=t.split(".");return n.shift(),(0,r.default)(n,e)}return t}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(14)),u=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,u.default)(t),i=o.default.bind(null,e);for(var r in t){var a=t[r];n[r]=i(a)}return n}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(9))&&i.__esModule?i:{default:i};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=u(this,l(i).call(this,e,t))).active=!1,n.duration=e.duration,n.duration.start=+n.duration.start,n.duration.end=+n.duration.end,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,r["default"]),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(i,[{key:"start",value:function(){return!this.active||this.duration.end<0?(this.active=-1<this.duration.end,s(l(i.prototype),"start",this).call(this)):new Promise(function(e){e()})}},{key:"end",value:function(e){return this.active=!1,s(l(i.prototype),"end",this).call(this,e)}},{key:"resize",value:function(e){return this.active||this.duration.end<0?s(l(i.prototype),"resize",this).call(this,e):new Promise(function(e){e()})}}]),i}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(11))&&i.__esModule?i:{default:i};function a(e,t){var n=e.split(".");return(0,r.default)(n,t)}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(12)),a=i(n(2)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.configuration=e,this.eventbus=t,this.timelineProvider=n,this._timeLineActionsLookup={},this._eventbusListeners=[]}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(i,[{key:"init",value:function(){this._createLayoutTemplate(),this._addInitialisationListeners(),this.languageManager=new r.default(this.configuration.language,this.configuration.labels,this.eventbus);var e=this.configuration.timelines;return this._currentTimelineUri=e&&e.length?e[0].uri:null,this._createTimelineLookup(),this._initializeTimelineProvider()}},{key:"_createLayoutTemplate",value:function(){var e=(0,a.default)(this.configuration.containerSelector);if(!e||!e.length)throw new Error("Container selector not found: ".concat(this.configuration.containerSelector));var t=this.configuration.layoutTemplate;t&&t.length?e.html(t):console.warning("layoutTemplate is empty, unable to create layout")}},{key:"_initializeTimelineProvider",value:function(){var t=this;if(this.configuration.timelineProviderSettings)return(0,a.default)("#".concat(this.configuration.timelineProviderSettings.selector)).length?new Promise(function(e){t.timelineProvider.init().then(function(){t._executeActions(t.configuration.initActions,"start").then(function(){t.timelineProvider.on(o.default.TIME,t._onTimeHandler.bind(t,Math.floor)),t.timelineProvider.on(o.default.SEEK,t._onSeekHandler.bind(t,Math.floor)),e(t.timelineProvider)})})}):new Promise(function(e){e()})}},{key:"destroy",value:function(){this.configuration=null,this.eventbus=null,this.timelineProvider=null,this._timeLineActionsLookup=null,this._eventbusListeners.forEach(function(e){return e()}),this.timelineProvider&&this.timelineProvider.destroy()}},{key:"_addInitialisationListeners",value:function(){this._eventbusListeners.push(this.eventbus.on(o.default.REQUEST_ENGINE_ROOT,this._handleRequestEngineRoot.bind(this,this.configuration.containerSelector))),this._eventbusListeners.push(this.eventbus.on(o.default.REQUEST_TIMELINE_URI,this._handleRequestTimelineUri.bind(this))),this._eventbusListeners.push(this.eventbus.on(o.default.REQUEST_CURRENT_TIMELINE_POSITION,this._handleRequestTimelinePosition.bind(this))),this._eventbusListeners.push(this.eventbus.on(o.default.REQUEST_TIMELINE_CLEANUP,this._handleTimelineComplete.bind(this))),this._eventbusListeners.push(this.eventbus.on(o.default.EXECUTE_TIMELINEACTION,this._handleExecuteTimelineAction.bind(this))),this._eventbusListeners.push(this.eventbus.on(o.default.RESIZE_TIMELINEACTION,this._resizeTimelineAction.bind(this)))}},{key:"_createTimelineLookup",value:function(){var t=this;this.configuration.timelines&&this.configuration.timelines.forEach(function(e){e.timelineActions.forEach(t._addTimelineAction.bind(t,e.uri))})}},{key:"_addTimelineAction",value:function(e,t){var n=t.duration.start,i=this._initializeTimelinePosition(this._initializeUriLookup(this._timeLineActionsLookup,e),n),r=t.start.bind(t);i.push(r);var a=t.duration.end;if(a&&!isNaN(a)||(a=t.duration.end=1/0),isFinite(a)){var o=this._initializeTimelinePosition(this._timeLineActionsLookup[e],a),u=t.end.bind(t);o.push(u)}}},{key:"_initializeUriLookup",value:function(e,t){return e[t]||(e[t]={}),e[t]}},{key:"_initializeTimelinePosition",value:function(e,t){return e[t]||(e[t]=[]),e[t]}},{key:"_executeActions",value:function(e,t){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return i<e.length?e[i][t]().then(function(){return n._executeActions(e,t,++i)}):new Promise(function(e){e()})}},{key:"_handleRequestEngineRoot",value:function(e,t){t((0,a.default)(e))}},{key:"_handleRequestTimelineUri",value:function(t,n,e){var i=this;n=n||0,e=e||0,this.timelineProvider.stop(),this._cleanUpTimeline().then(function(){var e=i.configuration.timelines[t];i._currentTimelineUri=e.uri,i.timelineProvider.loop=e.loop,!i.timelineProvider.loop&&0<n&&i.timelineProvider.once(o.default.FIRST_FRAME,function(){i.timelineProvider.pause(),i.eventbus.broadcastForTopic(o.default.DURATION,i.timelineProvider.playerid,[i.getDuration()]),i._executeStartActions().then(function(){i.timelineProvider.seek(n),i._onSeekHandler(Math.floor,{offset:n})})}),i.timelineProvider.playlistItem(t)})}},{key:"_cleanUpTimeline",value:function(){return this._executeRelevantActions(this._getActiveActions,"end")}},{key:"_executeStartActions",value:function(){return this._executeRelevantActions(this._getActionsForPosition.bind(this,0),"start")}},{key:"_getActionsForPosition",value:function(t,e){return e.filter(function(e){return!e.active&&e.duration.start<=t&&e.duration.end>=t})}},{key:"_getActiveActions",value:function(e){return e.filter(function(e){return e.active}).sort(function(e,t){return t.duration.start<e.duration.start?-1:t.duration.start>e.duration.start?1:0})}},{key:"_executeRelevantActions",value:function(e,t){var n=this._getRelevantTimelineActions(),i=e.apply(this,[n]);return this._executeActions(i,t,0)}},{key:"_handleRequestTimelinePosition",value:function(e){e(Math.floor(this.timelineProvider.getPosition()))}},{key:"_handleTimelineComplete",value:function(){this._cleanUpTimeline()}},{key:"_handleExecuteTimelineAction",value:function(e,t,n){var i=this._getTimelineActionsForUri(e),r=i?i[t]:null;r&&(n?r.start():r.end())}},{key:"_resizeTimelineAction",value:function(e,t){var n=this._getTimelineActionsForUri(e),i=n?n[t]:null;i&&i.resize()}},{key:"_getRelevantTimelineActions",value:function(){return this._getTimelineActionsForUri(this._currentTimelineUri)}},{key:"_getTimelineActionsForUri",value:function(t){var n;return this.configuration.timelines.some(function(e){return e.uri===t&&(n=e.timelineActions,!0)}),n}},{key:"_onTimeHandler",value:function(e,t){if(!isNaN(t.position)){var n=e(t.position);this._lastPosition!==n&&(this._executeActionsForPosition(n),this.eventbus.broadcastForTopic(o.default.POSITION_UPDATE,this.timelineProvider.playerid,[n,this.timelineProvider.getDuration()])),this.eventbus.broadcastForTopic(o.default.TIME_UPDATE,this.timelineProvider.playerid,[t.position,this.timelineProvider.getDuration()])}}},{key:"_onSeekHandler",value:function(e,t){var n=this,i=e(t.offset);isNaN(i)||this._executeSeekActions(i).then(function(){n.timelineProvider.play()})}},{key:"_executeActionsForPosition",value:function(e){this._lastPosition=e;var t=this._timeLineActionsLookup[this._currentTimelineUri];if(t){var n=t[e];n&&n.forEach(function(e){e()})}}},{key:"_executeSeekActions",value:function(e){var t=this,n=this._getRelevantTimelineActions(),i=this._getActiveActions(n),r=this._getActionsForPosition(e,n),a=this._executeActions(i,"end",0);return new Promise(function(e){a.then(function(){t._executeActions(r,"start",0).then(function(){e()})})})}}]),i}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(20),r=i(n(2)),u=i(n(0)),s=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._init(e,t,n)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(i,[{key:"_init",value:function(e,t,n){this.resizeTimeout=-1,this.actionsLookup=null,this.importer=e,this.eventBus=n||new o.Eventbus,this.eventBus.on(u.default.REQUEST_INSTANCE,this._requestInstanceHandler.bind(this)),this.eventBus.on(u.default.REQUEST_ACTION,this._requestActionHandler.bind(this)),this.eventBus.on(u.default.REQUEST_FUNCTION,this._requestFunctionHandler.bind(this)),(0,r.default)(t).resize(this._resizeHandler.bind(this))}},{key:"destroy",value:function(){this.eventBus.clear(),this.eventBus=null}},{key:"_resizeHandler",value:function(){var e=this;-1<this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.eventBus.broadcast(u.default.RESIZE)},200)}},{key:"_importSystemEntryWithEventbusDependency",value:function(e){return new(this._importSystemEntry(e))(this.eventBus)}},{key:"_importSystemEntry",value:function(e){return this.importer.import(e)[e]}},{key:"_requestInstanceHandler",value:function(e,t){t(this._importSystemEntryWithEventbusDependency(e))}},{key:"_requestFunctionHandler",value:function(e,t){t(this._importSystemEntry(e))}},{key:"_requestActionHandler",value:function(e,t){var n=this.actionsLookup[e];n?t(n):(console.error("Unknown action: ".concat(e)),t(null))}},{key:"createEngine",value:function(e,t){var n=e.engine.systemName,i=this._importSystemEntry(n),r=null;e.eventActions&&e.eventActions.length&&(r=new o.ActionRegistryEventbusListener,this.eventBus.registerEventlistener(r)),this.eventBus.registerInterceptor(u.default.REQUEST_TIMELINE_URI,new o.RequestVideoUriInterceptor(this.eventBus)),t=t||new s.default(this.importer,this.eventBus),this.actionsLookup=t.process(r,e);var a=new(this._importSystemEntry(e.timelineProviderSettings.systemName))(this.eventBus,e);return new i(e,this.eventBus,a)}}]),i}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Eventbus",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ActionRegistryEventbusListener",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"RequestVideoUriInterceptor",{enumerable:!0,get:function(){return a.default}});var i=o(n(13)),r=o(n(21)),a=o(n(22));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actionRegistry={}}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"registerAction",value:function(e,t,n){n&&n.length&&(t="".concat(t,":").concat(n)),this.actionRegistry[t]||(this.actionRegistry[t]=[]),this.actionRegistry[t].push(e)}},{key:"handleEvent",value:function(e,t,n){t&&t.length&&(e="".concat(e,":").concat(t));var i=this.actionRegistry[e];if(i){var r={eventArgs:n};i.forEach(function(e){e.start(r)})}}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventbus=e}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(t,[{key:"intercept",value:function(e){return this.eventbus.broadcast(r.default.BEFORE_REQUEST_TIMELINE_URI,e.slice()),e}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n(24)),r=u(n(33)),a=u(n(69)),o=u(n(6));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"getOperationNames",value:function(){return Object.keys(r)}},{key:"getControllerNames",value:function(){return Object.keys(i)}},{key:"getProviderNames",value:function(){return Object.keys(a)}},{key:"import",value:function(e){return r[e]?s({},e,r[e]):i[e]?s({},e,i[e]):a[e]?s({},e,a[e]):o[e]?s({},e,o[e]):null}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EventListenerController",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"LabelController",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"LottieController",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"NavigationController",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ProgressbarController",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"RoutingController",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"SubtitlesController",{enumerable:!0,get:function(){return l.default}});var i=c(n(25)),r=c(n(26)),a=c(n(27)),o=c(n(29)),u=c(n(30)),s=c(n(31)),l=c(n(32));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(2));var o=i(n(0)),u=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operationData=null,this.actionInstanceInfos=null,this.name="EventListenerController"}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"init",value:function(e){this.operationData={selectedElement:e.selectedElement,eventName:e.eventName,actions:e.actions.slice(),actionOperationData:e.actionOperationData?(0,u.default)(e.actionOperationData):void 0}}},{key:"attach",value:function(r){var a=this,e=this.operationData,t=e.selectedElement,n=e.actions,i=e.eventName;this.actionInstanceInfos||(this.actionInstanceInfos=[],n.forEach(function(e){var t=l(a._isStartAction(e),2),n=t[0],i=t[1];r.broadcast(o.default.REQUEST_ACTION,[i,function(e){a.actionInstanceInfos.push({start:n,action:e})}])}),"SELECT"===this._getElementTagName(t)?t.on(i,this._selectEventHandler.bind(this)):t.on(i,this._eventHandler.bind(this)))}},{key:"_getElementTagName",value:function(e){return(e.length?e[0].tagName:e.tagName).toUpperCase()}},{key:"_isStartAction",value:function(e){return"end:"===e.substr(0,"end:".length)?[!1,e.substr("end:".length)]:[!0,e]}},{key:"_eventHandler",value:function(e){var t=this.operationData.actionOperationData?(0,u.default)(this.operationData.actionOperationData):{};e.target&&(t.targetValue=e.target.value),this._executeAction(this.actionInstanceInfos,t,0)}},{key:"_executeAction",value:function(t,n,i){var r=this;if(i<t.length){var e=t[i],a=e.action;(e.start?a.start.bind(a):a.end.bind(a))(n).then(function(e){return r._executeAction(t,s(n,e),++i)})}}},{key:"_selectEventHandler",value:function(e){for(var t=e.target,n=0,i=t.length;n<i;n++){var r=t[n];if(r.selected){var a=this.operationData.actionOperationData?(0,u.default)(this.operationData.actionOperationData):{};this._executeAction(this.actionInstanceInfos,s({eventArgs:[r.value]},a),0);break}}}},{key:"detach",value:function(e){this.operationData.selectedElement.off(this.operationData.eventName)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=[],this.currentLanguage=null,this.operationData=null,this.labelData={},this.name="LabelController"}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"init",value:function(e){this.operationData=a({},e)}},{key:"attach",value:function(e){var t=this;e.broadcast(r.default.REQUEST_CURRENT_LANGUAGE,[function(e){t.currentLanguage=e}]),e.broadcast(r.default.REQUEST_LABEL_COLLECTION,[this.operationData.labelId,function(e){t.createTextDataLookup(e)}]),this.setLabel(),this.listeners.push(e.on(r.default.LANGUAGE_CHANGE,this.handleLanguageChange.bind(this)))}},{key:"setLabel",value:function(){this.operationData.selectedElement.html(this.labelData[this.currentLanguage])}},{key:"detach",value:function(e){this.listeners.forEach(function(e){e()})}},{key:"handleLanguageChange",value:function(e){this.currentLanguage=e,this.setLabel()}},{key:"createTextDataLookup",value:function(e){var t=this;e.forEach(function(e){t.labelData[e.code]=e.label})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(28))&&i.__esModule?i:{default:i};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="LottieController",this.currentLanguage=null,this.labelData={},this.listeners=[],this.anim=null,this.operationData=null,this.serializedData=null,this.serializedIEData=null,this.animationData=null,this.freezePosition=-1,this.endPosition=-1}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"init",value:function(e){this.operationData={selectedElement:e.selectedElement,renderer:e.renderer,loop:e.loop,autoplay:e.autoplay,animationData:e.animationData,json:e.json,labelIds:e.labelIds,viewBox:e.viewBox},-1<e.url.indexOf("[")&&this.parseFilename(e.url),this.serializedData=this.operationData.json?JSON.stringify(this.operationData.json):JSON.stringify(this.operationData.animationData),this.operationData.iefallback&&(this.serializedIEData=JSON.stringify(this.operationData.iefallback))}},{key:"parseFilename",value:function(e){var n=this;e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1).split(",").forEach(function(e){var t=e.split("=");"freeze"===t[0]?n.freezePosition=+t[1]:"end"===t[0]&&(n.endPosition=+t[1])})}},{key:"attach",value:function(e){if(this.operationData.labelIds&&this.operationData.labelIds.length){var t={};e.broadcast("request-current-language",[t]),this.currentLanguage=t.language,this.listeners.push(e.on("language-change",this.handleLanguageChange.bind(this))),e.broadcast("request-label-collections",[this.operationData.labelIds,t]),this.createTextDataLookup(t.labelCollections)}this.createAnimation()}},{key:"detach",value:function(e){this.listeners.forEach(function(e){e()}),this.anim&&(-1<this.endPosition?(this.anim.onComplete=this.destroy.bind(this),this.anim.playSegments([this.freezePosition,this.endPosition],!0)):this.anim.destroy())}},{key:"destroy",value:function(){this.anim&&(this.anim.destroy(),this.anim=null)}},{key:"createAnimation",value:function(){var t=this;this.anim&&this.anim.destroy();var n=this.isIE()?this.serializedIEData:this.serializedData,e=this.operationData.labelIds;e&&e.length&&e.forEach(function(e){n=n.split("!!".concat(e,"!!")).join(t.labelData[e][t.currentLanguage])});var i=JSON.parse(n),r={autoplay:this.operationData.autoplay,container:this.operationData.selectedElement[0],loop:this.operationData.loop,renderer:this.operationData.renderer,animationData:i};this.anim=a.default.loadAnimation(r),this.endPosition<0&&(this.endPosition=this.anim.timeCompleted),-1<this.freezePosition&&this.anim.playSegments([0,this.freezePosition],!0),this.operationData.viewBox&&this.operationData.selectedElement.find("svg").attr("viewBox",this.operationData.viewBox)}},{key:"createTextDataLookup",value:function(e){var n=this;e.forEach(function(e,t){e.forEach(function(e){n.labelData[n.operationData.labelIds[t]][e.code]=e.label})})}},{key:"handleLanguageChange",value:function(e){this.currentLanguage=e,this.createAnimation()}},{key:"isIE",value:function(){var e=!!document.documentMode;return!e&&!!window.StyleMedia||e}}]),e}();t.default=o},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(2))&&i.__esModule?i:{default:i};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="NavigationController",this.playerId=null,this.navigation=null,this.navLookup={},this.navVidIdLookup={},this.ctrlLookup={},this.activeNavigationPoint=null,this.labelControllers=null,this.eventhandlers=null,this.eventbus=null,this.container=null}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"init",value:function(e){this.container=e.selectedElement,this.playerId=e.playerId,this.navigation=this.buildNavigationData(e.json)}},{key:"attach",value:function(e){this.eventhandlers=[],this.labelControllers=[],this.eventhandlers.push(e.on("navigate-to-video-url",this.handleNavigateVideoUrl.bind(this))),this.eventhandlers.push(e.on("highlight-navigation",this.highlightMenu.bind(this))),this.eventhandlers.push(e.on("request-current-navigation",this.handleRequestCurrentNavigation.bind(this))),this.eventhandlers.push(e.on("video-complete",this.handleVideoComplete.bind(this),this.playerId)),this.eventbus=e,this.buildHtml(this.container,this.navigation),this.initHistory.bind(this)}},{key:"initHistory",value:function(){this.activeNavigationPoint=this.navVidIdLookup[0];var e=this.getQueryVariable(0),t=0;e&&(t=this.navLookup[e].videoUrlIndex);this.highlightMenu(t)}},{key:"getQueryVariable",value:function(e){var t=window.location.href,n=t.indexOf("#");if(-1<n){var i=t.substring(n+2);if(i)return i.split("/")[e]}return null}},{key:"handleRequestCurrentNavigation",value:function(e){e({navigationData:this.activeNavigationPoint,title:this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]})}},{key:"detach",value:function(t){this.eventhandlers&&this.eventhandlers.forEach(function(e){e()}),this.labelControllers.forEach(function(e){e.detach(t)}),this.labelControllers.length=0,this.eventbus=null,this.container=null,window.onpopstate=null}},{key:"pushCurrentState",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,t={navigationData:this.activeNavigationPoint,title:this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]};-1<e&&(t.position=e),this.eventbus.broadcast("push-history-state",[t])}},{key:"buildHtml",value:function(e,t){var n=(0,a.default)("<ul/>");t.forEach(this.addNavElement.bind(this,n)),e.append(n)}},{key:"addNavElement",value:function(e,t){if(t.visible){var n=(0,a.default)("<li/>"),i=(0,a.default)("<a href='javascript:;' id='nav_".concat(t.videoUrlIndex,"'/>"));if(n.append(i),this.addLabel(i,t.labelId),this.addClickHandler(i,t.videoUrlIndex),t.children){var r=(0,a.default)("<ul/>");t.children.forEach(this.addNavElement.bind(this,r)),n.append(r)}e.append(n)}}},{key:"addClickHandler",value:function(e,t){e.mouseup(this.menuMouseupHandler.bind(this,t))}},{key:"menuMouseupHandler",value:function(e){var t=this.navVidIdLookup[e];t&&(this.eventbus.broadcast("request-video-url",[t.videoUrlIndex]),this.handleNavigateVideoUrl(t.videoUrlIndex))}},{key:"handleNavigateVideoUrl",value:function(e,t){t=t||0,this.highlightMenu(e),this.eventbus.broadcast("request-video-url",[e,t]),this.activeNavigationPoint=this.navVidIdLookup[e],this.pushCurrentState(t)}},{key:"highlightMenu",value:function(e){var t=(0,a.default)("#nav_".concat(e));t.length&&((0,a.default)(".current-menu-item").removeClass("current-menu-item"),t.addClass("current-menu-item"))}},{key:"handleVideoComplete",value:function(e){console.log("Navigation controller received video complete");var t=this.navVidIdLookup[e];t.autoNext?(console.log("NavigationController.handleVideoComplete - request-video-url: "+t.next.videoUrlIndex),this.eventbus.broadcast("request-video-url",[t.next.videoUrlIndex])):(console.log("handleVideoComplete - request-video-cleanup"),this.eventbus.broadcast("request-video-cleanup"))}},{key:"addLabel",value:function(e,t){var n=this,i={selectedElement:e,labelId:t};this.eventbus.broadcast("request-instance",["LabelController",function(e){e.init(i),e.attach(n.eventbus),n.labelControllers.push(e),n.ctrlLookup[t]=e}])}},{key:"buildNavigationData",value:function(n){var i=this,r=[];return n.navigationData.forEach(function(e,t){i.navLookup[e.id]=e,(i.navVidIdLookup[e.videoUrlIndex]=e).previous=n.navigationData[t-1]}),n.navigationData.forEach(function(e,t){e.nextId?(e.next=i.navLookup[e.nextId],delete e.nextId):e.next=n.navigationData[t+1]}),n.roots.forEach(function(e){var t=i.navLookup[e];t.children&&(t.children=t.children.map(function(e){return i.navLookup[e]})),r.push(t)}),r}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectedElement=null,this.textElement=null,this.detachers=[],this.name="ProgressbarController"}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"init",value:function(e){this.selectedElement=e.selectedElement,this.playerId=e.playerId,this.textElement=e.textElement}},{key:"attach",value:function(e){var t=this;this.detachers.push(e.on(r.default.POSITION_UPDATE,this.positionUpdateHandler.bind(this),this.playerId));var n=this.clickHandler.bind(this);this.selectedElement.on("click",n),this.detachers.push(function(){return t.selectedElement.off("click")},n)}},{key:"detach",value:function(e){this.detacher.forEach(function(e){e()})}},{key:"positionUpdateHandler",value:function(e,t){var n=100/t*e;this.selectedElement&&this.selectedElement.css("width","".concat(n,"%")),n=Math.floor(n),this.textElement&&this.textElement.text("".concat(n,"%"))}},{key:"clickHandler",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navLookup={},this.navVidIdLookup={},this.playerId=null,this.navigation=null,this.eventhandlers=[],this.eventbus=null,this.name="RoutingController"}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"init",value:function(e){this.navigation=this.buildNavigationData(e.json),this.playerId=e.playerId}},{key:"attach",value:function(e){this.eventhandlers.push(e.on("before-request-video-url",this.handleBeforeRequestVideoUrl.bind(this))),this.eventhandlers.push(e.on("push-history-state",this.handlePushHistoryState.bind(this))),this.eventbus=e,window.onpopstate=this.handlePopstate.bind(this);var t=this.getQueryVariable(0);if(t){var n=this.navLookup[t],i=this.getQueryVariable(1);i=i?+i:0,this.eventbus.broadcast("request-video-url",[n.videoUrlIndex,i,!0])}else window.history.pushState({navigationId:this.navigation[0].id},"","#/".concat(this.navigation[0].id))}},{key:"handlePopstate",value:function(e){var t=e.state?e.state.navigationId:this.navigation[0].id,n=e.state?e.state.position:0,i=this.navLookup[t];this.eventbus.broadcast("highlight-navigation",[i.videoUrlIndex]),this.eventbus.broadcast("request-video-url",[i.videoUrlIndex,n,!0])}},{key:"detach",value:function(e){this.eventhandlers&&this.eventhandlers.forEach(function(e){e()}),this.eventbus=null}},{key:"handleBeforeRequestVideoUrl",value:function(e,t,n){var i=this;if(t=t||0,!(n=void 0!==n&&n)){this.eventbus.broadcast("request-current-navigation",[function(e){i.pushState(e)}])}}},{key:"getQueryVariable",value:function(e){var t=window.location.href,n=t.indexOf("#");if(-1<n){var i=t.substring(n+2);if(i)return i.split("/")[e]}return null}},{key:"handlePushHistoryState",value:function(e){this.pushState(e)}},{key:"pushState",value:function(e){if(e&&e.navigationData&&e.navigationData.visible){var t=void 0!==e.position?e.position:-1;if(t<0){this.eventbus.broadcast("request-current-video-position",[function(e){t=3<e?e-3:0}])}var n=window.history.state;n&&n.navigationId!==e.navigationData.id?window.history.pushState({navigationId:e.navigationData.id,position:t},e.title,"#/".concat(e.navigationData.id,"/").concat(t)):n&&n.navigationId===e.navigationData.id?window.history.replaceState({navigationId:n.navigationId,position:t},e.title,"#/".concat(n.navigationId,"/").concat(t)):window.history.pushState({navigationId:e.navigationData.id,position:t},e.title,"#/".concat(e.navigationData.id,"/").concat(t)),window.document.title=e.title}}},{key:"buildNavigationData",value:function(n){var i=this,r=[];return n.navigationData.forEach(function(e,t){i.navLookup[e.id]=e,(i.navVidIdLookup[e.videoUrlIndex]=e).previous=n.navigationData[t-1]}),n.navigationData.forEach(function(e,t){e.nextId?(e.next=i.navLookup[e.nextId],delete e.nextId):e.next=n.navigationData[t+1]}),n.roots.forEach(function(e){var t=i.navLookup[e];t.children&&(t.children=t.children.map(function(e){return i.navLookup[e]})),r.push(t)}),r}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actionLookup=null,this.currentLanguage=null,this.lastFunc=null,this.name="SubtitlesController"}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"attach",value:function(e){var t=e.on("time",this.onTimeHandler.bind(this)),n=e.on("language-change",this.languageChangeHandler.bind(this));this.internalDetach=this.internalDetach.bind(this,[t,n])}},{key:"detach",value:function(e){this.internalDetach()}},{key:"internalDetach",value:function(e){e&&e.forEach(function(e){e()})}},{key:"languageChangeHandler",value:function(e){this.currentLanguage=e,this.lastFunc&&this.lastFunc()}},{key:"removeTitle",value:function(e){e.text(""),this.lastFunc=null}},{key:"onTimeHandler",value:function(e){var t=this.actionLookup[e];t&&(t(),this.lastFunc=t)}},{key:"setTitle",value:function(e,t){e.text(t[this.currentLanguage])}},{key:"createActionLookup",value:function(e,t){for(var n=e.subtitleData,i=n[0].titles,r={},a=0,o=i.length;a<o;a++){for(var u={},s=0,l=n.length;s<l;s++){var c=n[s];u[c.lang]=c.titles[a].text}r[i[a].duration.start]=this.setTitle.bind(this,t,u),r[i[a].duration.end]=this.removeTitle}return r}},{key:"init",value:function(e){var t=e.selectedElement;this.removeTitle=this.removeTitle.bind(this,t),this.currentLanguage=e.language,this.actionLookup=this.createActionLookup(e,t)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addClass",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"addControllerToElement",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"addOptionList",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"animate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"animateWithClass",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"broadcastEvent",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"clearElement",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"clearOperationData",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"customFunction",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"endAction",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"extendController",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getControllerFromElement",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getControllerInstance",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"getElementDimensions",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"loadJSON",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"removeClass",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"removeControllerFromElement",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"removeElement",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"removePropertiesFromOperationData",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"reparentElement",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"requestAction",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"resizeAction",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"selectElement",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"setElementAttributes",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"setElementContent",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"setOperationData",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(t,"setStyle",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"startAction",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"toggleClass",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"toggleElement",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"wait",{enumerable:!0,get:function(){return C.default}});var i=N(n(34)),r=N(n(35)),a=N(n(37)),o=N(n(38)),u=N(n(39)),s=N(n(40)),l=N(n(43)),c=N(n(44)),f=N(n(45)),d=N(n(46)),h=N(n(47)),v=N(n(48)),p=N(n(49)),y=N(n(50)),b=N(n(52)),m=N(n(53)),g=N(n(54)),_=N(n(55)),E=N(n(56)),O=N(n(57)),P=N(n(58)),k=N(n(59)),T=N(n(60)),w=N(n(61)),I=N(n(62)),j=N(n(63)),L=N(n(64)),A=N(n(65)),S=N(n(66)),M=N(n(67)),C=N(n(68));function N(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.selectedElement,i=e.className;return n.addClass(i),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(36)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}function r(n,e){var t=n.selectedElement,i=n.controllerInstance;(0,a.default)(t,i),i.init(n);var r=i.attach(e);return r?new Promise(function(t,e){r.then(function(e){(0,o.default)(t,n,e)},e)}):n}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(5);function r(e,t){e.data("chronoEngineControllers")||e.data("chronoEngineControllers",[]),(0,i.getElementControllers)(e).push(t)}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.valueProperty,i=e.labelProperty,r=e.defaultIndex,a=e.defaultValue,o=e.optionData,u=e.selectedElement,s=function(e,t,n,i,r,a){var o="";return i?o=r[e]===i?" selected":"":n&&(o=a===n?" selected":""),"<option value='".concat(r[e],"'").concat(o,">").concat(r[t],"</option>")}.bind(null,n,i,r,a),l=o.map(s);return u.html(l),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,u=(i=n(1))&&i.__esModule?i:{default:i};function r(n,e){var i=n.animationEasing,r=n.selectedElement,a=n.animationProperties,o=n.animationDuration;return new Promise(function(e,t){try{i?r.animate(a,o,i,function(){(0,u.default)(e,{},n)}):r.animate(a,o,function(){(0,u.default)(e,{},n)})}catch(e){t(e)}})}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(1))&&i.__esModule?i:{default:i};function r(n,e){var i=n.selectedElement,r=n.className,a=n.removeClass;a=void 0===a||a;var t=new Promise(function(e,t){try{i.one("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd",function(){a&&i.removeClass(r),(0,o.default)(e,{},n)})}catch(e){t(e)}});return i.addClass(r),t}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(41)),u=i(n(42));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=e.eventArgs,i=e.eventTopic,r=e.eventName,a=(0,o.default)(e,n);i?t.broadcastForTopic(r,i,a):t.broadcast(r,a),(0,u.default)(e)}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(14))&&i.__esModule?i:{default:i};function a(e,t){if(t){var n=r.default.bind(null,e);return t.map(n)}}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e){delete e.eventName,delete e.eventTopic,delete e.eventArgs}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){return e.selectedElement.empty(),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){return{}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(1)),u=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function r(r,a){var e=r.systemName;return new Promise(function(n,i){a.broadcast(u.default.REQUEST_FUNCTION,[e,function(e){var t=e(r,a);t?t.then(function(){(0,o.default)(n,{},r)},i):(0,o.default)(n,{},r)}])})}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(3)),u=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}function r(i,e){var r=i.actionInstance,a=i.actionOperationData;return delete i.actionOperationData,new Promise(function(e,t){var n=(0,o.default)(i,a);r.end(n).then(function(){(0,u.default)(e,i)},t)})}t.default=r},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.controllerInstance,i=e.controllerExtension;return e.controllerInstance=r(n,i),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(5);function i(e,t){var n=e.selectedElement,i=e.controllerName,r=(0,o.getElementControllers)(n),a=null;return r.some(function(e){return e.name===i&&(a=e,!0)}),a||console.warn("controller for name '".concat(i,"' was not found on the given element")),e.controllerInstance=a,e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(t,e){var n=t.systemName,i=t.propertyName;return i=i||"controllerInstance",e.broadcast(r.default.REQUEST_INSTANCE,[n,function(e){t[i]=e}]),t}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(51))&&i.__esModule?i:{default:i};function r(e,t){var n=e.selectedElement,i=e.dimensions,r=e.modifier;return(i=i||{}).width=n.innerWidth(),i.height=n.innerHeight(),0===i.height&&(i.height=i.width),r&&(0,a.default)(i,r),e.dimensions=i,e}t.default=r},function(e,t,n){"use strict";function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=null;if(-1<t.indexOf("|")){var i=d(t.split("|"),2);t=i[0],n=i[1]}var r=t.substr(0,1),a=d(function(e){var t=1,n=e.substr(e.length-1,1);"h"!==n&&"w"!==n&&"%"!==n&&(n=null);var i="%"===n;return i&&(t=2,"h"!==(n=e.substr(e.length-t,1))&&"w"!==n&&(n=null,t=1)),[n,t,i]}(t),3),o=a[0],u=a[1],s=a[2],l=parseInt(null!==o?t.substr(1,t.length-u-1):t.substr(1,t.length),10),c=l,f=l;s&&(c=e.width/100*l,f=e.height/100*l),e=function(e,t,n,i,r){switch(t){case"+":switch(n){case"h":e.height+=r;break;case"w":e.width+=i;break;default:e.height+=r,e.width+=i}break;case"-":switch(n){case"h":e.height-=r;break;case"w":e.width-=i;break;default:e.height-=r,e.width-=i}break;case"/":switch(n){case"h":e.height/=r;break;case"w":e.width/=i;break;default:e.height/=r,e.width/=i}break;case"*":switch(n){case"h":e.height*=r;break;case"w":e.width*=i;break;default:e.height*=r,e.width*=i}break;default:console.error("Unknown operator found: ".concat(t))}return e}(e,r,o,c,f),n&&function(e,t){var n=e.substr(0,1),i=e.substr(e.indexOf("[")+1,e.indexOf("]")-e.indexOf("[")-1).split("=")[1].split("-");"h"===n?t.height=t.width/+i[0]*+i[1]:"w"===n&&(t.width=t.height/+i[1]*+i[0])}(n,e)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(n,i,e){var r=i.url,t=i.cache,a=i.propertyName;return a=a||"json",t&&n[r]?(i[a]=n[r],i):new Promise(function(t,e){fetch(r).then(function(e){n[r]=i[a]=e.body,t(i)}).catch(e)})}.bind(null,{});t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.selectedElement,i=e.className;return n.removeClass(i),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(5);function i(e,t){var n=e.selectedElement,i=e.controllerName,r=(0,u.getElementControllers)(n);if(r){var a=null;if(r.some(function(e){return e.name===i&&(a=e,!0)}),a){var o=r.indexOf(a);-1<o&&r.splice(o,1),a.detach(t)}}return e}t.default=i},function(e,t,n){"use strict";function i(e,t){return e.selectedElement.remove(),e}Object.defineProperty(t,"__esModule",{value:!0}),t.removeElement=i,t.default=void 0;var r=i;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(t,e){return t.propertyNames.forEach(function(e){delete t[e]}),delete t.propertyNames,t}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.selectedElement,i=e.newParentSelector;n.remove().appendTo(i)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(0))&&i.__esModule?i:{default:i};function a(t,e){var n=t.actionName;return e.broadcast(r.default.REQUEST_ACTION,[n,function(e){t.actionInstance=e}]),t}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(3))&&i.__esModule?i:{default:i};function r(e,t){var n=e,i=n.actionInstance,r=n.actionOperationData;return e=(0,a.default)(e,r),i.resize?i.resize(e):e}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(0))&&i.__esModule?i:{default:i};function o(e,t,n,i){var r=e.find(t);r.length||console.warn("selector '".concat(t,"' wasn't found!")),n[i]=r,n.hasOwnProperty("propertyName")&&delete n.propertyName}function r(t,e){var n=t.selector,i=t.propertyName,r=t.useExistingAsRoot;if(!n)throw new Error("selector is undefined!");return i=i||"selectedElement",r&&t[i]?o(t[i],n,t,i):e.broadcast(a.default.REQUEST_ENGINE_ROOT,[function(e){o(e,n,t,i)}]),t}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.attributes,i=e.selectedElement;for(var r in n)n.hasOwnProperty(r)&&i.attr(r,n[r]);return e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.append,i=e.selectedElement,r=e.template;return n?i.append(r):i.html(r),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(15))&&i.__esModule?i:{default:i};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){return delete(e=a(e,(0,r.default)(e,e.properties))).properties,e}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(15))&&i.__esModule?i:{default:i};function a(e,t){var n=(0,r.default)(e,e.properties);return e.selectedElement.css(n),e}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(3)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}function r(n,e){var t=n,i=t.actionInstance,r=t.actionOperationData;return new Promise(function(e,t){n=(0,a.default)(n,r),i.start(n).then(function(){(0,o.default)(e,n)},t)})}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){var n=e.selectedElement,i=e.className;return n.toggleClass(i),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function i(e,t){return e.selectedElement.toggle(),e}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(1))&&i.__esModule?i:{default:i};function a(t,e){var n=t.milliseconds;return new Promise(function(e){setTimeout(function(){(0,r.default)(e,t)},n)})}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JwPlayerTimelineProvider",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"RequestAnimationFrameTimelineProvider",{enumerable:!0,get:function(){return r.default}});var i=a(n(70)),r=a(n(71));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n(2)),i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.eventbus=e,this.config=t,this.playerid=t.playerSettings.selector,this.loop=!1,this.player=null,this.currentLoopHandler=null,this._eventbusListeners=[],this._addEventListeners()}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(n,[{key:"_extractUrls",value:function(e){return e.timelines.filter(function(e){return"video"===e.type}).map(function(e){return e.uri})}},{key:"init",value:function(e){var n=this,t=this._extractUrls(this.config),i=window.jwplayer,r=(0,s.default)("#".concat(e));if(!r.length)throw new Error("videoplayer selector '".concat(e,"' not found"));var a=r.innerWidth(),o=r.innerHeight();0===a&&(a=100),0===o&&(o=300),this.player=i(this.config.playerSettings.selector),this.player.setup({file:t[0],image:this.config.playerSettings.poster,height:o,width:a,controls:!0,autostart:!1,displaytitle:!1,displaydescription:!1,nextUpDisplay:!1,abouttext:"Rosetta Group",aboutlink:"http://www.rosettagroup.nl",stretching:"fill",repeat:!1});var u=[];return t.forEach(function(e){u.push({file:e,title:e,image:n.config.playerSettings.poster})}),new Promise(function(e,t){n.player.once("ready",function(){n._handlePlayerReady(e)}),n.player.load(u)})}},{key:"_handlePlayerReady",value:function(e){var t=this;this.player.once("firstFrame",function(){t.player.pause(),t.eventbus.broadcastForTopic(i.default.DURATION,t.player.playerid,[t.getDuration()]),e(t)}),this.player.on(i.default.TIME,this._loopHandler.bind(this,Math.floor)),this.player.on(i.default.SEEKED,this._seekedHandler.bind(this)),this.player.on(i.default.COMPLETE,this._handlePlayerComplete.bind(this)),setTimeout(function(){t.player.play()},10)}},{key:"_handlePlayerComplete",value:function(){this.loop||(this.stop(),this.eventbus.broadcastForTopic(i.default.COMPLETE,this.playerid,[this.player.getPlaylistIndex()]))}},{key:"_seekedHandler",value:function(){this.eventbus.broadcastForTopic(i.default.SEEKED,this.playerid,[this.getPosition(),this.getDuration()])}},{key:"destroy",value:function(){this.player.remove(),this._eventbusListeners.forEach(function(e){return e()})}},{key:"_loopHandler",value:function(e,t){var n=e(t.position);this.loop&&n===e(this.player.getDuration()-1)&&this.seek(0)}},{key:"_timeResetLoopHandler",value:function(e){this.loop&&this.seek(0)}},{key:"_addEventListeners",value:function(){this._eventbusListeners.push(this.eventbus.on(i.default.PLAY_REQUEST,this.play.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.STOP_REQUEST,this.stop.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.PAUSE_REQUEST,this.pause.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.SEEK_REQUEST,this.seek.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.RESIZE_REQUEST,this.resize.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.CONTAINER_REQUEST,this._container.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(i.default.DURATION_REQUEST,this.duration.bind(this),this.playerid))}},{key:"_container",value:function(e){var t="";"html5"!==this.player.getProvider().name&&(t="_wrapper"),e((0,s.default)("#".concat(this.playerid).concat(t)))}},{key:"play",value:function(){this.player.play(),this.eventbus.broadcastForTopic(i.default.PLAY,this.playerid)}},{key:"stop",value:function(){this.player.stop(),this.eventbus.broadcastForTopic(i.default.STOP,this.playerid)}},{key:"pause",value:function(){this.player.pause(),this.eventbus.broadcastForTopic(i.default.PAUSE,this.playerid)}},{key:"seek",value:function(e){var t=this.player.getPosition();this.player.seek(e),this.eventbus.broadcastForTopic(i.default.SEEK,this.playerid,[e,t,this.player.getDuration()])}},{key:"resize",value:function(e,t){this.player.resize(e,t),this.eventbus.broadcastForTopic(i.default.RESIZE,this.playerid,[e,t])}},{key:"duration",value:function(e){e(Math.floor(this.getDuration()))}},{key:"playlistItem",value:function(e){this.player.playlistItem(e)}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){this.player.off(e,t)}},{key:"on",value:function(e,t){this.player.on(e,t)}},{key:"getPosition",value:function(){return this.player.getPosition()}},{key:"getPlaylistIndex",value:function(){return this.player.getPlaylistIndex()}},{key:"getState",value:function(){return this.player.getState()}},{key:"getDuration",value:function(){return this.player.getDuration()}},{key:"getMute",value:function(){return this.player.getMute()}},{key:"getVolume",value:function(){return this.player.getVolume()}},{key:"setMute",value:function(e){this.player.setMute(e)}},{key:"setVolume",value:function(e){this.player.setVolume(e)}}]),n}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.eventbus=e,this.config=t,this.requestID=null,this.last=0,this.current=0,this._updateBound=this._update.bind(this),this.loop=!1,this._eventbusListeners=[],this.playerid="provider".concat(1e3*Math.random()),this._addEventListeners(),this.playlist=[],this.currentPlaylistItem=null,this.firstFrame=!0,this.paused=!0}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(n,[{key:"_extractPlaylist",value:function(e){return e.timelines.filter(function(e){return"animation"===e.type}).map(function(e){return e})}},{key:"playlistItem",value:function(e){e<0||e>this.playlist.length||(this.currentPlaylistItem=this.playlist[e],this.firstFrame=!0,this.reset())}},{key:"_addEventListeners",value:function(){this._eventbusListeners.push(this.eventbus.on(r.default.PLAY_REQUEST,this.play.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.STOP_REQUEST,this.stop.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.PAUSE_REQUEST,this.pause.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.SEEK_REQUEST,this.seek.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.RESIZE_REQUEST,this._resize.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.CONTAINER_REQUEST,this._container.bind(this),this.playerid)),this._eventbusListeners.push(this.eventbus.on(r.default.DURATION_REQUEST,this.requestDurationHandler.bind(this),this.playerid))}},{key:"_update",value:function(e){if(this.paused){if(!this.last||1e3<=e-this.last){if(!this.last&&this.firstFrame&&(this.firstFrame=!1,this.eventbus.broadcastForTopic(r.default.FIRSTFRAME,this.playerid)),this.last=e,this.current++,this.current>this.currentPlaylistItem.duration){if(!this.loop)return this.stop(),void this.eventbus.broadcastForTopic(r.default.COMPLETE,this.playerid);this._reset()}this.eventbus.broadcastForTopic(r.default.TIME,this.playerid,this.current)}this.requestID=requestAnimationFrame(this._updateBound)}}},{key:"_start",value:function(){this.requestID||(this.requestID=requestAnimationFrame(this._updateBound))}},{key:"_reset",value:function(){this._cancelAnimationFrame(),this.last=0,this.current=0}},{key:"_resize",value:function(){console.error("Not implemented yet")}},{key:"_container",value:function(e){e(this.container)}},{key:"_cancelAnimationFrame",value:function(){this.requestID&&(cancelAnimationFrame(this.requestID),this.requestID=null)}},{key:"init",value:function(){if(this.playlist=this._extractPlaylist(this.config),this.currentPlaylistItem=this.playlist[0],this.container=(0,i.default)(this.currentPlaylistItem.selector),!this.container.length)throw new Error("timeline selector '".concat(selector,"' not found"));return new Promise(function(e){e()})}},{key:"destroy",value:function(){this.stop(),this._eventbusListeners.forEach(function(e){e()})}},{key:"play",value:function(){this.paused=!1,this._start(),this.eventbus.broadcastForTopic(r.default.PLAY,this.playerid)}},{key:"stop",value:function(){this._cancelAnimationFrame(),this.eventbus.broadcastForTopic(r.default.STOP,this.playerid)}},{key:"pause",value:function(){this.paused=!0,this.eventbus.broadcastForTopic(r.default.PAUSE,this.playerid)}},{key:"seek",value:function(e){e<0||e>this.currentPlaylistItem.duration||(this.eventbus.broadcastForTopic(r.default.SEEK,this.playerid),this.current=e,this.eventbus.broadcastForTopic(r.default.SEEKED,this.playerid))}},{key:"requestDurationHandler",value:function(e){e(this.currentPlaylistItem.duration)}},{key:"on",value:function(e,t){return this.eventbus.on(e,t,this.playerid)}},{key:"once",value:function(e,t){return this.eventbus.once(e,t,this.playerid)}}]),n}();t.default=u}])});