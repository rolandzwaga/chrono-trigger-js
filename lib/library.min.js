!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("lottie-web")):"function"==typeof define&&define.amd?define("library",["jquery","lottie-web"],e):"object"==typeof exports?exports.library=e(require("jquery"),require("lottie-web")):t.library=e(t[void 0],t[void 0])}(window,function(n,i){return function(n){var i={};function u(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,u),e.l=!0,e.exports}return u.m=n,u.c=i,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"e",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.e)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)u.d(n,i,function(t){return e[t]}.bind(null,i));return n},u.n=function(t){var e=t&&t.e?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u(u.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i)}i.PLAY_TOGGLE_REQUEST="timeline-play-toggle-request",i.PLAY_REQUEST="timeline-play-request",i.STOP_REQUEST="timeline-stop-request",i.PAUSE_REQUEST="timeline-pause-request",i.SEEK_REQUEST="timeline-seek-request",i.RESIZE_REQUEST="timeline-resize-request",i.CONTAINER_REQUEST="timeline-container-request",i.DURATION_REQUEST="timeline-duration-request",i.DURATION="timeline-duration",i.TIME="timeline-time",i.SEEKED="timeline-seeked",i.COMPLETE="timeline-complete",i.PLAY="timeline-play",i.STOP="timeline-stop",i.PAUSE="timeline-pause",i.SEEK="timeline-seek",i.RESIZE="timeline-resize",i.POSITION_UPDATE="timeline-position-update",i.TIME_UPDATE="timeline-time-update",i.REQUEST_INSTANCE="request-instance",i.REQUEST_ACTION="request-action",i.REQUEST_FUNCTION="request-function",i.REQUEST_TIMELINE_URI="request-timeline-uri",i.BEFORE_REQUEST_TIMELINE_URI="before-request-timeline-uri",i.REQUEST_ENGINE_ROOT="request-engine-root",i.REQUEST_CURRENT_TIMELINE_POSITION="request-current-timeline-position",i.REQUEST_TIMELINE_CLEANUP="request-timeline-cleanup",i.EXECUTE_TIMELINEACTION="execute-timelineaction",i.RESIZE_TIMELINEACTION="resize-timelineaction",i.REQUEST_LABEL_COLLECTION="request-label-collection",i.REQUEST_LABEL_COLLECTIONS="request-label-collections",i.REQUEST_CURRENT_LANGUAGE="request-current-language",i.LANGUAGE_CHANGE="language-change";var u=i;e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(3))&&i.e?i:{default:i};function r(t,e,n){t(n?(0,u.default)(e,n):e)}e.default=r},function(t,e){t.exports=n},function(t,e,n){"use strict";function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function u(t,e){return i(t,e)}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t){return JSON.parse(JSON.stringify(t))}e.default=i},function(t,e,n){"use strict";function i(t,e){return e.data(t)}Object.defineProperty(e,"e",{value:!0}),e.getElementData=i,e.getElementControllers=void 0;var u=i.bind(null,"chronoEngineControllers");e.getElementControllers=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"ConfigurationResolver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"ChronoTriggerEngine",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"EngineFactory",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"TimelineEventNames",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"LanguageManager",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"WebpackResourceImporter",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Eventbus",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var i=function(t){{if(t&&t.e)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};i.get||i.set?Object.defineProperty(e,n,i):e[n]=t[n]}return e.default=t,e}}(n(7)),u=f(n(10)),r=f(n(18)),o=f(n(19)),s=f(n(0)),a=f(n(12)),c=f(n(23)),l=f(n(13));function f(t){return t&&t.e?t:{default:t}}var h=i;e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"EndableAction",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"TimelineAction",{enumerable:!0,get:function(){return r.default}});var i=o(n(8)),u=o(n(9)),r=o(n(16));function o(t){return t&&t.e?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,c=(i=n(4))&&i.e?i:{default:i};function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=t.name,this.startOperations=t.startOperations,this.eventbus=e}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(n,[{key:"start",value:function(n){var i=this;return new Promise(function(t,e){i.executeOperation(i.startOperations,0,t,e,n)}).catch(function(t){throw console.error("Error in action start '".concat(i.name,"'")),t})}},{key:"executeOperation",value:function(e,n,i,u,t){var r=this;if(t=t||{},n<e.length){var o=e[n],s=l(t,o.operationData?(0,c.default)(o.operationData):{}),a=o.instance(s,this.eventbus);a.then?a.then(function(t){r.executeOperation(e,++n,i,u,t)}).catch(function(t){u(t)}):this.executeOperation(e,++n,i,u,a)}else i(t)}},{key:"resize",value:function(n){var i=this;return new Promise(function(t,e){i.executeResizeOperation(i.startOperations,0,t,e,n)})}},{key:"executeResizeOperation",value:function(e,n,i,u,t){var r=this;if(t=t||{},n<e.length){var o=e[n];if(o.resizeInstance){var s=l(t,o.operationData?(0,c.default)(o.operationData):{}),a=o.resizeInstance(s);a.then?a.then(function(t){r.executeResizeOperation(e,++n,i,u,t)}).catch(function(t){u(t)}):this.executeResizeOperation(e,++n,i,u,a)}else this.executeResizeOperation(e,++n,i,u,t)}else i(t)}}]),n}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(8))&&i.e?i:{default:i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=s(this,a(i).call(this,t,e))).endOperations=t.endOperations,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,u["default"]),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(i,[{key:"end",value:function(n){var i=this;if(this.endOperations&&this.endOperations.length){return new Promise(function(t,e){i.executeOperation(i.endOperations,0,t,e,n)}).catch(function(t){throw console.error("Error in action end'".concat(i.name,"'")),t})}return new Promise(function(t){t(n)})}}]),i}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=n(7),a=(i=n(17))&&i.e?i:{default:i};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.importer=t,this.eventbus=e}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"importSystemEntry",value:function(t){return this.importer.import(t)[t]}},{key:"process",value:function(t,e){var n={};return this.processConfiguration(e,e),this.resolveOperations(e),this.initializeTimelineActions(e),this.initializeInitActions(e,n),this.initializeActions(e,n),this.initializeEventActions(t,e),n}},{key:"initializeEventActions",value:function(n,t){var i=this;n&&t.eventActions&&(t.eventActions.forEach(function(t){var e=new u.Action(t,i.eventbus);n.registerAction(e,t.eventName,t.eventTopic)}),delete t.eventActions)}},{key:"initializeActions",value:function(t,n){var i=this;t.actions&&(t.actions.forEach(function(t){var e=new u.EndableAction(t,i.eventbus);n[t.name]=e}),delete t.actions)}},{key:"initializeInitActions",value:function(t,n){var i=this;t.initActions&&(t.initActions=t.initActions.map(function(t){var e=new u.EndableAction(t,i.eventbus);return n[t.name]=e}))}},{key:"initializeTimelineActions",value:function(t){t.timelines&&t.timelines.forEach(this.initializeTimelineAction.bind(this))}},{key:"initializeTimelineAction",value:function(t){var n=this;t.timelineActions&&(t.timelineActions=t.timelineActions.map(function(t){var e=new u.TimelineAction(t,n.eventbus);return e.endOperations||(e.endOperations=[]),e}))}},{key:"resolveOperations",value:function(t){var e=this,n=[];t.timelines&&t.timelines.forEach(function(t){n.push.apply(n,r(e.u(t.timelineActions)))}),this.u(t.initActions).concat(n).concat(this.u(t.actions)).concat(this.u(t.eventActions)).forEach(function(t){t.instance=e.importSystemEntry(t.systemName)})}},{key:"processConfiguration",value:function(e,n){var i=this;if(null!=e)if(e.constructor===Array)for(var t=0,u=e.length;t<u;t++)this.processConfiguration(e[t],n);else Object.keys(e).forEach(function(t){i.processConfigProperty(t,e,n)})}},{key:"processConfigProperty",value:function(t,e,n){var i=e[t];if("string"==typeof i){if(i.startsWith("config:")){var u=i.substr(7,i.length);e[t]=(0,a.default)(u,n)}else if(i.startsWith("template:")){var r=i.substr(9,i.length);e[t]=this.importSystemEntry(r)}else if(i.startsWith("json:")){var o=i.substr(5,i.length),s=this.importSystemEntry(o);e[t]=s}}else"object"===c(i)&&this.processConfiguration(e[t],n)}},{key:"_gatherOperations",value:function(t){var e=[];return t&&t.forEach(function(t){e=t.endOperations?e.concat(t.startOperations.concat(t.endOperations)):e.concat(t.startOperations)}),e}}]),n}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(i,t){if(!i)throw Error("properties arg cannot be null");if(!t)throw Error("sourceObject arg cannot be null");var u=t,r=null;return i.forEach(function(t,e){if(e===i.length-1){var n=t.split("+");1<n.length&&(t=n[0],r=n[1])}u=u[t]}),r?u+r:u}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function i(t,e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),!t||!t.length)throw new Error("language ctor arg cannot be null or have zero length");if(!e)throw new Error("labels ctor arg cannot be null");if(!n)throw new Error("eventbus ctor arg cannot be null");this.a={},this.f=t,this.h=[],this.createLabelLookup(e),this.addEventbusListeners(n)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(i,[{key:"addEventbusListeners",value:function(t){this.h.push(t.on(u.default.REQUEST_LABEL_COLLECTION,this.handleRequestLabelCollection.bind(this))),this.h.push(t.on(u.default.REQUEST_LABEL_COLLECTIONS,this.handleRequestLabelCollections.bind(this))),this.h.push(t.on(u.default.REQUEST_CURRENT_LANGUAGE,this.handleRequestCurrentLanguage.bind(this))),this.h.push(t.on(u.default.LANGUAGE_CHANGE,this.handleLanguageChange.bind(this)))}},{key:"handleRequestCurrentLanguage",value:function(t){t(this.f)}},{key:"handleRequestLabelCollection",value:function(t,e){e(this.a[t])}},{key:"handleRequestLabelCollections",value:function(t,e){var n=this;e(t.map(function(t){return n.a[t]}))}},{key:"handleLanguageChange",value:function(t){t&&t.length?this.f=t:console.error("Language cannot be changed to null or empty string")}},{key:"createLabelLookup",value:function(t){var e=this;t.forEach(function(t){e.a[t.id]=t.labels})}}]),i}();e.default=o},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clear()}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"clear",value:function(){this.eventHandlers={},this.eventListeners=[],this.eventInterceptors={}}},{key:"_getEventInterceptors",value:function(t,e){return e&&e.length&&(t="".concat(t,":").concat(e)),this.eventInterceptors[t]||(this.eventInterceptors[t]=[]),this.eventInterceptors[t]}},{key:"_getEventHandlers",value:function(t,e){return e&&e.length&&(t="".concat(t,":").concat(e)),this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t]}},{key:"on",value:function(t,e,n){var i=this;return this.v(t,n).push(e),function(){i.off(t,e,n)}}},{key:"once",value:function(e,n,i){var u=this;this.on(e,function t(){n.apply(void 0,arguments),u.off(e,t,i)},i)}},{key:"off",value:function(t,e,n){var i=this.v(t,n);if(i){var u=i.indexOf(e);-1<u&&i.splice(u,1)}}},{key:"broadcast",value:function(t,e){this.b(t,null,e)}},{key:"broadcastForTopic",value:function(t,e,n){this.b(t,e,n)}},{key:"registerEventlistener",value:function(t){this.eventListeners.push(t)}},{key:"registerInterceptor",value:function(t,e,n){this.y(t,n).push(e)}},{key:"_callHandlers",value:function(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];this.y(e,n).forEach(function(t){i=t.intercept(i)}),this.eventListeners.forEach(function(t){t.handleEvent(e,n,i)});var t=this.v(e,n);if(t)for(var u=0,r=t.length;u<r;u++)t[u].apply(t,o(i))}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(11))&&i.e?i:{default:i};function r(t,e){if(e&&e.toLowerCase&&e.toLowerCase().startsWith("operationdata.")){var n=e.split(".");return n.shift(),(0,u.default)(n,t)}return e}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=i(n(14)),s=i(n(4));function i(t){return t&&t.e?t:{default:t}}function u(t,e){var n=(0,s.default)(e),i=o.default.bind(null,t);for(var u in e){var r=e[u];n[u]=i(r)}return n}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(9))&&i.e?i:{default:i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(i){var u=Object.getOwnPropertyDescriptor(i,e);return u.get?u.get.call(n):u.value}})(t,e,n||t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=s(this,c(i).call(this,t,e))).active=!1,n.duration=t.duration,n.duration.start=+n.duration.start,n.duration.end=+n.duration.end,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(i,u["default"]),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(i,[{key:"start",value:function(){return!this.active||this.duration.end<0?(this.active=-1<this.duration.end,a(c(i.prototype),"start",this).call(this)):new Promise(function(t){t()})}},{key:"end",value:function(t){return this.active=!1,a(c(i.prototype),"end",this).call(this,t)}},{key:"resize",value:function(t){return this.active||this.duration.end<0?a(c(i.prototype),"resize",this).call(this,t):new Promise(function(t){t()})}}]),i}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(11))&&i.e?i:{default:i};function r(t,e){var n=t.split(".");return(0,u.default)(n,e)}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var u=i(n(12)),r=i(n(2)),o=i(n(0));function i(t){return t&&t.e?t:{default:t}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.k=t,this.O=e,this.j=n,this._={},this.h=[]}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(i,[{key:"init",value:function(){this.g(),this.w(),this.M=new u.default(this.k.language,this.k.labels,this.O);var t=this.k.timelines;return this.C=t&&t.length?t[0].uri:null,this.T(),this.q()}},{key:"_createLayoutTemplate",value:function(){var t=(0,r.default)(this.k.containerSelector);if(!t||!t.length)throw new Error("Container selector not found: ".concat(this.k.containerSelector));var e=this.k.layoutTemplate;e&&e.length?t.html(e):console.warning("layoutTemplate is empty, unable to create layout")}},{key:"_initializeTimelineProvider",value:function(){var e=this;if(this.k.timelineProviderSettings)return(0,r.default)("#".concat(this.k.timelineProviderSettings.selector)).length?new Promise(function(t){e.j.init().then(function(){e.A(e.k.initActions,"start").then(function(){e.j.on(o.default.TIME,e.S.bind(e,Math.floor)),e.j.on(o.default.SEEK,e.P.bind(e,Math.floor)),t(e.j)})})}):new Promise(function(t){t()})}},{key:"destroy",value:function(){this.k=null,this.O=null,this.j=null,this._=null,this.h.forEach(function(t){return t()}),this.j&&this.j.destroy()}},{key:"_addInitialisationListeners",value:function(){this.h.push(this.O.on(o.default.REQUEST_ENGINE_ROOT,this.L.bind(this,this.k.containerSelector))),this.h.push(this.O.on(o.default.REQUEST_TIMELINE_URI,this.N.bind(this))),this.h.push(this.O.on(o.default.REQUEST_CURRENT_TIMELINE_POSITION,this.R.bind(this))),this.h.push(this.O.on(o.default.REQUEST_TIMELINE_CLEANUP,this.x.bind(this))),this.h.push(this.O.on(o.default.EXECUTE_TIMELINEACTION,this.I.bind(this))),this.h.push(this.O.on(o.default.RESIZE_TIMELINEACTION,this.H.bind(this)))}},{key:"_createTimelineLookup",value:function(){var e=this;this.k.timelines&&this.k.timelines.forEach(function(t){t.timelineActions.forEach(e.z.bind(e,t.uri))})}},{key:"_addTimelineAction",value:function(t,e){var n=e.duration.start,i=this.D(this.F(this._,t),n),u=e.start.bind(e);i.push(u);var r=e.duration.end;if(r&&!isNaN(r)||(r=e.duration.end=1/0),isFinite(r)){var o=this.D(this._[t],r),s=e.end.bind(e);o.push(s)}}},{key:"_initializeUriLookup",value:function(t,e){return t[e]||(t[e]={}),t[e]}},{key:"_initializeTimelinePosition",value:function(t,e){return t[e]||(t[e]=[]),t[e]}},{key:"_executeActions",value:function(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return i<t.length?t[i][e]().then(function(){return n.A(t,e,++i)}):new Promise(function(t){t()})}},{key:"_handleRequestEngineRoot",value:function(t,e){e((0,r.default)(t))}},{key:"_handleRequestTimelineUri",value:function(e,n,t){var i=this;n=n||0,t=t||0,this.j.stop(),this.U().then(function(){var t=i.k.timelines[e];i.C=t.uri,i.j.loop=t.loop,!i.j.loop&&0<n&&i.j.once(o.default.FIRST_FRAME,function(){i.j.pause(),i.O.broadcastForTopic(o.default.DURATION,i.j.playerid,[i.getDuration()]),i.V().then(function(){i.j.seek(n),i.P(Math.floor,{offset:n})})}),i.j.playlistItem(e)})}},{key:"_cleanUpTimeline",value:function(){return this.J(this.B,"end")}},{key:"_executeStartActions",value:function(){return this.J(this.W.bind(this,0),"start")}},{key:"_getActionsForPosition",value:function(e,t){return t.filter(function(t){return!t.active&&t.duration.start<=e&&t.duration.end>=e})}},{key:"_getActiveActions",value:function(t){return t.filter(function(t){return t.active}).sort(function(t,e){return e.duration.start<t.duration.start?-1:e.duration.start>t.duration.start?1:0})}},{key:"_executeRelevantActions",value:function(t,e){var n=this.Q(),i=t.apply(this,[n]);return this.A(i,e,0)}},{key:"_handleRequestTimelinePosition",value:function(t){t(Math.floor(this.j.getPosition()))}},{key:"_handleTimelineComplete",value:function(){this.U()}},{key:"_handleExecuteTimelineAction",value:function(t,e,n){var i=this.G(t),u=i?i[e]:null;u&&(n?u.start():u.end())}},{key:"_resizeTimelineAction",value:function(t,e){var n=this.G(t),i=n?n[e]:null;i&&i.resize()}},{key:"_getRelevantTimelineActions",value:function(){return this.G(this.C)}},{key:"_getTimelineActionsForUri",value:function(e){var n;return this.k.timelines.some(function(t){return t.uri===e&&(n=t.timelineActions,!0)}),n}},{key:"_onTimeHandler",value:function(t,e){if(!isNaN(e.position)){var n=t(e.position);this.K!==n&&(this.X(n),this.O.broadcastForTopic(o.default.POSITION_UPDATE,this.j.playerid,[n,this.j.getDuration()])),this.O.broadcastForTopic(o.default.TIME_UPDATE,this.j.playerid,[e.position,this.j.getDuration()])}}},{key:"_onSeekHandler",value:function(t,e){var n=this,i=t(e.offset);isNaN(i)||this.Y(i).then(function(){n.j.play()})}},{key:"_executeActionsForPosition",value:function(t){this.K=t;var e=this._[this.C];if(e){var n=e[t];n&&n.forEach(function(t){t()})}}},{key:"_executeSeekActions",value:function(t){var e=this,n=this.Q(),i=this.B(n),u=this.W(t,n),r=this.A(i,"end",0);return new Promise(function(t){r.then(function(){e.A(u,"start",0).then(function(){t()})})})}}]),i}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=n(20),u=i(n(2)),s=i(n(0)),a=i(n(10));function i(t){return t&&t.e?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.Z(t,e,n)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(i,[{key:"_init",value:function(t,e,n){this.$=-1,this.tt=null,this.et=t,this.nt=n||new o.Eventbus,this.nt.on(s.default.REQUEST_INSTANCE,this.it.bind(this)),this.nt.on(s.default.REQUEST_ACTION,this.ut.bind(this)),this.nt.on(s.default.REQUEST_FUNCTION,this.rt.bind(this)),(0,u.default)(e).resize(this.ot.bind(this))}},{key:"destroy",value:function(){this.nt.clear(),this.nt=null}},{key:"_resizeHandler",value:function(){var t=this;-1<this.$&&clearTimeout(this.$),this.$=setTimeout(function(){t.nt.broadcast(s.default.RESIZE)},200)}},{key:"_importSystemEntryWithEventbusDependency",value:function(t){return new(this.st(t))(this.nt)}},{key:"_importSystemEntry",value:function(t){return this.et.import(t)[t]}},{key:"_requestInstanceHandler",value:function(t,e){e(this.at(t))}},{key:"_requestFunctionHandler",value:function(t,e){e(this.st(t))}},{key:"_requestActionHandler",value:function(t,e){var n=this.tt[t];n?e(n):(console.error("Unknown action: ".concat(t)),e(null))}},{key:"createEngine",value:function(t,e){var n=t.engine.systemName,i=this.st(n),u=null;t.eventActions&&t.eventActions.length&&(u=new o.ActionRegistryEventbusListener,this.nt.registerEventlistener(u)),this.nt.registerInterceptor(s.default.REQUEST_TIMELINE_URI,new o.RequestVideoUriInterceptor(this.nt)),e=e||new a.default(this.et,this.nt),this.tt=e.process(u,t);var r=new(this.st(t.timelineProviderSettings.systemName))(this.nt,t);return new i(t,this.nt,r)}}]),i}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"Eventbus",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"ActionRegistryEventbusListener",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"RequestVideoUriInterceptor",{enumerable:!0,get:function(){return r.default}});var i=o(n(13)),u=o(n(21)),r=o(n(22));function o(t){return t&&t.e?t:{default:t}}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actionRegistry={}}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"registerAction",value:function(t,e,n){n&&n.length&&(e="".concat(e,":").concat(n)),this.actionRegistry[e]||(this.actionRegistry[e]=[]),this.actionRegistry[e].push(t)}},{key:"handleEvent",value:function(t,e,n){e&&e.length&&(t="".concat(t,":").concat(e));var i=this.actionRegistry[t];if(i){var u={eventArgs:n};i.forEach(function(t){t.start(u)})}}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventbus=t}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"intercept",value:function(t){return this.eventbus.broadcast(u.default.BEFORE_REQUEST_TIMELINE_URI,t.slice()),t}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i=s(n(24)),u=s(n(33)),r=s(n(69)),o=s(n(6));function s(t){if(t&&t.e)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};i.get||i.set?Object.defineProperty(e,n,i):e[n]=t[n]}return e.default=t,e}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"getOperationNames",value:function(){return Object.keys(u)}},{key:"getControllerNames",value:function(){return Object.keys(i)}},{key:"getProviderNames",value:function(){return Object.keys(r)}},{key:"import",value:function(t){return u[t]?a({},t,u[t]):i[t]?a({},t,i[t]):r[t]?a({},t,r[t]):o[t]?a({},t,o[t]):null}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"EventListenerController",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"LabelController",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"LottieController",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"NavigationController",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"ProgressbarController",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"RoutingController",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"SubtitlesController",{enumerable:!0,get:function(){return c.default}});var i=l(n(25)),u=l(n(26)),r=l(n(27)),o=l(n(29)),s=l(n(30)),a=l(n(31)),c=l(n(32));function l(t){return t&&t.e?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;i(n(2));var o=i(n(0)),s=i(n(4));function i(t){return t&&t.e?t:{default:t}}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,u=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){u=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(u)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operationData=null,this.actionInstanceInfos=null,this.name="EventListenerController"}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(t,[{key:"init",value:function(t){this.operationData={selectedElement:t.selectedElement,eventName:t.eventName,actions:t.actions.slice(),actionOperationData:t.actionOperationData?(0,s.default)(t.actionOperationData):void 0}}},{key:"attach",value:function(u){var r=this,t=this.operationData,e=t.selectedElement,n=t.actions,i=t.eventName;this.actionInstanceInfos||(this.actionInstanceInfos=[],n.forEach(function(t){var e=c(r.ct(t),2),n=e[0],i=e[1];u.broadcast(o.default.REQUEST_ACTION,[i,function(t){r.actionInstanceInfos.push({start:n,action:t})}])}),"SELECT"===this.lt(e)?e.on(i,this.ft.bind(this)):e.on(i,this.ht.bind(this)))}},{key:"_getElementTagName",value:function(t){return(t.length?t[0].tagName:t.tagName).toUpperCase()}},{key:"_isStartAction",value:function(t){return"end:"===t.substr(0,"end:".length)?[!1,t.substr("end:".length)]:[!0,t]}},{key:"_eventHandler",value:function(t){var e=this.operationData.actionOperationData?(0,s.default)(this.operationData.actionOperationData):{};t.target&&(e.targetValue=t.target.value),this.vt(this.actionInstanceInfos,e,0)}},{key:"_executeAction",value:function(e,n,i){var u=this;if(i<e.length){var t=e[i],r=t.action;(t.start?r.start.bind(r):r.end.bind(r))(n).then(function(t){return u.vt(e,a(n,t),++i)})}}},{key:"_selectEventHandler",value:function(t){for(var e=t.target,n=0,i=e.length;n<i;n++){var u=e[n];if(u.selected){var r=this.operationData.actionOperationData?(0,s.default)(this.operationData.actionOperationData):{};this.vt(this.actionInstanceInfos,a({eventArgs:[u.value]},r),0);break}}}},{key:"detach",value:function(t){this.operationData.selectedElement.off(this.operationData.eventName)}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[],this.currentLanguage=null,this.operationData=null,this.labelData={},this.name="LabelController"}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"init",value:function(t){this.operationData=r({},t)}},{key:"attach",value:function(t){var e=this;t.broadcast(u.default.REQUEST_CURRENT_LANGUAGE,[function(t){e.currentLanguage=t}]),t.broadcast(u.default.REQUEST_LABEL_COLLECTION,[this.operationData.labelId,function(t){e.createTextDataLookup(t)}]),this.setLabel(),this.listeners.push(t.on(u.default.LANGUAGE_CHANGE,this.handleLanguageChange.bind(this)))}},{key:"setLabel",value:function(){this.operationData.selectedElement.html(this.labelData[this.currentLanguage])}},{key:"detach",value:function(t){this.listeners.forEach(function(t){t()})}},{key:"handleLanguageChange",value:function(t){this.currentLanguage=t,this.setLabel()}},{key:"createTextDataLookup",value:function(t){var e=this;t.forEach(function(t){e.labelData[t.code]=t.label})}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,r=(i=n(28))&&i.e?i:{default:i};function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="LottieController",this.currentLanguage=null,this.labelData={},this.listeners=[],this.anim=null,this.operationData=null,this.serializedData=null,this.serializedIEData=null,this.animationData=null,this.freezePosition=-1,this.endPosition=-1}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(t,[{key:"init",value:function(t){this.operationData={selectedElement:t.selectedElement,renderer:t.renderer,loop:t.loop,autoplay:t.autoplay,animationData:t.animationData,json:t.json,labelIds:t.labelIds,viewBox:t.viewBox},-1<t.url.indexOf("[")&&this.parseFilename(t.url),this.serializedData=this.operationData.json?JSON.stringify(this.operationData.json):JSON.stringify(this.operationData.animationData),this.operationData.iefallback&&(this.serializedIEData=JSON.stringify(this.operationData.iefallback))}},{key:"parseFilename",value:function(t){var n=this;t.substr(t.indexOf("[")+1,t.indexOf("]")-t.indexOf("[")-1).split(",").forEach(function(t){var e=t.split("=");"freeze"===e[0]?n.freezePosition=+e[1]:"end"===e[0]&&(n.endPosition=+e[1])})}},{key:"attach",value:function(t){if(this.operationData.labelIds&&this.operationData.labelIds.length){var e={};t.broadcast("request-current-language",[e]),this.currentLanguage=e.language,this.listeners.push(t.on("language-change",this.handleLanguageChange.bind(this))),t.broadcast("request-label-collections",[this.operationData.labelIds,e]),this.createTextDataLookup(e.labelCollections)}this.createAnimation()}},{key:"detach",value:function(t){this.listeners.forEach(function(t){t()}),this.anim&&(-1<this.endPosition?(this.anim.onComplete=this.destroy.bind(this),this.anim.playSegments([this.freezePosition,this.endPosition],!0)):this.anim.destroy())}},{key:"destroy",value:function(){this.anim&&(this.anim.destroy(),this.anim=null)}},{key:"createAnimation",value:function(){var e=this;this.anim&&this.anim.destroy();var n=this.isIE()?this.serializedIEData:this.serializedData,t=this.operationData.labelIds;t&&t.length&&t.forEach(function(t){n=n.split("!!".concat(t,"!!")).join(e.labelData[t][e.currentLanguage])});var i=JSON.parse(n),u={autoplay:this.operationData.autoplay,container:this.operationData.selectedElement[0],loop:this.operationData.loop,renderer:this.operationData.renderer,animationData:i};this.anim=r.default.loadAnimation(u),this.endPosition<0&&(this.endPosition=this.anim.timeCompleted),-1<this.freezePosition&&this.anim.playSegments([0,this.freezePosition],!0),this.operationData.viewBox&&this.operationData.selectedElement.find("svg").attr("viewBox",this.operationData.viewBox)}},{key:"createTextDataLookup",value:function(t){var n=this;t.forEach(function(t,e){t.forEach(function(t){n.labelData[n.operationData.labelIds[e]][t.code]=t.label})})}},{key:"handleLanguageChange",value:function(t){this.currentLanguage=t,this.createAnimation()}},{key:"isIE",value:function(){var t=!!document.documentMode;return!t&&!!window.StyleMedia||t}}]),t}();e.default=o},function(t,e){t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,r=(i=n(2))&&i.e?i:{default:i};function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="NavigationController",this.playerId=null,this.navigation=null,this.navLookup={},this.navVidIdLookup={},this.ctrlLookup={},this.activeNavigationPoint=null,this.labelControllers=null,this.eventhandlers=null,this.eventbus=null,this.container=null}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(t,[{key:"init",value:function(t){this.container=t.selectedElement,this.playerId=t.playerId,this.navigation=this.buildNavigationData(t.json)}},{key:"attach",value:function(t){this.eventhandlers=[],this.labelControllers=[],this.eventhandlers.push(t.on("navigate-to-video-url",this.handleNavigateVideoUrl.bind(this))),this.eventhandlers.push(t.on("highlight-navigation",this.highlightMenu.bind(this))),this.eventhandlers.push(t.on("request-current-navigation",this.handleRequestCurrentNavigation.bind(this))),this.eventhandlers.push(t.on("video-complete",this.handleVideoComplete.bind(this),this.playerId)),this.eventbus=t,this.buildHtml(this.container,this.navigation),this.initHistory.bind(this)}},{key:"initHistory",value:function(){this.activeNavigationPoint=this.navVidIdLookup[0];var t=this.getQueryVariable(0),e=0;t&&(e=this.navLookup[t].videoUrlIndex);this.highlightMenu(e)}},{key:"getQueryVariable",value:function(t){var e=window.location.href,n=e.indexOf("#");if(-1<n){var i=e.substring(n+2);if(i)return i.split("/")[t]}return null}},{key:"handleRequestCurrentNavigation",value:function(t){t({navigationData:this.activeNavigationPoint,title:this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]})}},{key:"detach",value:function(e){this.eventhandlers&&this.eventhandlers.forEach(function(t){t()}),this.labelControllers.forEach(function(t){t.detach(e)}),this.labelControllers.length=0,this.eventbus=null,this.container=null,window.onpopstate=null}},{key:"pushCurrentState",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,e={navigationData:this.activeNavigationPoint,title:this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]};-1<t&&(e.position=t),this.eventbus.broadcast("push-history-state",[e])}},{key:"buildHtml",value:function(t,e){var n=(0,r.default)("<ul/>");e.forEach(this.addNavElement.bind(this,n)),t.append(n)}},{key:"addNavElement",value:function(t,e){if(e.visible){var n=(0,r.default)("<li/>"),i=(0,r.default)("<a href='javascript:;' id='nav_".concat(e.videoUrlIndex,"'/>"));if(n.append(i),this.addLabel(i,e.labelId),this.addClickHandler(i,e.videoUrlIndex),e.children){var u=(0,r.default)("<ul/>");e.children.forEach(this.addNavElement.bind(this,u)),n.append(u)}t.append(n)}}},{key:"addClickHandler",value:function(t,e){t.mouseup(this.menuMouseupHandler.bind(this,e))}},{key:"menuMouseupHandler",value:function(t){var e=this.navVidIdLookup[t];e&&(this.eventbus.broadcast("request-video-url",[e.videoUrlIndex]),this.handleNavigateVideoUrl(e.videoUrlIndex))}},{key:"handleNavigateVideoUrl",value:function(t,e){e=e||0,this.highlightMenu(t),this.eventbus.broadcast("request-video-url",[t,e]),this.activeNavigationPoint=this.navVidIdLookup[t],this.pushCurrentState(e)}},{key:"highlightMenu",value:function(t){var e=(0,r.default)("#nav_".concat(t));e.length&&((0,r.default)(".current-menu-item").removeClass("current-menu-item"),e.addClass("current-menu-item"))}},{key:"handleVideoComplete",value:function(t){console.log("Navigation controller received video complete");var e=this.navVidIdLookup[t];e.autoNext?(console.log("NavigationController.handleVideoComplete - request-video-url: "+e.next.videoUrlIndex),this.eventbus.broadcast("request-video-url",[e.next.videoUrlIndex])):(console.log("handleVideoComplete - request-video-cleanup"),this.eventbus.broadcast("request-video-cleanup"))}},{key:"addLabel",value:function(t,e){var n=this,i={selectedElement:t,labelId:e};this.eventbus.broadcast("request-instance",["LabelController",function(t){t.init(i),t.attach(n.eventbus),n.labelControllers.push(t),n.ctrlLookup[e]=t}])}},{key:"buildNavigationData",value:function(n){var i=this,u=[];return n.navigationData.forEach(function(t,e){i.navLookup[t.id]=t,(i.navVidIdLookup[t.videoUrlIndex]=t).previous=n.navigationData[e-1]}),n.navigationData.forEach(function(t,e){t.nextId?(t.next=i.navLookup[t.nextId],delete t.nextId):t.next=n.navigationData[e+1]}),n.roots.forEach(function(t){var e=i.navLookup[t];e.children&&(e.children=e.children.map(function(t){return i.navLookup[t]})),u.push(e)}),u}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selectedElement=null,this.textElement=null,this.detachers=[],this.name="ProgressbarController"}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"init",value:function(t){this.selectedElement=t.selectedElement,this.playerId=t.playerId,this.textElement=t.textElement}},{key:"attach",value:function(t){var e=this;this.detachers.push(t.on(u.default.POSITION_UPDATE,this.positionUpdateHandler.bind(this),this.playerId));var n=this.clickHandler.bind(this);this.selectedElement.on("click",n),this.detachers.push(function(){return e.selectedElement.off("click")},n)}},{key:"detach",value:function(t){this.detacher.forEach(function(t){t()})}},{key:"positionUpdateHandler",value:function(t,e){var n=100/e*t;this.selectedElement&&this.selectedElement.css("width","".concat(n,"%")),n=Math.floor(n),this.textElement&&this.textElement.text("".concat(n,"%"))}},{key:"clickHandler",value:function(){}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.navLookup={},this.navVidIdLookup={},this.playerId=null,this.navigation=null,this.eventhandlers=[],this.eventbus=null,this.name="RoutingController"}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"init",value:function(t){this.navigation=this.buildNavigationData(t.json),this.playerId=t.playerId}},{key:"attach",value:function(t){this.eventhandlers.push(t.on("before-request-video-url",this.handleBeforeRequestVideoUrl.bind(this))),this.eventhandlers.push(t.on("push-history-state",this.handlePushHistoryState.bind(this))),this.eventbus=t,window.onpopstate=this.handlePopstate.bind(this);var e=this.getQueryVariable(0);if(e){var n=this.navLookup[e],i=this.getQueryVariable(1);i=i?+i:0,this.eventbus.broadcast("request-video-url",[n.videoUrlIndex,i,!0])}else window.history.pushState({navigationId:this.navigation[0].id},"","#/".concat(this.navigation[0].id))}},{key:"handlePopstate",value:function(t){var e=t.state?t.state.navigationId:this.navigation[0].id,n=t.state?t.state.position:0,i=this.navLookup[e];this.eventbus.broadcast("highlight-navigation",[i.videoUrlIndex]),this.eventbus.broadcast("request-video-url",[i.videoUrlIndex,n,!0])}},{key:"detach",value:function(t){this.eventhandlers&&this.eventhandlers.forEach(function(t){t()}),this.eventbus=null}},{key:"handleBeforeRequestVideoUrl",value:function(t,e,n){var i=this;if(e=e||0,!(n=void 0!==n&&n)){this.eventbus.broadcast("request-current-navigation",[function(t){i.pushState(t)}])}}},{key:"getQueryVariable",value:function(t){var e=window.location.href,n=e.indexOf("#");if(-1<n){var i=e.substring(n+2);if(i)return i.split("/")[t]}return null}},{key:"handlePushHistoryState",value:function(t){this.pushState(t)}},{key:"pushState",value:function(t){if(t&&t.navigationData&&t.navigationData.visible){var e=void 0!==t.position?t.position:-1;if(e<0){this.eventbus.broadcast("request-current-video-position",[function(t){e=3<t?t-3:0}])}var n=window.history.state;n&&n.navigationId!==t.navigationData.id?window.history.pushState({navigationId:t.navigationData.id,position:e},t.title,"#/".concat(t.navigationData.id,"/").concat(e)):n&&n.navigationId===t.navigationData.id?window.history.replaceState({navigationId:n.navigationId,position:e},t.title,"#/".concat(n.navigationId,"/").concat(e)):window.history.pushState({navigationId:t.navigationData.id,position:e},t.title,"#/".concat(t.navigationData.id,"/").concat(e)),window.document.title=t.title}}},{key:"buildNavigationData",value:function(n){var i=this,u=[];return n.navigationData.forEach(function(t,e){i.navLookup[t.id]=t,(i.navVidIdLookup[t.videoUrlIndex]=t).previous=n.navigationData[e-1]}),n.navigationData.forEach(function(t,e){t.nextId?(t.next=i.navLookup[t.nextId],delete t.nextId):t.next=n.navigationData[e+1]}),n.roots.forEach(function(t){var e=i.navLookup[t];e.children&&(e.children=e.children.map(function(t){return i.navLookup[t]})),u.push(e)}),u}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actionLookup=null,this.currentLanguage=null,this.lastFunc=null,this.name="SubtitlesController"}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"attach",value:function(t){var e=t.on("time",this.onTimeHandler.bind(this)),n=t.on("language-change",this.languageChangeHandler.bind(this));this.internalDetach=this.internalDetach.bind(this,[e,n])}},{key:"detach",value:function(t){this.internalDetach()}},{key:"internalDetach",value:function(t){t&&t.forEach(function(t){t()})}},{key:"languageChangeHandler",value:function(t){this.currentLanguage=t,this.lastFunc&&this.lastFunc()}},{key:"removeTitle",value:function(t){t.text(""),this.lastFunc=null}},{key:"onTimeHandler",value:function(t){var e=this.actionLookup[t];e&&(e(),this.lastFunc=e)}},{key:"setTitle",value:function(t,e){t.text(e[this.currentLanguage])}},{key:"createActionLookup",value:function(t,e){for(var n=t.subtitleData,i=n[0].titles,u={},r=0,o=i.length;r<o;r++){for(var s={},a=0,c=n.length;a<c;a++){var l=n[a];s[l.lang]=l.titles[r].text}u[i[r].duration.start]=this.setTitle.bind(this,e,s),u[i[r].duration.end]=this.removeTitle}return u}},{key:"init",value:function(t){var e=t.selectedElement;this.removeTitle=this.removeTitle.bind(this,e),this.currentLanguage=t.language,this.actionLookup=this.createActionLookup(t,e)}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"addClass",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"addControllerToElement",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"addOptionList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"animate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"animateWithClass",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"broadcastEvent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"clearElement",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"clearOperationData",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"customFunction",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"endAction",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"extendController",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"getControllerFromElement",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getControllerInstance",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"getElementDimensions",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"loadJSON",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"removeClass",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"removeControllerFromElement",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"removeElement",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"removePropertiesFromOperationData",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"reparentElement",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"requestAction",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"resizeAction",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"selectElement",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"setElementAttributes",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"setElementContent",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"setOperationData",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"setStyle",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(e,"startAction",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"toggleClass",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"toggleElement",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"wait",{enumerable:!0,get:function(){return L.default}});var i=N(n(34)),u=N(n(35)),r=N(n(37)),o=N(n(38)),s=N(n(39)),a=N(n(40)),c=N(n(43)),l=N(n(44)),f=N(n(45)),h=N(n(46)),v=N(n(47)),d=N(n(48)),b=N(n(49)),y=N(n(50)),m=N(n(52)),k=N(n(53)),O=N(n(54)),j=N(n(55)),_=N(n(56)),g=N(n(57)),p=N(n(58)),w=N(n(59)),E=N(n(60)),M=N(n(61)),C=N(n(62)),T=N(n(63)),q=N(n(64)),A=N(n(65)),S=N(n(66)),P=N(n(67)),L=N(n(68));function N(t){return t&&t.e?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.selectedElement,i=t.className;return n.addClass(i),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var r=i(n(36)),o=i(n(1));function i(t){return t&&t.e?t:{default:t}}function u(n,t){var e=n.selectedElement,i=n.controllerInstance;(0,r.default)(e,i),i.init(n);var u=i.attach(t);return u?new Promise(function(e,t){u.then(function(t){(0,o.default)(e,n,t)},t)}):n}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i=n(5);function u(t,e){t.data("chronoEngineControllers")||t.data("chronoEngineControllers",[]),(0,i.getElementControllers)(t).push(e)}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.valueProperty,i=t.labelProperty,u=t.defaultIndex,r=t.defaultValue,o=t.optionData,s=t.selectedElement,a=function(t,e,n,i,u,r){var o="";return i?o=u[t]===i?" selected":"":n&&(o=r===n?" selected":""),"<option value='".concat(u[t],"'").concat(o,">").concat(u[e],"</option>")}.bind(null,n,i,u,r),c=o.map(a);return s.html(c),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,s=(i=n(1))&&i.e?i:{default:i};function u(n,t){var i=n.animationEasing,u=n.selectedElement,r=n.animationProperties,o=n.animationDuration;return new Promise(function(t,e){try{i?u.animate(r,o,i,function(){(0,s.default)(t,{},n)}):u.animate(r,o,function(){(0,s.default)(t,{},n)})}catch(t){e(t)}})}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,o=(i=n(1))&&i.e?i:{default:i};function u(n,t){var i=n.selectedElement,u=n.className,r=n.removeClass;r=void 0===r||r;var e=new Promise(function(t,e){try{i.one("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd",function(){r&&i.removeClass(u),(0,o.default)(t,{},n)})}catch(t){e(t)}});return i.addClass(u),e}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=i(n(41)),s=i(n(42));function i(t){return t&&t.e?t:{default:t}}function u(t,e){var n=t.eventArgs,i=t.eventTopic,u=t.eventName,r=(0,o.default)(t,n);i?e.broadcastForTopic(u,i,r):e.broadcast(u,r),(0,s.default)(t)}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(14))&&i.e?i:{default:i};function r(t,e){if(e){var n=u.default.bind(null,t);return e.map(n)}}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t){delete t.eventName,delete t.eventTopic,delete t.eventArgs}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){return t.selectedElement.empty(),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){return{}}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=i(n(1)),s=i(n(0));function i(t){return t&&t.e?t:{default:t}}function u(u,r){var t=u.systemName;return new Promise(function(n,i){r.broadcast(s.default.REQUEST_FUNCTION,[t,function(t){var e=t(u,r);e?e.then(function(){(0,o.default)(n,{},u)},i):(0,o.default)(n,{},u)}])})}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=i(n(3)),s=i(n(1));function i(t){return t&&t.e?t:{default:t}}function u(i,t){var u=i.actionInstance,r=i.actionOperationData;return delete i.actionOperationData,new Promise(function(t,e){var n=(0,o.default)(i,r);u.end(n).then(function(){(0,s.default)(t,i)},e)})}e.default=u},function(t,e,n){"use strict";function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.controllerInstance,i=t.controllerExtension;return t.controllerInstance=u(n,i),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var o=n(5);function i(t,e){var n=t.selectedElement,i=t.controllerName,u=(0,o.getElementControllers)(n),r=null;return u.some(function(t){return t.name===i&&(r=t,!0)}),r||console.warn("controller for name '".concat(i,"' was not found on the given element")),t.controllerInstance=r,t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(e,t){var n=e.systemName,i=e.propertyName;return i=i||"controllerInstance",t.broadcast(u.default.REQUEST_INSTANCE,[n,function(t){e[i]=t}]),e}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,r=(i=n(51))&&i.e?i:{default:i};function u(t,e){var n=t.selectedElement,i=t.dimensions,u=t.modifier;return(i=i||{}).width=n.innerWidth(),i.height=n.innerHeight(),0===i.height&&(i.height=i.width),u&&(0,r.default)(i,u),t.dimensions=i,t}e.default=u},function(t,e,n){"use strict";function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,u=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){u=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(u)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=null;if(-1<e.indexOf("|")){var i=h(e.split("|"),2);e=i[0],n=i[1]}var u=e.substr(0,1),r=h(function(t){var e=1,n=t.substr(t.length-1,1);"h"!==n&&"w"!==n&&"%"!==n&&(n=null);var i="%"===n;return i&&(e=2,"h"!==(n=t.substr(t.length-e,1))&&"w"!==n&&(n=null,e=1)),[n,e,i]}(e),3),o=r[0],s=r[1],a=r[2],c=parseInt(null!==o?e.substr(1,e.length-s-1):e.substr(1,e.length),10),l=c,f=c;a&&(l=t.width/100*c,f=t.height/100*c),t=function(t,e,n,i,u){switch(e){case"+":switch(n){case"h":t.height+=u;break;case"w":t.width+=i;break;default:t.height+=u,t.width+=i}break;case"-":switch(n){case"h":t.height-=u;break;case"w":t.width-=i;break;default:t.height-=u,t.width-=i}break;case"/":switch(n){case"h":t.height/=u;break;case"w":t.width/=i;break;default:t.height/=u,t.width/=i}break;case"*":switch(n){case"h":t.height*=u;break;case"w":t.width*=i;break;default:t.height*=u,t.width*=i}break;default:console.error("Unknown operator found: ".concat(e))}return t}(t,u,o,l,f),n&&function(t,e){var n=t.substr(0,1),i=t.substr(t.indexOf("[")+1,t.indexOf("]")-t.indexOf("[")-1).split("=")[1].split("-");"h"===n?e.height=e.width/+i[0]*+i[1]:"w"===n&&(e.width=e.height/+i[1]*+i[0])}(n,t)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i=function(n,i,t){var u=i.url,e=i.cache,r=i.propertyName;return r=r||"json",e&&n[u]?(i[r]=n[u],i):new Promise(function(e,t){fetch(u).then(function(t){n[u]=i[r]=t.body,e(i)}).catch(t)})}.bind(null,{});e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.selectedElement,i=t.className;return n.removeClass(i),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var s=n(5);function i(t,e){var n=t.selectedElement,i=t.controllerName,u=(0,s.getElementControllers)(n);if(u){var r=null;if(u.some(function(t){return t.name===i&&(r=t,!0)}),r){var o=u.indexOf(r);-1<o&&u.splice(o,1),r.detach(e)}}return t}e.default=i},function(t,e,n){"use strict";function i(t,e){return t.selectedElement.remove(),t}Object.defineProperty(e,"e",{value:!0}),e.removeElement=i,e.default=void 0;var u=i;e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(e,t){return e.propertyNames.forEach(function(t){delete e[t]}),delete e.propertyNames,e}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.selectedElement,i=t.newParentSelector;n.remove().appendTo(i)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(0))&&i.e?i:{default:i};function r(e,t){var n=e.actionName;return t.broadcast(u.default.REQUEST_ACTION,[n,function(t){e.actionInstance=t}]),e}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,r=(i=n(3))&&i.e?i:{default:i};function u(t,e){var n=t,i=n.actionInstance,u=n.actionOperationData;return t=(0,r.default)(t,u),i.resize?i.resize(t):t}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,r=(i=n(0))&&i.e?i:{default:i};function o(t,e,n,i){var u=t.find(e);u.length||console.warn("selector '".concat(e,"' wasn't found!")),n[i]=u,n.hasOwnProperty("propertyName")&&delete n.propertyName}function u(e,t){var n=e.selector,i=e.propertyName,u=e.useExistingAsRoot;if(!n)throw new Error("selector is undefined!");return i=i||"selectedElement",u&&e[i]?o(e[i],n,e,i):t.broadcast(r.default.REQUEST_ENGINE_ROOT,[function(t){o(t,n,e,i)}]),e}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.attributes,i=t.selectedElement;for(var u in n)n.hasOwnProperty(u)&&i.attr(u,n[u]);return t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.append,i=t.selectedElement,u=t.template;return n?i.append(u):i.html(u),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(15))&&i.e?i:{default:i};function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function o(t,e){return delete(t=r(t,(0,u.default)(t,t.properties))).properties,t}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(15))&&i.e?i:{default:i};function r(t,e){var n=(0,u.default)(t,t.properties);return t.selectedElement.css(n),t}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var r=i(n(3)),o=i(n(1));function i(t){return t&&t.e?t:{default:t}}function u(n,t){var e=n,i=e.actionInstance,u=e.actionOperationData;return new Promise(function(t,e){n=(0,r.default)(n,u),i.start(n).then(function(){(0,o.default)(t,n)},e)})}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){var n=t.selectedElement,i=t.className;return n.toggleClass(i),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;function i(t,e){return t.selectedElement.toggle(),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i,u=(i=n(1))&&i.e?i:{default:i};function r(e,t){var n=e.milliseconds;return new Promise(function(t){setTimeout(function(){(0,u.default)(t,e)},n)})}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),Object.defineProperty(e,"JwPlayerTimelineProvider",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"RequestAnimationFrameTimelineProvider",{enumerable:!0,get:function(){return u.default}});var i=r(n(70)),u=r(n(71));function r(t){return t&&t.e?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var a=u(n(2)),i=u(n(0));function u(t){return t&&t.e?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.eventbus=t,this.config=e,this.providerid=e.playerSettings.selector,this.loop=!1,this.player=null,this.currentLoopHandler=null,this.h=[],this.dt()}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(n,[{key:"_extractUrls",value:function(t){return t.timelines.filter(function(t){return"video"===t.type}).map(function(t){return t.uri})}},{key:"init",value:function(t){var n=this,e=this.bt(this.config),i=window.jwplayer,u=(0,a.default)("#".concat(t));if(!u.length)throw new Error("videoplayer selector '".concat(t,"' not found"));var r=u.innerWidth(),o=u.innerHeight();0===r&&(r=100),0===o&&(o=300),this.player=i(this.config.playerSettings.selector),this.player.setup({file:e[0],image:this.config.playerSettings.poster,height:o,width:r,controls:!0,autostart:!1,displaytitle:!1,displaydescription:!1,nextUpDisplay:!1,abouttext:"Rosetta Group",aboutlink:"http://www.rosettagroup.nl",stretching:"fill",repeat:!1});var s=[];return e.forEach(function(t){s.push({file:t,title:t,image:n.config.playerSettings.poster})}),new Promise(function(t,e){n.player.once("ready",function(){n.yt(t)}),n.player.load(s)})}},{key:"_handlePlayerReady",value:function(t){var e=this;this.player.once("firstFrame",function(){e.player.pause(),e.eventbus.broadcastForTopic(i.default.DURATION,e.player.playerid,[e.getDuration()]),t(e)}),this.player.on(i.default.TIME,this.mt.bind(this,Math.floor)),this.player.on(i.default.SEEKED,this.kt.bind(this)),this.player.on(i.default.COMPLETE,this.Ot.bind(this)),setTimeout(function(){e.player.play()},10)}},{key:"_handlePlayerComplete",value:function(){this.loop||(this.stop(),this.eventbus.broadcastForTopic(i.default.COMPLETE,this.providerid,[this.player.getPlaylistIndex()]))}},{key:"_seekedHandler",value:function(){this.eventbus.broadcastForTopic(i.default.SEEKED,this.providerid,[this.getPosition(),this.getDuration()])}},{key:"destroy",value:function(){this.player.remove(),this.h.forEach(function(t){return t()})}},{key:"_loopHandler",value:function(t,e){var n=t(e.position);this.loop&&n===t(this.player.getDuration()-1)&&this.seek(0)}},{key:"_timeResetLoopHandler",value:function(t){this.loop&&this.seek(0)}},{key:"_addEventListeners",value:function(){this.h.push(this.eventbus.on(i.default.PLAY_TOGGLE_REQUEST,this.toggleplay.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.PLAY_REQUEST,this.play.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.STOP_REQUEST,this.stop.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.PAUSE_REQUEST,this.pause.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.SEEK_REQUEST,this.seek.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.RESIZE_REQUEST,this.resize.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.CONTAINER_REQUEST,this.jt.bind(this),this.providerid)),this.h.push(this.eventbus.on(i.default.DURATION_REQUEST,this.duration.bind(this),this.providerid))}},{key:"_container",value:function(t){var e="";"html5"!==this.player.getProvider().name&&(e="_wrapper"),t((0,a.default)("#".concat(this.providerid).concat(e)))}},{key:"toggleplay",value:function(){this.paused?this.play():this.pause()}},{key:"play",value:function(){this.paused=!1,this.player.play(),this.eventbus.broadcastForTopic(i.default.PLAY,this.providerid)}},{key:"stop",value:function(){this.paused=!1,this.player.stop(),this.eventbus.broadcastForTopic(i.default.STOP,this.providerid)}},{key:"pause",value:function(){this.paused=!0,this.player.pause(),this.eventbus.broadcastForTopic(i.default.PAUSE,this.providerid)}},{key:"seek",value:function(t){var e=this.player.getPosition();this.player.seek(t),this.eventbus.broadcastForTopic(i.default.SEEK,this.providerid,[t,e,this.player.getDuration()])}},{key:"resize",value:function(t,e){this.player.resize(t,e),this.eventbus.broadcastForTopic(i.default.RESIZE,this.providerid,[t,e])}},{key:"duration",value:function(t){t(Math.floor(this.getDuration()))}},{key:"playlistItem",value:function(t){this.player.playlistItem(t)}},{key:"once",value:function(t,e){this.player.once(t,e)}},{key:"off",value:function(t,e){this.player.off(t,e)}},{key:"on",value:function(t,e){this.player.on(t,e)}},{key:"getPosition",value:function(){return this.player.getPosition()}},{key:"getPlaylistIndex",value:function(){return this.player.getPlaylistIndex()}},{key:"getState",value:function(){return this.player.getState()}},{key:"getDuration",value:function(){return this.player.getDuration()}},{key:"getMute",value:function(){return this.player.getMute()}},{key:"getVolume",value:function(){return this.player.getVolume()}},{key:"setMute",value:function(t){this.player.setMute(t)}},{key:"setVolume",value:function(t){this.player.setVolume(t)}}]),n}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"e",{value:!0}),e.default=void 0;var i=r(n(2)),u=r(n(0));function r(t){return t&&t.e?t:{default:t}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.eventbus=t,this.config=e,this.requestID=null,this.last=0,this.current=0,this._t=this.gt.bind(this),this.loop=!1,this.h=[],this.providerid="provider".concat(1e3*Math.random()),this.dt(),this.playlist=[],this.currentPlaylistItem=null,this.firstFrame=!0,this.paused=!0}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"_extractPlaylist",value:function(t){return t.timelines.filter(function(t){return"animation"===t.type}).map(function(t){return t})}},{key:"playlistItem",value:function(t){t<0||t>this.playlist.length||(this.currentPlaylistItem=this.playlist[t],this.firstFrame=!0,this.reset())}},{key:"_addEventListeners",value:function(){this.h.push(this.eventbus.on(u.default.PLAY_TOGGLE_REQUEST,this.toggleplay.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.PLAY_REQUEST,this.play.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.STOP_REQUEST,this.stop.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.PAUSE_REQUEST,this.pause.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.SEEK_REQUEST,this.seek.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.RESIZE_REQUEST,this.pt.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.CONTAINER_REQUEST,this.jt.bind(this),this.providerid)),this.h.push(this.eventbus.on(u.default.DURATION_REQUEST,this.requestDurationHandler.bind(this),this.providerid))}},{key:"_update",value:function(t){if(this.paused){if(!this.last||1e3<=t-this.last){if(!this.last&&this.firstFrame&&(this.firstFrame=!1,this.eventbus.broadcastForTopic(u.default.FIRSTFRAME,this.providerid)),this.last=t,this.current++,this.current>this.currentPlaylistItem.duration){if(!this.loop)return this.stop(),void this.eventbus.broadcastForTopic(u.default.COMPLETE,this.providerid);this.wt()}this.eventbus.broadcastForTopic(u.default.TIME,this.providerid,this.current)}this.requestID=requestAnimationFrame(this._t)}}},{key:"_start",value:function(){this.requestID||(this.requestID=requestAnimationFrame(this._t))}},{key:"_reset",value:function(){this.Et(),this.last=0,this.current=0}},{key:"_resize",value:function(){console.error("Not implemented yet")}},{key:"_container",value:function(t){t(this.container)}},{key:"_cancelAnimationFrame",value:function(){this.requestID&&(cancelAnimationFrame(this.requestID),this.requestID=null)}},{key:"init",value:function(){if(this.playlist=this.Mt(this.config),this.currentPlaylistItem=this.playlist[0],this.container=(0,i.default)(this.currentPlaylistItem.selector),!this.container.length)throw new Error("timeline selector '".concat(selector,"' not found"));return new Promise(function(t){t()})}},{key:"destroy",value:function(){this.stop(),this.h.forEach(function(t){t()})}},{key:"toggleplay",value:function(){this.paused?this.play():this.pause()}},{key:"play",value:function(){this.paused=!1,this.Ct(),this.eventbus.broadcastForTopic(u.default.PLAY,this.providerid)}},{key:"stop",value:function(){this.paused=!1,this.Et(),this.eventbus.broadcastForTopic(u.default.STOP,this.providerid)}},{key:"pause",value:function(){this.paused=!0,this.eventbus.broadcastForTopic(u.default.PAUSE,this.providerid)}},{key:"seek",value:function(t){t<0||t>this.currentPlaylistItem.duration||(this.eventbus.broadcastForTopic(u.default.SEEK,this.providerid),this.current=t,this.eventbus.broadcastForTopic(u.default.SEEKED,this.providerid))}},{key:"requestDurationHandler",value:function(t){t(this.currentPlaylistItem.duration)}},{key:"on",value:function(t,e){return this.eventbus.on(t,e,this.providerid)}},{key:"once",value:function(t,e){return this.eventbus.once(t,e,this.providerid)}}]),n}();e.default=s}])});
//# sourceMappingURL=library.min.js.map