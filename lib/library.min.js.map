{"version":3,"sources":["webpack://library/webpack/universalModuleDefinition","webpack://library/webpack/bootstrap","webpack://library/./src/timeline-event-names.js","webpack://library/./src/operation/helper/internalResolve.js","webpack://library/external {\"amd\":\"jquery\",\"global\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\"}","webpack://library/./src/operation/helper/mergeOperationData.js","webpack://library/./src/operation/helper/deepcopy.js","webpack://library/./src/operation/helper/getElementData.js","webpack://library/./src/index.js","webpack://library/./src/action/index.js","webpack://library/./src/action/action.js","webpack://library/./src/action/endableaction.js","webpack://library/./src/configuration/configuration-resolver.js","webpack://library/./src/operation/helper/getNestedValue.js","webpack://library/./src/language-manager.js","webpack://library/./src/eventbus/eventbus.js","webpack://library/./src/operation/helper/extractOperationDataArgumentValues.js","webpack://library/./src/operation/helper/resolvePropertyValues.js","webpack://library/./src/action/timelineaction.js","webpack://library/./src/operation/helper/getNestedPropertyValue.js","webpack://library/./src/chrono-trigger-engine.js","webpack://library/./src/engine-factory.js","webpack://library/./src/eventbus/index.js","webpack://library/./src/eventbus/actionregistry-eventbus-listener.js","webpack://library/./src/eventbus/request-video-uri-interceptor.js","webpack://library/./src/importer/webpack-resource-importer.js","webpack://library/./src/controllers/index.js","webpack://library/./src/controllers/EventListenerController.js","webpack://library/./src/controllers/LabelController.js","webpack://library/./src/controllers/LottieController.js","webpack://library/external {\"amd\":\"lottie-web\",\"global\":\"lottie\",\"commonjs\":\"lottie-web\",\"commonjs2\":\"lottie-web\"}","webpack://library/./src/controllers/NavigationController.js","webpack://library/./src/controllers/ProgressbarController.js","webpack://library/./src/controllers/RoutingController.js","webpack://library/./src/controllers/SubtitlesController.js","webpack://library/./src/operation/index.js","webpack://library/./src/operation/addClass.js","webpack://library/./src/operation/addControllerToElement.js","webpack://library/./src/operation/helper/attachControllerToElement.js","webpack://library/./src/operation/addOptionList.js","webpack://library/./src/operation/animate.js","webpack://library/./src/operation/animateWithClass.js","webpack://library/./src/operation/broadcastEvent.js","webpack://library/./src/operation/helper/resolveEventArguments.js","webpack://library/./src/operation/helper/removeEventDataFromOperationData.js","webpack://library/./src/operation/clearElement.js","webpack://library/./src/operation/clearOperationData.js","webpack://library/./src/operation/customFunction.js","webpack://library/./src/operation/endAction.js","webpack://library/./src/operation/extendController.js","webpack://library/./src/operation/getControllerFromElement.js","webpack://library/./src/operation/getControllerInstance.js","webpack://library/./src/operation/getElementDimensions.js","webpack://library/./src/operation/helper/modifyDimensions.js","webpack://library/./src/operation/loadJSON.js","webpack://library/./src/operation/removeClass.js","webpack://library/./src/operation/removeControllerFromElement.js","webpack://library/./src/operation/removeElement.js","webpack://library/./src/operation/removePropertiesFromOperationData.js","webpack://library/./src/operation/reparentElement.js","webpack://library/./src/operation/requestAction.js","webpack://library/./src/operation/resizeAction.js","webpack://library/./src/operation/selectElement.js","webpack://library/./src/operation/setElementAttributes.js","webpack://library/./src/operation/setElementContent.js","webpack://library/./src/operation/setOperationData.js","webpack://library/./src/operation/setStyle.js","webpack://library/./src/operation/startAction.js","webpack://library/./src/operation/toggleClass.js","webpack://library/./src/operation/toggleElement.js","webpack://library/./src/operation/wait.js","webpack://library/./src/timelineproviders/index.js","webpack://library/./src/timelineproviders/jwplayer-timeline-provider.js","webpack://library/./src/timelineproviders/request-animation-frame-timeline-provider.js"],"names":["root","factory","exports","module","require","define","amd","undefined","window","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__28__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TimelineEventNames","PLAY_TOGGLE_REQUEST","PLAY_REQUEST","STOP_REQUEST","PAUSE_REQUEST","SEEK_REQUEST","RESIZE_REQUEST","CONTAINER_REQUEST","DURATION_REQUEST","DURATION","TIME","SEEKED","COMPLETE","PLAY","STOP","PAUSE","SEEK","RESIZE","POSITION_UPDATE","TIME_UPDATE","REQUEST_INSTANCE","REQUEST_ACTION","REQUEST_FUNCTION","REQUEST_TIMELINE_URI","BEFORE_REQUEST_TIMELINE_URI","REQUEST_ENGINE_ROOT","REQUEST_CURRENT_TIMELINE_POSITION","REQUEST_TIMELINE_CLEANUP","EXECUTE_TIMELINEACTION","RESIZE_TIMELINEACTION","REQUEST_LABEL_COLLECTION","REQUEST_LABEL_COLLECTIONS","REQUEST_CURRENT_LANGUAGE","LANGUAGE_CHANGE","_mergeOperationData","resolve","operationData","newOperationData","_extends","original","JSON","parse","stringify","getElementData","element","data","getElementControllers","actions","_interopRequireWildcard","_configurationResolver","_interopRequireDefault","_chronoTriggerEngine","_engineFactory","_timelineEventNames","_languageManager","_webpackResourceImporter","_eventbus","_action","_endableaction","_timelineaction","_deepcopy","Action","actionData","eventBus","_classCallCheck","this","startOperations","eventbus","initOperationData","_this","Promise","reject","executeOperation","e","console","error","concat","operations","idx","previousOperationData","_this2","length","operationInfo","mergedOperationData","result","instance","then","resultOperationData","_this3","executeResizeOperation","_this4","resizeInstance","EndableAction","_possibleConstructorReturn","_getPrototypeOf","endOperations","_getNestedPropertyValue","ConfigurationResolver","importer","systemName","actionRegistryListener","configuration","actionsLookup","processConfiguration","resolveOperations","initializeTimelineActions","initializeInitActions","initializeActions","initializeEventActions","config","eventActions","forEach","eventAction","registerAction","eventName","eventTopic","action","initActions","map","initAction","timelines","initializeTimelineAction","timelineConfig","timelineActions","timelineAction","TimelineAction","_this5","timelineOperations","timelineInfo","push","apply","_toConsumableArray","_gatherOperations","holder","importSystemEntry","parentConfig","_this6","constructor","Array","ii","keys","processConfigProperty","startsWith","configProperty","substr","templateKey","jsonKey","json","_typeof","properties","sourceObject","Error","currentInstance","suffix","prop","index","parts","split","LanguageManager","language","labels","_labelLookup","_currentLanguage","_eventbusListeners","createLabelLookup","addEventbusListeners","on","handleRequestLabelCollection","handleRequestLabelCollections","handleRequestCurrentLanguage","handleLanguageChange","resultCallback","labelId","labelIds","label","id","Eventbus","clear","eventHandlers","eventListeners","eventInterceptors","eventHandler","_getEventHandlers","off","eventHandlerDecorator","arguments","handlers","indexOf","splice","args","_callHandlers","eventbusListener","interceptor","_getEventInterceptors","intercept","listener","handleEvent","_getNestedValue","argumentValue","toLowerCase","propNames","shift","_extractOperationDataArgumentValues","copy","extract","extractOperationDataArgumentValues","propertyName","propertyValue","active","duration","start","end","_get","propertyChain","_jquery","ChronoTriggerEngine","timelineProvider","_configuration","_timelineProvider","_timeLineActionsLookup","_createLayoutTemplate","_addInitialisationListeners","_currentTimelineUri","uri","_createTimelineLookup","_initializeTimelineProvider","container","containerSelector","layoutTemplate","html","warning","timelineProviderSettings","selector","init","_executeActions","_onTimeHandler","Math","floor","_onSeekHandler","remover","destroy","_handleRequestEngineRoot","_handleRequestTimelineUri","_handleRequestTimelinePosition","_handleTimelineComplete","_handleExecuteTimelineAction","_resizeTimelineAction","_addTimelineAction","timeLineAction","timelineStartPositions","_initializeTimelinePosition","_initializeUriLookup","startMethod","isNaN","Infinity","isFinite","timelineEndPositions","endMethod","lookup","position","methodName","engineRootSelector","previousVideoPosition","stop","_cleanUpTimeline","loop","once","FIRST_FRAME","pause","broadcastForTopic","playerid","getDuration","_executeStartActions","seek","offset","playlistItem","_executeRelevantActions","_getActiveActions","_getActionsForPosition","allActions","filter","sort","a","b","executionType","_getRelevantTimelineActions","currentActions","getPosition","_getTimelineActionsForUri","resize","some","event","pos","_lastPosition","_executeActionsForPosition","_executeSeekActions","play","executions","exec","newActions","promise","EngineFactory","windowRef","_init","_resizeTimeout","_actionsLookup","_importer","_eventBus","_requestInstanceHandler","_requestActionHandler","_requestFunctionHandler","_resizeHandler","clearTimeout","setTimeout","broadcast","_importSystemEntry","_importSystemEntryWithEventbusDependency","resolver","engine","engineClass","ActionRegistryEventbusListener","registerEventlistener","registerInterceptor","RequestVideoUriInterceptor","process","_actionregistryEventbusListener","_requestVideoUriInterceptor","actionRegistry","eventArgs","slice","controllers","providers","main","_defineProperty","_EventListenerController","_LabelController","_LottieController","_NavigationController","_ProgressbarController","_RoutingController","_SubtitlesController","EventListenerController","actionInstanceInfos","selectedElement","actionOperationData","_this$operationData","actionName","_this$_isStartAction2","_slicedToArray","_isStartAction","isStart","actionInstance","_getElementTagName","_selectEventHandler","_eventHandler","tagName","toUpperCase","target","targetValue","_executeAction","actionInfo","options","opt","selected","LabelController","listeners","currentLanguage","labelData","labelCollection","createTextDataLookup","setLabel","func","code","_lottieWeb","LottieController","anim","serializedData","serializedIEData","animationData","freezePosition","endPosition","renderer","autoplay","viewBox","url","parseFilename","iefallback","setting","values","resultHolder","labelCollections","createAnimation","onComplete","playSegments","serialized","isIE","join","animData","lottie","loadAnimation","timeCompleted","find","attr","infos","document","NavigationController","playerId","navigation","navLookup","navVidIdLookup","ctrlLookup","activeNavigationPoint","labelControllers","eventhandlers","buildNavigationData","handleNavigateVideoUrl","highlightMenu","handleRequestCurrentNavigation","handleVideoComplete","buildHtml","initHistory","navId","getQueryVariable","videoIndex","videoUrlIndex","variableIdx","href","location","hashIndex","query","substring","navigationData","title","handler","ctrl","detach","onpopstate","state","parentElm","ul","addNavElement","append","visible","li","addLabel","addClickHandler","children","mouseup","menuMouseupHandler","navdata","requestedVideoPosition","pushCurrentState","navElm","removeClass","addClass","log","navData","autoNext","next","attach","nav","previous","nextId","roots","ProgressbarController","textElement","detachers","positionUpdateHandler","clickHandler","detacher","perc","css","text","RoutingController","handleBeforeRequestVideoUrl","handlePushHistoryState","handlePopstate","history","pushState","navigationId","isHistoryRequest","item","currentPosition","currentState","replaceState","SubtitlesController","actionLookup","lastFunc","detachTime","onTimeHandler","detachLangChange","languageChangeHandler","internalDetach","detachMethods","f","newLanguage","titleLanguageLookup","controllerData","subtitleData","titles","subtitleTimeLookup","j","jj","subs","lang","setTitle","removeTitle","createActionLookup","_addClass","_addControllerToElement","_addOptionList","_animate","_animateWithClass","_broadcastEvent","_clearElement","_clearOperationData","_customFunction","_endAction","_extendController","_getControllerFromElement","_getControllerInstance","_getElementDimensions","_loadJSON","_removeClass","_removeControllerFromElement","_removeElement","_removePropertiesFromOperationData","_reparentElement","_requestAction","_resizeAction","_selectElement","_setElementAttributes","_setElementContent","_setOperationData","_setStyle","_startAction","_toggleClass","_toggleElement","_wait","className","_attachControllerToElement","_internalResolve","controllerInstance","_getElementData","controller","valueProperty","labelProperty","defaultIndex","defaultValue","optionData","createOption","optionElements","animationEasing","animationProperties","animationDuration","animate","one","_resolveEventArguments","_removeEventDataFromOperationData","eventArguments","empty","mergedData","controllerExtension","controllerName","warn","_modifyDimensions","dimensions","modifier","width","innerWidth","height","innerHeight","ratioModifier","_modifier$split2","prefix","_getModifierSuffix2","endIdx","isPercent","getModifierSuffix","parseInt","widthModifier","heightModifier","ratios","modifyDimensionsByRatio","jsonCache","cache","fetch","response","body","removeElement","remove","propertyNames","newParentSelector","appendTo","_operationData","findElementBySelector","useExistingAsRoot","attributes","attrName","template","_resolvePropertyValues","toggleClass","toggle","milliseconds","_jwplayerTimelineProvider","_requestAnimationFrameTimelineProvider","JwPlayerTimelineProvider","providerid","playerSettings","player","currentLoopHandler","_addEventListeners","timeline","type","urls","_extractUrls","jwp","jwplayer","w","h","setup","file","image","poster","controls","autostart","displaytitle","displaydescription","nextUpDisplay","abouttext","aboutlink","stretching","repeat","playlist","_handlePlayerReady","load","_loopHandler","_seekedHandler","_handlePlayerComplete","getPlaylistIndex","toggleplay","_container","getProvider","paused","callback","getState","getMute","getVolume","setMute","volume","setVolume","RequestAnimationFrameTimelineProvider","requestID","last","current","_updateBound","_update","random","currentPlaylistItem","firstFrame","reset","_resize","requestDurationHandler","now","FIRSTFRAME","_reset","requestAnimationFrame","_cancelAnimationFrame","callBack","cancelAnimationFrame","_extractPlaylist","_start"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,UAAAA,QAAA,eACA,mBAAAC,eAAAC,IACAD,OAAA,kCAAAJ,GACA,iBAAAC,QACAA,QAAA,QAAAD,EAAAG,QAAA,UAAAA,QAAA,eAEAJ,EAAA,QAAAC,EAAAD,OAAAO,GAAAP,OAAAO,IARA,CASCC,OAAA,SAAAC,EAAAC,GACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAX,QAGA,IAAAC,EAAAQ,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAb,QAAA,IAUA,OANAc,EAAAH,GAAAI,KAAAd,EAAAD,QAAAC,IAAAD,QAAAU,GAGAT,EAAAY,GAAA,EAGAZ,EAAAD,QA0DA,OArDAU,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAlB,EAAAmB,EAAAC,GACAV,EAAAW,EAAArB,EAAAmB,IACAG,OAAAC,eAAAvB,EAAAmB,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAA1B,GACA,oBAAA2B,eAAAC,aACAN,OAAAC,eAAAvB,EAAA2B,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAvB,EAAA,KAAiD6B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,EAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAApC,GACA,IAAAmB,EAAAnB,KAAA+B,EACA,WAA2B,OAAA/B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAS,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,oGClFMC,4GAEKC,oBAAsB,+BAF3BD,EAGKE,aAAe,wBAHpBF,EAIKG,aAAe,wBAJpBH,EAKKI,cAAgB,yBALrBJ,EAMKK,aAAe,wBANpBL,EAOKM,eAAiB,0BAPtBN,EAQKO,kBAAoB,6BARzBP,EASKQ,iBAAmB,4BATxBR,EAYKS,SAAW,oBAZhBT,EAaKU,KAAO,gBAbZV,EAcKW,OAAS,kBAddX,EAeKY,SAAW,oBAfhBZ,EAgBKa,KAAO,gBAhBZb,EAiBKc,KAAO,gBAjBZd,EAkBKe,MAAQ,iBAlBbf,EAmBKgB,KAAO,gBAnBZhB,EAoBKiB,OAAS,kBApBdjB,EAqBKkB,gBAAkB,2BArBvBlB,EAsBKmB,YAAc,uBAtBnBnB,EAyBKoB,iBAAmB,mBAzBxBpB,EA0BKqB,eAAiB,iBA1BtBrB,EA2BKsB,iBAAmB,mBA3BxBtB,EA4BKuB,qBAAuB,uBA5B5BvB,EA6BKwB,4BAA8B,8BA7BnCxB,EA8BKyB,oBAAsB,sBA9B3BzB,EA+BK0B,kCAAoC,oCA/BzC1B,EAgCK2B,yBAA2B,2BAhChC3B,EAiCK4B,uBAAyB,yBAjC9B5B,EAkCK6B,sBAAwB,wBAlC7B7B,EAqCK8B,yBAA2B,2BArChC9B,EAsCK+B,0BAA4B,4BAtCjC/B,EAuCKgC,yBAA2B,2BAvChChC,EAwCKiC,gBAAkB,wBAGdjC,qGC3Cf,MAAAkC,KAAApE,EAAA,uBAEA,WAAyBqE,EAASC,EAAeC,GAEzCF,EADAE,GACQ,EAAAH,EAAA,SAAmBE,EAAeC,GAElCD,8BCNhB/E,EAAAD,QAAAO,wSCAA,WAA4ByE,EAAeC,GACvC,OAAOC,EAAcF,EAAeC,sGCDxC,WAAkBE,GACd,OAAOC,KAAKC,MAAMD,KAAKE,UAAUH,8CCDrC,SAASI,EAAepE,EAAMqE,GAC1B,OAAOA,EAAQC,KAAKtE,6FAGxB,IAAMuE,EAAwBH,EAAenD,KAAK,KAAM,4xBCJxD,IAAAuD,kSAAAC,CAAAlF,EAAA,IACAmF,EAAAC,EAAApF,EAAA,KACAqF,EAAAD,EAAApF,EAAA,KACAsF,EAAAF,EAAApF,EAAA,KACAuF,EAAAH,EAAApF,EAAA,IACAwF,EAAAJ,EAAApF,EAAA,KACAyF,EAAAL,EAAApF,EAAA,KACA0F,EAAAN,EAAApF,EAAA,qDACeiF,4VCRf,IAAAU,EAAAP,EAAApF,EAAA,IACA4F,EAAAR,EAAApF,EAAA,IACA6F,EAAAT,EAAApF,EAAA,uICFA,MAAA8F,KAAA9F,EAAA,6ZAIC,SAAA+F,EAAYC,EAAYC,gGAAUC,CAAAC,KAAAJ,GACjCI,KAAK1F,KAAOuF,EAAWvF,KACvB0F,KAAKC,gBAAkBJ,EAAWI,gBAClCD,KAAKE,SAAWJ,uFAGXK,GAAmB,IAAAC,EAAAJ,KAOxB,OANe,IAAIK,QAAQ,SAACnC,EAASoC,GACpCF,EAAKG,iBAAiBH,EAAKH,gBAAiB,EAAG/B,EAASoC,EAAQH,KADlD,MAEN,SAACK,GAET,MADAC,QAAQC,MAAR,0BAAAC,OAAwCP,EAAK9F,KAA7C,MACMkG,6CAKSI,EAAYC,EAAK3C,EAASoC,EAAQQ,GAAuB,IAAAC,EAAAf,KAGzE,GAFAc,EAAwBA,GAAyB,GAE7CD,EAAMD,EAAWI,OAAQ,CAC5B,IAAMC,EAAgBL,EAAWC,GAE3BK,EAAsB7C,EAAcyC,EAD5BG,EAAc9C,eAAiB,EAAAwB,EAAA,SAASsB,EAAc9C,eAAiB,IAG/EgD,EAASF,EAAcG,SAASF,EAAqBlB,KAAKE,UAEnDiB,EAAOE,KACnBF,EAAOE,KAAK,SAACC,GACZP,EAAKR,iBAAiBK,IAAcC,EAAK3C,EAASoC,EAAQgB,KAD3D,MAES,SAACZ,GACTJ,EAAOI,KAGIV,KAAKO,iBAAiBK,IAAcC,EAAK3C,EAASoC,EAAQa,QAGvEjD,EAAQ4C,kCAIH3C,GAAe,IAAAoD,EAAAvB,KAKrB,OAHe,IAAIK,QAAQ,SAACnC,EAASoC,GACpCiB,EAAKC,uBAAuBD,EAAKtB,gBAFtB,EAE4C/B,EAASoC,EAAQnC,oDAKnDyC,EAAYC,EAAK3C,EAASoC,EAAQQ,GAAuB,IAAAW,EAAAzB,KAG/E,GAFAc,EAAwBA,GAAyB,GAE7CD,EAAMD,EAAWI,OAAQ,CAC5B,IAAMC,EAAgBL,EAAWC,GACjC,GAAKI,EAAcS,eAAiB,CACnC,IACMR,EAAsB7C,EAAcyC,EAD3BG,EAAc9C,eAAkB,EAAAwB,EAAA,SAASsB,EAAc9C,eAAiB,IAGjFgD,EAASF,EAAcS,eAAeR,GACxCC,EAAOE,KACVF,EAAOE,KAAK,SAACC,GACZG,EAAKD,uBAAuBZ,IAAcC,EAAK3C,EAASoC,EAAQgB,KADjE,MAES,SAACZ,GACTJ,EAAOI,KAGRV,KAAKwB,uBAAuBZ,IAAcC,EAAK3C,EAASoC,EAAQa,QAGjEnB,KAAKwB,uBAAuBZ,IAAcC,EAAK3C,EAASoC,EAAQQ,QAGjE5C,EAAQ4C,+GC3EX,MAAAtB,KAAA3F,EAAA,g1BAIC,SAAA8H,EAAY9B,EAAYC,GAAU,IAAAM,EAAA,mGAAAL,CAAAC,KAAA2B,IACjCvB,EAAAwB,EAAA5B,KAAA6B,EAAAF,GAAAzH,KAAA8F,KAAMH,EAAYC,KACbgC,cAAgBjC,EAAWiC,cAFC1B,8OAFPR,0FAOvBO,GAAmB,IAAAY,EAAAf,KACtB,GAAKA,KAAK8B,eAAmB9B,KAAK8B,cAAcd,OAAS,CAQxD,OANe,IAAIX,QAAQ,SAACnC,EAASoC,GACpCS,EAAKR,iBAAiBQ,EAAKe,cAFhB,EAEoC5D,EAASoC,EAAQH,KADlD,MAEN,SAACK,GAET,MADAC,QAAQC,MAAR,uBAAAC,OAAqCI,EAAKzG,KAA1C,MACMkG,IAIR,OAAO,IAAIH,QAAQ,SAACnC,GACnBA,EAAQiC,iHCrBX,MAAAX,EAAA3F,EAAA,GACAkI,KAAAlI,EAAA,ywBAII,SAAAmI,EAAYC,EAAU/B,gGAAUH,CAAAC,KAAAgC,GAC5BhC,KAAKiC,SAAWA,EAChBjC,KAAKE,SAAWA,mGAGFgC,GACd,OAAOlC,KAAKiC,SAAL,OAAqBC,GAAYA,mCAGpCC,EAAwBC,GAC5B,IAAMC,EAAgB,GAOtB,OANArC,KAAKsC,qBAAqBF,EAAeA,GACzCpC,KAAKuC,kBAAkBH,GACvBpC,KAAKwC,0BAA0BJ,GAC/BpC,KAAKyC,sBAAsBL,EAAeC,GAC1CrC,KAAK0C,kBAAkBN,EAAeC,GACtCrC,KAAK2C,uBAAuBR,EAAwBC,GAC7CC,iDAGYF,EAAwBS,GAAQ,IAAAxC,EAAAJ,KAC9CmC,GAA4BS,EAAOC,eACpCD,EAAOC,aAAaC,QAAQ,SAACjD,GACzB,IAAMkD,EAAc,IAAInD,SAAOC,EAAYO,EAAKF,UAChDiC,EAAuBa,eAAeD,EAAalD,EAAWoD,UAAWpD,EAAWqD,qBAEjFN,EAAOC,wDAIJD,EAAQP,GAAe,IAAAtB,EAAAf,KACjC4C,EAAO9D,UACP8D,EAAO9D,QAAQgE,QAAQ,SAACjD,GACpB,IAAMsD,EAAS,IAAIxB,gBAAc9B,EAAYkB,EAAKb,UAClDmC,EAAcxC,EAAWvF,MAAQ6I,WAE9BP,EAAO9D,uDAIA8D,EAAQP,GAAe,IAAAd,EAAAvB,KACpC4C,EAAOQ,cAGZR,EAAOQ,YAAcR,EAAOQ,YAAYC,IAAI,SAACxD,GACzC,IAAMyD,EAAa,IAAI3B,gBAAc9B,EAAY0B,EAAKrB,UAEtD,OADAmC,EAAcxC,EAAWvF,MAAQgJ,uDAKfV,GAClBA,EAAOW,WACPX,EAAOW,UAAUT,QAAQ9C,KAAKwD,yBAAyBjI,KAAKyE,wDAI3CyD,GAAgB,IAAAhC,EAAAzB,KAChCyD,EAAeC,kBAGpBD,EAAeC,gBAAkBD,EAAeC,gBAAgBL,IAAI,SAACxD,GACjE,IAAM8D,EAAiB,IAAIC,iBAAe/D,EAAY4B,EAAKvB,UAI3D,OAHKyD,EAAe7B,gBAChB6B,EAAe7B,cAAgB,IAE5B6B,+CAIGf,GAAQ,IAAAiB,EAAA7D,KAChB8D,EAAqB,GACvBlB,EAAOW,WACPX,EAAOW,UAAUT,QAAQ,SAACiB,GACtBD,EAAmBE,KAAnBC,MAAAH,EAAkBI,EAASL,EAAKM,EAAkBJ,EAAaL,qBAI7C1D,KAAKmE,EAAkBvB,EAAOQ,aAC3BzC,OAAOmD,GACPnD,OAAOX,KAAKmE,EAAkBvB,EAAO9D,UACrC6B,OAAOX,KAAKmE,EAAkBvB,EAAOC,eAEhDC,QAAQ,SAACsB,GACvBA,EAAOhD,SAAWyC,EAAKQ,kBAAkBD,EAAOlC,2DAInCU,EAAQ0B,GAAc,IAAAC,EAAAvE,KACvC,GAAc,MAAV4C,EAGJ,GAAIA,EAAO4B,cAAgBC,MACvB,IAAK,IAAI1K,EAAI,EAAG2K,EAAK9B,EAAO5B,OAAQjH,EAAI2K,EAAI3K,IACxCiG,KAAKsC,qBAAqBM,EAAO7I,GAAIuK,QAGzC7J,OAAOkK,KAAK/B,GAAQE,QAAQ,SAACxH,GACzBiJ,EAAKK,sBAAsBtJ,EAAKsH,EAAQ0B,mDAK9BhJ,EAAKsH,EAAQ0B,GAC/B,IAAMtJ,EAAQ4H,EAAOtH,GACrB,GAAqB,iBAAVN,GACP,GAAKA,EAAM6J,WAAW,WAAa,CAC/B,IAAMC,EAAiB9J,EAAM+J,OAAO,EAAG/J,EAAMgG,QAC7C4B,EAAOtH,IAAO,EAAAyG,EAAA,SAAuB+C,EAAgBR,QAEpD,GAAKtJ,EAAM6J,WAAW,aAAe,CACtC,IAAMG,EAAchK,EAAM+J,OAAO,EAAG/J,EAAMgG,QAC1C4B,EAAOtH,GAAO0E,KAAKqE,kBAAkBW,QAEpC,GAAKhK,EAAM6J,WAAW,SAAW,CAClC,IAAMI,EAAUjK,EAAM+J,OAAO,EAAG/J,EAAMgG,QAChCkE,EAAOlF,KAAKqE,kBAAkBY,GACpCrC,EAAOtH,GAAO4J,OAEM,WAAjBC,EAAOnK,IACdgF,KAAKsC,qBAAqBM,EAAOtH,GAAMgJ,6CAI7BxF,GACd,IAAIqC,EAAS,GACb,OAAKrC,GAGLA,EAAQgE,QAAQ,SAACK,GAEThC,EADAgC,EAAOrB,cACEX,EAAOR,OAAOwC,EAAOlD,gBAAgBU,OAAOwC,EAAOrB,gBAEnDX,EAAOR,OAAOwC,EAAOlD,mBAG/BkB,8GC7If,WAAwBiE,EAAYC,GAChC,IAAKD,EACD,MAAME,MAAM,iCAEhB,IAAKD,EACD,MAAMC,MAAM,mCAEhB,IAAIC,EAAkBF,EAClBG,EAAS,KAYb,OAXAJ,EAAWtC,QAAQ,SAAC2C,EAAMC,GACtB,GAAIA,IAAUN,EAAWpE,OAAO,EAAG,CAC/B,IAAM2E,EAAQF,EAAKG,MAAM,KACN,EAAfD,EAAM3E,SACNyE,EAAOE,EAAM,GACbH,EAASG,EAAM,IAGvBJ,EAAkBA,EAAgBE,KAG9BD,EAAUD,EAAkBC,EAASD,qGCpBjD,MAAAnG,KAAAvF,EAAA,8MAII,SAAAgM,EAAYC,EAAUC,EAAQ7F,GAC1B,+FADoCH,CAAAC,KAAA6F,IAC/BC,IAAaA,EAAS9E,OACvB,MAAM,IAAIsE,MAAM,wDAEpB,IAAKS,EACD,MAAM,IAAIT,MAAM,kCAEpB,IAAKpF,EACD,MAAM,IAAIoF,MAAM,oCAEpBtF,KAAKgG,EAAe,GACpBhG,KAAKiG,EAAmBH,EACxB9F,KAAKkG,EAAqB,GAC1BlG,KAAKmG,kBAAkBJ,GACvB/F,KAAKoG,qBAAqBlG,uGAGTA,GACjBF,KAAKkG,EAAmBlC,KAAK9D,EAASmG,GAAGtK,UAAmB8B,yBAA0BmC,KAAKsG,6BAA6B/K,KAAKyE,QAC7HA,KAAKkG,EAAmBlC,KAAK9D,EAASmG,GAAGtK,UAAmB+B,0BAA2BkC,KAAKuG,8BAA8BhL,KAAKyE,QAC/HA,KAAKkG,EAAmBlC,KAAK9D,EAASmG,GAAGtK,UAAmBgC,yBAA0BiC,KAAKwG,6BAA6BjL,KAAKyE,QAC7HA,KAAKkG,EAAmBlC,KAAK9D,EAASmG,GAAGtK,UAAmBiC,gBAAiBgC,KAAKyG,qBAAqBlL,KAAKyE,6DAGnF0G,GACzBA,EAAe1G,KAAKiG,wDAGKU,EAASD,GAClCA,EAAe1G,KAAKgG,EAAaW,0DAGPC,EAAUF,GAAgB,IAAAtG,EAAAJ,KAIpD0G,EAHyBE,EAASvD,IAAI,SAACsD,GACnC,OAAOvG,EAAK4F,EAAaW,mDAKZb,GACbA,GAAYA,EAAS9E,OACrBhB,KAAKiG,EAAmBH,EAExBrF,QAAQC,MAAM,gGAIJqF,GAAQ,IAAAhF,EAAAf,KACtB+F,EAAOjD,QAAQ,SAAC+D,GACZ9F,EAAKiF,EAAaa,EAAMC,IAAMD,EAAMd,ioBCnD/C,SAAAgB,iGAAchH,CAAAC,KAAA+G,GACb/G,KAAKgH,+FAILhH,KAAKiH,cAAgB,GACrBjH,KAAKkH,eAAiB,GACtBlH,KAAKmH,kBAAoB,iDAGJlE,EAAWC,GAOhC,OANKA,GAAgBA,EAAWlC,SAC/BiC,EAAS,GAAAtC,OAAMsC,EAAN,KAAAtC,OAAmBuC,IAExBlD,KAAKmH,kBAAkBlE,KAC3BjD,KAAKmH,kBAAkBlE,GAAa,IAE9BjD,KAAKmH,kBAAkBlE,6CAGbA,EAAWC,GAO5B,OANKA,GAAgBA,EAAWlC,SAC/BiC,EAAS,GAAAtC,OAAMsC,EAAN,KAAAtC,OAAmBuC,IAExBlD,KAAKiH,cAAchE,KACvBjD,KAAKiH,cAAchE,GAAa,IAE1BjD,KAAKiH,cAAchE,8BAGxBA,EAAWmE,EAAclE,GAAY,IAAAnC,EAAAf,KAEvC,OADAA,KAAKqH,EAAkBpE,EAAWC,GAAYc,KAAKoD,GAC5C,WACNrG,EAAKuG,IAAIrE,EAAWmE,EAAclE,iCAI/BD,EAAWmE,EAAclE,GAC7B,IAAM9C,EAAQJ,KAKdA,KAAKqG,GAAGpD,EAJsB,SAAxBsE,IACLH,EAAYnD,WAAZ,EAAgBuD,WAChBpH,EAAMkH,IAAIrE,EAAWsE,EAAuBrE,IAEHA,+BAGvCD,EAAWmE,EAAclE,GAC5B,IAAMuE,EAAWzH,KAAKqH,EAAkBpE,EAAWC,GACnD,GAAIuE,EAAU,CACb,IAAM5G,EAAM4G,EAASC,QAAQN,IAClB,EAAPvG,GACH4G,EAASE,OAAO9G,EAAK,sCAKdoC,EAAW2E,GACpB5H,KAAK6H,EAAc5E,EAAW,KAAM2E,6CAGnB3E,EAAWC,EAAY0E,GACxC5H,KAAK6H,EAAc5E,EAAWC,EAAY0E,iDAGrBE,GACrB9H,KAAKkH,eAAelD,KAAK8D,+CAGN7E,EAAW8E,EAAa7E,GACtBlD,KAAKgI,EAAsB/E,EAAWC,GAC9Cc,KAAK+D,yCAGL9E,EAAWC,GAAqB,IAAT0E,EAAS,EAAAJ,UAAAxG,aAAAxH,IAAAgO,UAAA,GAAAA,UAAA,GAAJ,GACpBxH,KAAKgI,EAAsB/E,EAAWC,GAC9CJ,QAAQ,SAACiF,GACrBH,EAAOG,EAAYE,UAAUL,KAE9B5H,KAAKkH,eAAepE,QAAQ,SAACoF,GAC5BA,EAASC,YAAYlF,EAAWC,EAAY0E,KAE7C,IAAMH,EAAWzH,KAAKqH,EAAkBpE,EAAWC,GACnD,GAAIuE,EACH,IAAK,IAAI1N,EAAI,EAAGC,EAAIyN,EAASzG,OAAQjH,EAAIC,EAAGD,IAC3C0N,EAAS1N,GAATkK,MAAAwD,EAAQvD,EAAO0D,gHCtFnB,MAAAQ,KAAAvO,EAAA,wBAEA,WAA4CwL,EAAcgD,GACtD,GAAKA,GAAmBA,EAAcC,aAAiBD,EAAcC,cAAczD,WAAW,kBAAoB,CAC9G,IAAI0D,EAAYF,EAAczC,MAAM,KAEpC,OADA2C,EAAUC,SACH,EAAAJ,EAAA,SAAeG,EAAWlD,GAErC,OAAOgD,qGCRX,IAAAI,EAAAxJ,EAAApF,EAAA,KACA8F,EAAAV,EAAApF,EAAA,8CAEA,WAA+BsE,EAAeiH,GAC1C,IAAMsD,GAAO,EAAA/I,EAAA,SAASyF,GAChBuD,EAAUC,UAAmCrN,KAAK,KAAM4C,GAC9D,IAAI,IAAI0K,KAAgBzD,EAAY,CAChC,IAAM0D,EAAgB1D,EAAWyD,GACjCH,EAAKG,GAAgBF,EAAQG,GAEjC,OAAOJ,qGCVX,MAAAjJ,KAAA5F,EAAA,unCAIC,SAAA+J,EAAY/D,EAAYC,GAAU,IAAAM,EAAA,mGAAAL,CAAAC,KAAA4D,IACjCxD,EAAAwB,EAAA5B,KAAA6B,EAAA+B,GAAA1J,KAAA8F,KAAMH,EAAYC,KACbiJ,QAAS,EACd3I,EAAK4I,SAAWnJ,EAAWmJ,SAC3B5I,EAAK4I,SAASC,OAAS7I,EAAK4I,SAASC,MACrC7I,EAAK4I,SAASE,KAAO9I,EAAK4I,SAASE,IALF9I,8OAFNuB,8FAW3B,OAAM3B,KAAK+I,QAAY/I,KAAKgJ,SAASE,IAAM,GAC1ClJ,KAAK+I,QAA+B,EAArB/I,KAAKgJ,SAASE,IAC7BC,EAAAtH,EAAA+B,EAAAjI,WAAA,QAAAqE,MAAA9F,KAAA8F,OAEM,IAAIK,QAAQ,SAACnC,GACnBA,kCAIEiC,GAEH,OADAH,KAAK+I,QAAS,EACdI,EAAAtH,EAAA+B,EAAAjI,WAAA,MAAAqE,MAAA9F,KAAA8F,KAAiBG,kCAGXhC,GACN,OAAK6B,KAAK+I,QAAY/I,KAAKgJ,SAASE,IAAM,EACzCC,EAAAtH,EAAA+B,EAAAjI,WAAA,SAAAqE,MAAA9F,KAAA8F,KAAoB7B,GAEd,IAAIkC,QAAQ,SAACnC,GACnBA,kHChCH,MAAAkK,KAAAvO,EAAA,wBAEA,WAAgCuP,EAAe/D,GAC3C,IAAMD,EAAagE,EAAcxD,MAAM,KACvC,OAAO,EAAAwC,EAAA,SAAehD,EAAYC,sGCJtC,IAAAhG,EAAAJ,EAAApF,EAAA,KACAwP,EAAApK,EAAApF,EAAA,IACAuF,EAAAH,EAAApF,EAAA,qOAII,SAAAyP,EAAYlH,EAAelC,EAAUqJ,gGAAkBxJ,CAAAC,KAAAsJ,GACnDtJ,KAAKwJ,EAAiBpH,EACtBpC,KAAKT,EAAYW,EACjBF,KAAKyJ,EAAoBF,EACzBvJ,KAAK0J,EAAyB,GAC9B1J,KAAKkG,EAAqB,yFAI1BlG,KAAK2J,IAEL3J,KAAK4J,IAEL5J,KAAKX,EAAmB,IAAIwG,UAAgB7F,KAAKwJ,EAAe1D,SAAU9F,KAAKwJ,EAAezD,OAAQ/F,KAAKT,GALxG,IAOKgE,EAAcvD,KAAKwJ,EAAnBjG,UAKR,OAJAvD,KAAK6J,EAAuBtG,GAAaA,EAAUvC,OAAUuC,EAAU,GAAGuG,IAAM,KAEhF9J,KAAK+J,IAEE/J,KAAKgK,oDAIZ,IAAMC,GAAY,EAAAZ,EAAA,SAAErJ,KAAKwJ,EAAeU,mBACxC,IAAKD,IAAcA,EAAUjJ,OACzB,MAAM,IAAIsE,MAAJ,iCAAA3E,OAA2CX,KAAKwJ,EAAeU,oBAHrD,IAKZC,EAAmBnK,KAAKwJ,EAAxBW,eACJA,GAAkBA,EAAenJ,OACjCiJ,EAAUG,KAAKD,GAEf1J,QAAQ4J,QAAQ,0GAIM,IAAAjK,EAAAJ,KAC1B,GAAKA,KAAKwJ,EAAec,yBAMzB,OAFwB,EAAAjB,EAAA,aAAA1I,OAAMX,KAAKwJ,EAAec,yBAAyBC,WAEvDvJ,OACT,IAAIX,QAAQ,SAACnC,GAChBkC,EAAKqJ,EAAkBe,OAAOnJ,KAAK,WAC/BjB,EAAKqK,EAAiBrK,EAAKoJ,EAAepG,YAAc,SAAS/B,KAAK,WAClEjB,EAAKqJ,EAAkBpD,GAAGtK,UAAmBU,KAAM2D,EAAKsK,EAAenP,KAAK6E,EAAMuK,KAAKC,QACvFxK,EAAKqJ,EAAkBpD,GAAGtK,UAAmBgB,KAAMqD,EAAKyK,EAAetP,KAAK6E,EAAMuK,KAAKC,QACvF1M,EAAQkC,EAAKqJ,SAMtB,IAAIpJ,QAAQ,SAACnC,GAChBA,wCAKJ8B,KAAKwJ,EAAiB,KACtBxJ,KAAKT,EAAY,KACjBS,KAAKyJ,EAAoB,KACzBzJ,KAAK0J,EAAyB,KAC9B1J,KAAKkG,EAAmBpD,QAAQ,SAAAgI,GAAO,OAAIA,MACvC9K,KAAKyJ,GACLzJ,KAAKyJ,EAAkBsB,gEAK3B/K,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmByB,oBAAqBwC,KAAKgL,EAAyBzP,KAAKyE,KAAMA,KAAKwJ,EAAeU,qBACpJlK,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmBuB,qBAAsB0C,KAAKiL,EAA0B1P,KAAKyE,QAC5HA,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmB0B,kCAAmCuC,KAAKkL,EAA+B3P,KAAKyE,QAC9IA,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmB2B,yBAA0BsC,KAAKmL,EAAwB5P,KAAKyE,QAC9HA,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmB4B,uBAAwBqC,KAAKoL,EAA6B7P,KAAKyE,QACjIA,KAAKkG,EAAmBlC,KAAKhE,KAAKT,EAAU8G,GAAGtK,UAAmB6B,sBAAuBoC,KAAKqL,EAAsB9P,KAAKyE,wDAGrG,IAAAe,EAAAf,KACfA,KAAKwJ,EAAejG,WAGzBvD,KAAKwJ,EAAejG,UAAUT,QAAQ,SAACiB,GACnCA,EAAaL,gBAAgBZ,QAAQ/B,EAAKuK,EAAmB/P,KAAKwF,EAAMgD,EAAa+F,mDAI1EA,EAAKyB,GACpB,IAAMtC,EAAQsC,EAAevC,SAASC,MAChCuC,EAAyBxL,KAAKyL,EAA4BzL,KAAK0L,EAAqB1L,KAAK0J,EAAwBI,GAAMb,GACvH0C,EAAcJ,EAAetC,MAAM1N,KAAKgQ,GAC9CC,EAAuBxH,KAAK2H,GAE5B,IAAIzC,EAAMqC,EAAevC,SAASE,IAIlC,GAHMA,IAAS0C,MAAM1C,KACjBA,EAAMqC,EAAevC,SAASE,IAAM2C,KAEpCC,SAAS5C,GAAM,CACf,IAAM6C,EAAuB/L,KAAKyL,EAA4BzL,KAAK0J,EAAuBI,GAAMZ,GAC1F8C,EAAYT,EAAerC,IAAI3N,KAAKgQ,GAC1CQ,EAAqB/H,KAAKgI,iDAIbC,EAAQnC,GAIzB,OAHKmC,EAAOnC,KACRmC,EAAOnC,GAAO,IAEXmC,EAAOnC,uDAGUmC,EAAQC,GAIhC,OAHKD,EAAOC,KACRD,EAAOC,GAAY,IAEhBD,EAAOC,2CAGFpN,EAASqN,GAAmB,IAAA5K,EAAAvB,KAAPa,EAAO,EAAA2G,UAAAxG,aAAAxH,IAAAgO,UAAA,GAAAA,UAAA,GAAH,EACrC,OAAI3G,EAAM/B,EAAQkC,OACClC,EAAQ+B,GAEAsL,KACR9K,KAAK,WAChB,OAAOE,EAAKkJ,EAAgB3L,EAASqN,IAActL,KAGpD,IAAIR,QAAQ,SAACnC,GAChBA,uDAIiBkO,EAAoB1F,GACzCA,GAAe,EAAA2C,EAAA,SAAE+C,sDAGK1G,EAAOwG,EAAUG,GAAuB,IAAA5K,EAAAzB,KAC9DkM,EAAWA,GAAY,EACvBG,EAAwBA,GAAyB,EACjDrM,KAAKyJ,EAAkB6C,OACvBtM,KAAKuM,IAAmBlL,KAAK,WACzB,IAAMoC,EAAiBhC,EAAK+H,EAAejG,UAAUmC,GACrDjE,EAAKoI,EAAsBpG,EAAeqG,IAC1CrI,EAAKgI,EAAkB+C,KAAO/I,EAAe+I,MACvC/K,EAAKgI,EAAkB+C,MAAqB,EAAXN,GACnCzK,EAAKgI,EAAkBgD,KAAK1Q,UAAmB2Q,YAAa,WACxDjL,EAAKgI,EAAkBkD,QACvBlL,EAAKlC,EAAUqN,kBAAkB7Q,UAAmBS,SAAUiF,EAAKgI,EAAkBoD,SAAU,CAACpL,EAAKqL,gBACrGrL,EAAKsL,IAAuB1L,KAAK,WAC7BI,EAAKgI,EAAkBuD,KAAKd,GAC5BzK,EAAKoJ,EAAeF,KAAKC,MAAO,CAAEqC,OAAQf,QAItDzK,EAAKgI,EAAkByD,aAAaxH,gDAKxC,OAAO1F,KAAKmN,EAAwBnN,KAAKoN,EAAmB,sDAI5D,OAAOpN,KAAKmN,EAAwBnN,KAAKqN,EAAuB9R,KAAKyE,KAAM,GAAI,wDAG5DkM,EAAUoB,GAC7B,OAAOA,EAAWC,OAAO,SAACpK,GACtB,OAASA,EAAO4F,QAAa5F,EAAO6F,SAASC,OAASiD,GAAc/I,EAAO6F,SAASE,KAAOgD,8CAIjFoB,GAId,OAHgBA,EAAWC,OAAO,SAACpK,GAC/B,OAAOA,EAAO4F,SAEHyE,KAAK,SAACC,EAAGC,GACpB,OAAIA,EAAE1E,SAASC,MAAQwE,EAAEzE,SAASC,OACtB,EACDyE,EAAE1E,SAASC,MAAQwE,EAAEzE,SAASC,MAC9B,EAEA,oDAKKsE,EAAQI,GAC5B,IAAMjK,EAAkB1D,KAAK4N,IACvBC,EAAiBN,EAAOtJ,MAAMjE,KAAM,CAAC0D,IAC3C,OAAO1D,KAAKyK,EAAgBoD,EAAgBF,EAAe,0DAGhCjH,GAC3BA,EAAeiE,KAAKC,MAAM5K,KAAKyJ,EAAkBqE,kEAIjD9N,KAAKuM,yDAGoBzC,EAAKpE,EAAOuD,GACrC,IAAMnK,EAAUkB,KAAK+N,EAA0BjE,GACzC3G,EAAUrE,EAAWA,EAAQ4G,GAAS,KACxCvC,IACI8F,EACA9F,EAAO8F,QAEP9F,EAAO+F,qDAKGY,EAAKpE,GACvB,IAAM5G,EAAUkB,KAAK+N,EAA0BjE,GACzC3G,EAAUrE,EAAWA,EAAQ4G,GAAS,KACxCvC,GACAA,EAAO6K,+DAKX,OAAOhO,KAAK+N,EAA0B/N,KAAK6J,qDAGrBC,GACtB,IAAIpG,EAQJ,OAPA1D,KAAKwJ,EAAejG,UAAU0K,KAAK,SAAClK,GAChC,OAAIA,EAAa+F,MAAQA,IACrBpG,EAAkBK,EAAaL,iBACxB,KAIRA,yCAGIkH,EAAOsD,GAClB,IAAKtC,MAAMsC,EAAMhC,UAAW,CACxB,IAAMiC,EAAMvD,EAAMsD,EAAMhC,UACpBlM,KAAKoO,IAAkBD,IACvBnO,KAAKqO,EAA2BF,GAChCnO,KAAKT,EAAUqN,kBAAkB7Q,UAAmBkB,gBAAiB+C,KAAKyJ,EAAkBoD,SAAU,CAACsB,EAAKnO,KAAKyJ,EAAkBqD,iBAEvI9M,KAAKT,EAAUqN,kBAAkB7Q,UAAmBmB,YAAa8C,KAAKyJ,EAAkBoD,SAAU,CAACqB,EAAMhC,SAAUlM,KAAKyJ,EAAkBqD,wDAInIlC,EAAOsD,GAAO,IAAArK,EAAA7D,KACnBmO,EAAMvD,EAAMsD,EAAMjB,QACpBrB,MAAMuC,IAGVnO,KAAKsO,EAAoBH,GAAK9M,KAAK,WAC/BwC,EAAK4F,EAAkB8E,4DAIJrC,GACvBlM,KAAKoO,EAAgBlC,EACrB,IAAMpN,EAAUkB,KAAK0J,EAAuB1J,KAAK6J,GACjD,GAAI/K,EAAS,CACT,IAAM0P,EAAa1P,EAAQoN,GACvBsC,GACAA,EAAW1L,QAAQ,SAAC2L,GAChBA,mDAMIN,GAAK,IAAA5J,EAAAvE,KACf0D,EAAkB1D,KAAK4N,IACvBC,EAAiB7N,KAAKoN,EAAkB1J,GACxCgL,EAAa1O,KAAKqN,EAAuBc,EAAKzK,GAE9CiL,EAAU3O,KAAKyK,EAAgBoD,EAAgB,MAAO,GAE5D,OAAO,IAAIxN,QAAQ,SAACnC,GAChByQ,EAAQtN,KAAK,WACTkD,EAAKkG,EAAgBiE,EAAY,QAAS,GAAGrN,KAAK,WAC9CnD,sHCjSpB,IAAAqB,EAAA1F,EAAA,IACAwP,EAAApK,EAAApF,EAAA,IACAuF,EAAAH,EAAApF,EAAA,IACAmF,EAAAC,EAAApF,EAAA,sOAII,SAAA+U,EAAY3M,EAAU4M,EAAW3O,gGAAUH,CAAAC,KAAA4O,GACvC5O,KAAK8O,EAAM7M,EAAU4M,EAAW3O,wFAG9B+B,EAAU4M,EAAW3O,GACvBF,KAAK+O,GAAkB,EACvB/O,KAAKgP,GAAiB,KAEtBhP,KAAKiP,GAAYhN,EAEjBjC,KAAKkP,GAAYhP,GAAY,IAAI6G,WACjC/G,KAAKkP,GAAU7I,GAAGtK,UAAmBoB,iBAAkB6C,KAAKmP,GAAwB5T,KAAKyE,OACzFA,KAAKkP,GAAU7I,GAAGtK,UAAmBqB,eAAgB4C,KAAKoP,GAAsB7T,KAAKyE,OACrFA,KAAKkP,GAAU7I,GAAGtK,UAAmBsB,iBAAkB2C,KAAKqP,GAAwB9T,KAAKyE,QAEzF,EAAAqJ,EAAA,SAAEwF,GAAWb,OAAOhO,KAAKsP,GAAe/T,KAAKyE,yCAI7CA,KAAKkP,GAAUlI,QACfhH,KAAKkP,GAAY,8CAGJ,IAAA9O,EAAAJ,MACc,EAAvBA,KAAK+O,GACLQ,aAAavP,KAAK+O,GAEtB/O,KAAK+O,EAAiBS,WAAW,WAC7BpP,EAAK8O,GAAUO,UAAU1T,UAAmBiB,SAC7C,sEAGkCkF,GAErC,OAAO,IADMlC,KAAK0P,GAAmBxN,GAC9B,CAASlC,KAAKkP,+CAGNhN,GACf,OAAOlC,KAAKiP,GAAL,OAAsB/M,GAAYA,mDAGrBA,EAAYwE,GAChCA,EAAe1G,KAAK2P,GAAyCzN,oDAGzCA,EAAYwE,GAChCA,EAAe1G,KAAK0P,GAAmBxN,kDAGrBA,EAAYwE,GAC9B,IAAMvD,EAASnD,KAAKgP,GAAe9M,GAC/BiB,EACAuD,EAAevD,IAEf1C,QAAQC,MAAR,mBAAAC,OAAiCuB,IACjCwE,EAAe,4CAIVtE,EAAewN,GAAU,IAC1B1N,EAAeE,EAAcyN,OAA7B3N,WACF4N,EAAc9P,KAAK0P,GAAmBxN,GAExCC,EAAyB,KACxBC,EAAcS,cAAkBT,EAAcS,aAAa7B,SAC5DmB,EAAyB,IAAI4N,iCAC7B/P,KAAKkP,GAAUc,sBAAsB7N,IAGzCnC,KAAKkP,GAAUe,oBAAoBlU,UAAmBuB,qBAAsB,IAAI4S,6BAA2BlQ,KAAKkP,KAEhHU,EAAWA,GAAY,IAAI5N,UAAsBhC,KAAKiP,GAAWjP,KAAKkP,IACtElP,KAAKgP,GAAiBY,EAASO,QAAQhO,EAAwBC,GAE/D,IACMmH,EAAmB,IADKvJ,KAAK0P,GAAmBtN,EAAckI,yBAAyBpI,YACpE,CAA0BlC,KAAKkP,GAAW9M,GAGnE,OAD4B,IAAI0N,EAAY1N,EAAepC,KAAKkP,GAAW3F,qYCpFnF,IAAAhK,EAAAN,EAAApF,EAAA,KACAuW,EAAAnR,EAAApF,EAAA,KACAwW,EAAApR,EAAApF,EAAA,8TCAC,SAAAkW,iGAAchQ,CAAAC,KAAA+P,GACb/P,KAAKsQ,eAAiB,iGAGRnN,EAAQF,EAAWC,GAC5BA,GAAgBA,EAAWlC,SAC/BiC,EAAS,GAAAtC,OAAMsC,EAAN,KAAAtC,OAAmBuC,IAExBlD,KAAKsQ,eAAerN,KACxBjD,KAAKsQ,eAAerN,GAAa,IAElCjD,KAAKsQ,eAAerN,GAAWe,KAAKb,uCAGzBF,EAAWC,EAAY0E,GAC7B1E,GAAgBA,EAAWlC,SAC/BiC,EAAS,GAAAtC,OAAMsC,EAAN,KAAAtC,OAAmBuC,IAE7B,IAAMpE,EAAUkB,KAAKsQ,eAAerN,GACpC,GAAInE,EAAS,CACZ,IAAMX,EAAgB,CACrBoS,UAAW3I,GAEZ9I,EAAQgE,QAAQ,SAACK,GAChBA,EAAO8F,MAAM9K,kHC1BjB,MAAAiB,KAAAvF,EAAA,8MAIC,SAAAqW,EAAYhQ,gGAAUH,CAAAC,KAAAkQ,GACrBlQ,KAAKE,SAAWA,2FAGP0H,GAET,OADA5H,KAAKE,SAASuP,UAAU1T,UAAmBwB,4BAA6BqK,EAAK4I,SACtE5I,8GCVT,IAAA6I,EAAA1R,EAAAlF,EAAA,KACA+G,EAAA7B,EAAAlF,EAAA,KACA6W,EAAA3R,EAAAlF,EAAA,KACA8W,EAAA5R,EAAAlF,EAAA,yyBAKQ,OAAOY,OAAOkK,KAAK/D,gDAInB,OAAOnG,OAAOkK,KAAK8L,8CAInB,OAAOhW,OAAOkK,KAAK+L,kCAGhBpW,GACH,OAAIsG,EAAWtG,GACXsW,EAAA,GACKtW,EAAOsG,EAAWtG,IAEhBmW,EAAYnW,GACnBsW,EAAA,GACKtW,EAAOmW,EAAYnW,IAEjBoW,EAAUpW,GACjBsW,EAAA,GACKtW,EAAOoW,EAAUpW,IAEfqW,EAAKrW,GACZsW,EAAA,GACKtW,EAAOqW,EAAKrW,IAGd,8vBCrCf,IAAAuW,EAAA5R,EAAApF,EAAA,KACAiX,EAAA7R,EAAApF,EAAA,KACAkX,EAAA9R,EAAApF,EAAA,KACAmX,EAAA/R,EAAApF,EAAA,KACAoX,EAAAhS,EAAApF,EAAA,KACAqX,EAAAjS,EAAApF,EAAA,KACAsX,EAAAlS,EAAApF,EAAA,uICNAoF,EAAApF,EAAA,QACAuF,EAAAH,EAAApF,EAAA,IACA8F,EAAAV,EAAApF,EAAA,s0BAIC,SAAAuX,iGAAcrR,CAAAC,KAAAoR,GACbpR,KAAK7B,cAAgB,KACrB6B,KAAKqR,oBAAsB,KAC3BrR,KAAK1F,KAAO,8GAGR6D,GACJ6B,KAAK7B,cAAgB,CACpBmT,gBAAiBnT,EAAcmT,gBAC/BrO,UAAW9E,EAAc8E,UACzBnE,QAASX,EAAcW,QAAQ0R,QAC/Be,oBAAqBpT,EAAcoT,qBAAsB,EAAA5R,EAAA,SAASxB,EAAcoT,0BAAuB/X,kCAIlG0G,GAAU,IAAAE,EAAAJ,KAAAwR,EACgCxR,KAAK7B,cAA7CmT,EADQE,EACRF,gBAAiBxS,EADT0S,EACS1S,QAASmE,EADlBuO,EACkBvO,UAC7BjD,KAAKqR,sBACTrR,KAAKqR,oBAAsB,GAC3BvS,EAAQgE,QAAQ,SAAC2O,GAAe,IAAAC,EAAAC,EACPvR,EAAKwR,GAAeH,GADb,GACxBI,EADwBH,EAAA,GACfpX,EADeoX,EAAA,GAM/BxR,EAASuP,UAAU1T,UAAmBqB,eAAgB,CAAC9C,EAJhC,SAACwX,GACvB1R,EAAKiR,oBAAoBrN,KAAK,CAAEiF,MAAO4I,EAAS1O,OAAQ2O,SAKT,WAA7C9R,KAAK+R,GAAmBT,GAC3BA,EAAgBjL,GAAGpD,EAAWjD,KAAKgS,GAAoBzW,KAAKyE,OAE5DsR,EAAgBjL,GAAGpD,EAAWjD,KAAKiS,GAAc1W,KAAKyE,mDAKtCrB,GAElB,OADiBA,EAAQqC,OAAUrC,EAAQ,GAAGuT,QAAUvT,EAAQuT,SACjDC,qDAGDV,GAEd,MAAe,SADAA,EAAW1M,OAAO,EAAG,OAAO/D,QAEnC,EAAC,EAAOyQ,EAAW1M,OAAO,OAAO/D,SAEjC,EAAC,EAAMyQ,yCAIFvD,GACb,IAAMxF,EAAQ1I,KAAK7B,cAAcoT,qBAAuB,EAAA5R,EAAA,SAASK,KAAK7B,cAAcoT,qBAAuB,GACvGrD,EAAMkE,SACT1J,EAAK2J,YAAcnE,EAAMkE,OAAOpX,OAEjCgF,KAAKsS,GAAetS,KAAKqR,oBAAqB3I,EAAM,0CAGtC5J,EAASX,EAAe0C,GAAK,IAAAE,EAAAf,KAC3C,GAAIa,EAAM/B,EAAQkC,OAAQ,CACzB,IAAMuR,EAAazT,EAAQ+B,GACnBsC,EAAWoP,EAAXpP,QACQoP,EAAWtJ,MAAS9F,EAAO8F,MAAM1N,KAAK4H,GAAUA,EAAO+F,IAAI3N,KAAK4H,IACzEhF,GACLkD,KAAK,SAACC,GACN,OAAOP,EAAKuR,GAAexT,EAAST,EAAcF,EAAemD,KAAwBT,kDAKzEqN,GAEnB,IADA,IAAMsE,EAAUtE,EAAMkE,OACbrY,EAAI,EAAGC,EAAIwY,EAAQxR,OAAQjH,EAAIC,EAAGD,IAAK,CAC/C,IAAM0Y,EAAMD,EAAQzY,GACpB,GAAI0Y,EAAIC,SAAU,CACjB,IAAMhK,EAAQ1I,KAAK7B,cAAcoT,qBAAuB,EAAA5R,EAAA,SAASK,KAAK7B,cAAcoT,qBAAuB,GAC3GvR,KAAKsS,GAAetS,KAAKqR,oBAAqBhT,EAAc,CAAEkS,UAAW,CAACkC,EAAIzX,QAAU0N,GAAO,GAC/F,uCAKIxI,GACNF,KAAK7B,cAAcmT,gBAAgBhK,IAAItH,KAAK7B,cAAc8E,uHCxF5D,MAAA7D,KAAAvF,EAAA,6ZAIC,SAAA8Y,iGAAc5S,CAAAC,KAAA2S,GACb3S,KAAK4S,UAAY,GACjB5S,KAAK6S,gBAAkB,KACvB7S,KAAK7B,cAAgB,KACrB6B,KAAK8S,UAAY,GACjB9S,KAAK1F,KAAO,sGAGR6D,GACJ6B,KAAK7B,cAAgBE,EAAc,GAAGF,kCAGhC+B,GAAU,IAAAE,EAAAJ,KAChBE,EAASuP,UAAU1T,UAAmBgC,yBAA0B,CAAC,SAAC+H,GACjE1F,EAAKyS,gBAAkB/M,KAExB5F,EAASuP,UAAU1T,UAAmB8B,yBAA0B,CAACmC,KAAK7B,cAAcwI,QAAS,SAACoM,GAC7F3S,EAAK4S,qBAAqBD,MAE3B/S,KAAKiT,WACLjT,KAAK4S,UAAU5O,KAAK9D,EAASmG,GAAGtK,UAAmBiC,gBAAiBgC,KAAKyG,qBAAqBlL,KAAKyE,2CAInGA,KAAK7B,cAAcmT,gBAAgBlH,KAAKpK,KAAK8S,UAAU9S,KAAK6S,iDAGtD3S,GACNF,KAAK4S,UAAU9P,QAAQ,SAACoQ,GACvBA,mDAImBC,GACpBnT,KAAK6S,gBAAkBM,EACvBnT,KAAKiT,wDAGerU,GAAM,IAAAmC,EAAAf,KAC1BpB,EAAKkE,QAAQ,SAACzI,GACb0G,EAAK+R,UAAUzY,EAAE8Y,MAAQ9Y,EAAEwM,oHC5C9B,MAAAuM,KAAAvZ,EAAA,+MAIC,SAAAwZ,iGAActT,CAAAC,KAAAqT,GACbrT,KAAK1F,KAAO,mBACZ0F,KAAK6S,gBAAkB,KACvB7S,KAAK8S,UAAY,GACjB9S,KAAK4S,UAAY,GACjB5S,KAAKsT,KAAO,KACZtT,KAAK7B,cAAgB,KACrB6B,KAAKuT,eAAiB,KACtBvT,KAAKwT,iBAAmB,KACxBxT,KAAKyT,cAAgB,KACrBzT,KAAK0T,gBAAkB,EACvB1T,KAAK2T,aAAe,sFAGhBxV,GACJ6B,KAAK7B,cAAgB,CACpBmT,gBAAiBnT,EAAcmT,gBAC/BsC,SAAUzV,EAAcyV,SACxBpH,KAAMrO,EAAcqO,KACpBqH,SAAU1V,EAAc0V,SACxBJ,cAAetV,EAAcsV,cAC7BvO,KAAM/G,EAAc+G,KACpB0B,SAAUzI,EAAcyI,SACxBkN,QAAS3V,EAAc2V,UAEc,EAAlC3V,EAAc4V,IAAIrM,QAAQ,MAC7B1H,KAAKgU,cAAc7V,EAAc4V,KAElC/T,KAAKuT,eAAiBvT,KAAK7B,cAAc+G,KACtC3G,KAAKE,UAAUuB,KAAK7B,cAAc+G,MAClC3G,KAAKE,UAAUuB,KAAK7B,cAAcsV,eACjCzT,KAAK7B,cAAc8V,aACtBjU,KAAKwT,iBAAmBjV,KAAKE,UAAUuB,KAAK7B,cAAc8V,mDAI9C3Z,GAAM,IAAA8F,EAAAJ,KACJ1F,EAAKyK,OAAOzK,EAAKoN,QAAQ,KAAO,EAAGpN,EAAKoN,QAAQ,KAAOpN,EAAKoN,QAAQ,KAAO,GAClE9B,MAAM,KACrB9C,QAAQ,SAACoR,GACjB,IAAMC,EAASD,EAAQtO,MAAM,KACX,WAAduO,EAAO,GACV/T,EAAKsT,gBAAkBS,EAAO,GACN,QAAdA,EAAO,KACjB/T,EAAKuT,aAAeQ,EAAO,qCAKvBjU,GACN,GAAKF,KAAK7B,cAAcyI,UAAc5G,KAAK7B,cAAcyI,SAAS5F,OAAS,CAC1E,IAAMoT,EAAe,GACrBlU,EAASuP,UAAU,2BAA4B,CAAC2E,IAChDpU,KAAK6S,gBAAkBuB,EAAatO,SACpC9F,KAAK4S,UAAU5O,KAAK9D,EAASmG,GAAG,kBAAmBrG,KAAKyG,qBAAqBlL,KAAKyE,QAClFE,EAASuP,UAAU,4BAA6B,CAACzP,KAAK7B,cAAcyI,SAAUwN,IAC9EpU,KAAKgT,qBAAqBoB,EAAaC,kBAExCrU,KAAKsU,iDAGCpU,GACNF,KAAK4S,UAAU9P,QAAQ,SAACoQ,GACvBA,MAEGlT,KAAKsT,QACgB,EAApBtT,KAAK2T,aACR3T,KAAKsT,KAAKiB,WAAavU,KAAK+K,QAAQxP,KAAKyE,MACzCA,KAAKsT,KAAKkB,aAAa,CAACxU,KAAK0T,eAAgB1T,KAAK2T,cAAc,IAEhE3T,KAAKsT,KAAKvI,6CAMR/K,KAAKsT,OACRtT,KAAKsT,KAAKvI,UACV/K,KAAKsT,KAAO,gDAII,IAAAvS,EAAAf,KACbA,KAAKsT,MACRtT,KAAKsT,KAAKvI,UAEX,IAAI0J,EAAczU,KAAK0U,OAAU1U,KAAKwT,iBAAmBxT,KAAKuT,eAExD3M,EAAW5G,KAAK7B,cAAcyI,SAC/BA,GAAcA,EAAS5F,QAC3B4F,EAAS9D,QAAQ,SAACgE,GACjB2N,EAAaA,EAAW7O,MAAX,KAAAjF,OAAsBmG,EAAtB,OAA8B6N,KAAK5T,EAAK+R,UAAUhM,GAAI/F,EAAK8R,oBAG1E,IAAM+B,EAAWrW,KAAKC,MAAMiW,GAEtBhB,EAAgB,CACrBI,SAAU7T,KAAK7B,cAAc0V,SAC7B5J,UAAWjK,KAAK7B,cAAcmT,gBAAgB,GAC9C9E,KAAMxM,KAAK7B,cAAcqO,KACzBoH,SAAU5T,KAAK7B,cAAcyV,SAC7BH,cAAcmB,GAGf5U,KAAKsT,KAAOuB,UAAOC,cAAcrB,GAC7BzT,KAAK2T,YAAc,IACtB3T,KAAK2T,YAAc3T,KAAKsT,KAAKyB,gBAGH,EAAvB/U,KAAK0T,gBACR1T,KAAKsT,KAAKkB,aAAa,CAAC,EAAGxU,KAAK0T,iBAAiB,GAE9C1T,KAAK7B,cAAc2V,SACtB9T,KAAK7B,cAAcmT,gBAAgB0D,KAAK,OAAOC,KAAK,UAAWjV,KAAK7B,cAAc2V,sDAI/DlV,GAAM,IAAA2C,EAAAvB,KAC1BpB,EAAKkE,QAAQ,SAACoS,EAAOxP,GACpBwP,EAAMpS,QAAQ,SAACzI,GACdkH,EAAKuR,UAAUvR,EAAKpD,cAAcyI,SAASlB,IAAQrL,EAAE8Y,MAAQ9Y,EAAEwM,uDAK7CsM,GACpBnT,KAAK6S,gBAAkBM,EACvBnT,KAAKsU,iDAIL,IAAMI,IAAkBS,SAAQ,aAKhC,OAFgBT,KAAUjb,OAAM,YAEfib,sCC5InBtb,EAAAD,QAAAQ,yFCAA,MAAA0P,KAAAxP,EAAA,8MAIC,SAAAub,iGAAcrV,CAAAC,KAAAoV,GACbpV,KAAK1F,KAAO,uBACZ0F,KAAKqV,SAAW,KAChBrV,KAAKsV,WAAa,KAClBtV,KAAKuV,UAAY,GACjBvV,KAAKwV,eAAiB,GACtBxV,KAAKyV,WAAa,GAClBzV,KAAK0V,sBAAwB,KAC7B1V,KAAK2V,iBAAmB,KACxB3V,KAAK4V,cAAgB,KACrB5V,KAAKE,SAAW,KAChBF,KAAKiK,UAAY,yFAGb9L,GACJ6B,KAAKiK,UAAY9L,EAAcmT,gBAC/BtR,KAAKqV,SAAWlX,EAAckX,SAC9BrV,KAAKsV,WAAatV,KAAK6V,oBAAoB1X,EAAc+G,qCAGnDhF,GACNF,KAAK4V,cAAgB,GACrB5V,KAAK2V,iBAAmB,GACxB3V,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,wBAAyBrG,KAAK8V,uBAAuBva,KAAKyE,QAC9FA,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,uBAAwBrG,KAAK+V,cAAcxa,KAAKyE,QACpFA,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,6BAA8BrG,KAAKgW,+BAA+Bza,KAAKyE,QAC3GA,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,iBAAkBrG,KAAKiW,oBAAoB1a,KAAKyE,MAAOA,KAAKqV,WAChGrV,KAAKE,SAAWA,EAEVF,KAAKkW,UAAUlW,KAAKiK,UAAWjK,KAAKsV,YACpCtV,KAAKmW,YAAY5a,KAAKyE,4CAI5BA,KAAK0V,sBAAwB1V,KAAKwV,eAAe,GACjD,IAAMY,EAAQpW,KAAKqW,iBAAiB,GAChCC,EAAa,EACbF,IAEHE,EADYtW,KAAKuV,UAAUa,GACVG,eAElBvW,KAAK+V,cAAcO,4CAGHE,GAChB,IAAMC,EAAOhd,OAAOid,SAASD,KACvBE,EAAYF,EAAK/O,QAAQ,KAC/B,IAAiB,EAAbiP,EAAgB,CACnB,IAAMC,EAAQH,EAAKI,UAAUF,EAAY,GACzC,GAAIC,EAEH,OADaA,EAAMhR,MAAM,KACb4Q,GAGd,OAAO,4DAGuB9P,GAC9BA,EAAe,CACdoQ,eAAgB9W,KAAK0V,sBACrBqB,MAAO/W,KAAKyV,WAAWzV,KAAK0V,sBAAsB/O,SAASmM,UAAU9S,KAAKyV,WAAWzV,KAAK0V,sBAAsB/O,SAASkM,kDAInH3S,GACHF,KAAK4V,eACR5V,KAAK4V,cAAc9S,QAAQ,SAACkU,GAC3BA,MAGFhX,KAAK2V,iBAAiB7S,QAAQ,SAACmU,GAC9BA,EAAKC,OAAOhX,KAEbF,KAAK2V,iBAAiB3U,OAAS,EAC/BhB,KAAKE,SAAW,KAChBF,KAAKiK,UAAY,KACjBxQ,OAAO0d,WAAa,gDAGW,IAAfjL,EAAe,EAAA1E,UAAAxG,aAAAxH,IAAAgO,UAAA,GAAAA,UAAA,IAAH,EACtB4P,EAAQ,CACbN,eAAgB9W,KAAK0V,sBACrBqB,MAAO/W,KAAKyV,WAAWzV,KAAK0V,sBAAsB/O,SAASmM,UAAU9S,KAAKyV,WAAWzV,KAAK0V,sBACxF/O,SAASkM,mBAEI,EAAZ3G,IACHkL,EAAMlL,SAAWA,GAElBlM,KAAKE,SAASuP,UAAU,qBAAqB,CAAC2H,sCAGrCC,EAAWzY,GACpB,IAAM0Y,GAAK,EAAAjO,EAAA,SAAE,SACbzK,EAAKkE,QAAQ9C,KAAKuX,cAAchc,KAAKyE,KAAMsX,IAC3CD,EAAUG,OAAOF,yCAGJD,EAAWzY,GACxB,GAAIA,EAAK6Y,QAAS,CACjB,IAAMC,GAAK,EAAArO,EAAA,SAAE,SACPoE,GAAI,EAAApE,EAAA,2CAAA1I,OAAoC/B,EAAK2X,cAAzC,QAIV,GAHAmB,EAAGF,OAAO/J,GACVzN,KAAK2X,SAASlK,EAAG7O,EAAK+H,SACtB3G,KAAK4X,gBAAgBnK,EAAG7O,EAAK2X,eACzB3X,EAAKiZ,SAAU,CAClB,IAAMP,GAAK,EAAAjO,EAAA,SAAE,SACbzK,EAAKiZ,SAAS/U,QAAQ9C,KAAKuX,cAAchc,KAAKyE,KAAMsX,IACpDI,EAAGF,OAAOF,GAEXD,EAAUG,OAAOE,4CAIHL,EAAWf,GAC1Be,EAAUS,QAAQ9X,KAAK+X,mBAAmBxc,KAAKyE,KAAMsW,+CAGnCA,GAClB,IAAM0B,EAAUhY,KAAKwV,eAAec,GAChC0B,IACHhY,KAAKE,SAASuP,UAAU,oBAAqB,CAACuI,EAAQzB,gBACtDvW,KAAK8V,uBAAuBkC,EAAQzB,+DAIf7Q,EAAOuS,GACvBA,EAA0BA,GAAmD,EACnFjY,KAAK+V,cAAcrQ,GACnB1F,KAAKE,SAASuP,UAAU,oBAAqB,CAAC/J,EAAOuS,IACrDjY,KAAK0V,sBAAwB1V,KAAKwV,eAAe9P,GACjD1F,KAAKkY,iBAAiBD,yCAGTvS,GACb,IAAMyS,GAAS,EAAA9O,EAAA,iBAAA1I,OAAU+E,IACrByS,EAAOnX,UACV,EAAAqI,EAAA,SAAE,sBAAsB+O,YAAY,qBACpCD,EAAOE,SAAS,kEAIE3S,GACnBjF,QAAQ6X,IAAI,iDACZ,IAAMC,EAAUvY,KAAKwV,eAAe9P,GAChC6S,EAAQC,UACX/X,QAAQ6X,IAAI,iEAAmEC,EAAQE,KAAKlC,eAC5FvW,KAAKE,SAASuP,UAAU,oBAAqB,CAAC8I,EAAQE,KAAKlC,kBAE3D9V,QAAQ6X,IAAI,+CACZtY,KAAKE,SAASuP,UAAU,2DAIjB4H,EAAW1Q,GAAS,IAAAvG,EAAAJ,KACtBpB,EAAO,CACX0S,gBAAiB+F,EACjB1Q,QAASA,GAQX3G,KAAKE,SAASuP,UAAU,mBAAoB,CAAC,kBANtB,SAACrO,GACdA,EAASoJ,KAAK5L,GACdwC,EAASsX,OAAOtY,EAAKF,UACrBE,EAAKuV,iBAAiB3R,KAAK5C,GAC3BhB,EAAKqV,WAAW9O,GAAWvF,iDAKlBxC,GAAM,IAAAmC,EAAAf,KACnBmB,EAAS,GAyBf,OAxBAvC,EAAKkY,eAAehU,QAAQ,SAAC6V,EAAKjT,GACjC3E,EAAKwU,UAAUoD,EAAI7R,IAAM6R,GACzB5X,EAAKyU,eAAemD,EAAIpC,eAAiBoC,GACrCC,SAAWha,EAAKkY,eAAepR,EAAQ,KAG5C9G,EAAKkY,eAAehU,QAAQ,SAAC6V,EAAKjT,GAC7BiT,EAAIE,QACPF,EAAIF,KAAO1X,EAAKwU,UAAUoD,EAAIE,eACvBF,EAAIE,QAEXF,EAAIF,KAAO7Z,EAAKkY,eAAepR,EAAQ,KAIzC9G,EAAKka,MAAMhW,QAAQ,SAACgE,GACnB,IAAM6R,EAAM5X,EAAKwU,UAAUzO,GACvB6R,EAAId,WACPc,EAAId,SAAWc,EAAId,SAASxU,IAAI,SAACyD,GAChC,OAAO/F,EAAKwU,UAAUzO,MAGxB3F,EAAO6C,KAAK2U,KAENxX,8GCrMT,MAAA/B,KAAAvF,EAAA,8MAIC,SAAAkf,iGAAchZ,CAAAC,KAAA+Y,GACb/Y,KAAKsR,gBAAkB,KACvBtR,KAAKgZ,YAAc,KACnBhZ,KAAKiZ,UAAY,GACjBjZ,KAAK1F,KAAO,4GAGR6D,GACJ6B,KAAKsR,gBAAkBnT,EAAcmT,gBACrCtR,KAAKqV,SAAWlX,EAAckX,SAC9BrV,KAAKgZ,YAAc7a,EAAc6a,2CAG3B9Y,GAAU,IAAAE,EAAAJ,KAChBA,KAAKiZ,UAAUjV,KAAK9D,EAASmG,GAAGtK,UAAmBkB,gBAAiB+C,KAAKkZ,sBAAsB3d,KAAKyE,MAAOA,KAAKqV,WAChH,IAAM8D,EAAenZ,KAAKmZ,aAAa5d,KAAKyE,MAC5CA,KAAKsR,gBAAgBjL,GAAG,QAAS8S,GACjCnZ,KAAKiZ,UAAUjV,KAAK,kBAAK5D,EAAKkR,gBAAgBhK,IAAI,UAAU6R,kCAGtDjZ,GACNF,KAAKoZ,SAAStW,QAAQ,SAACoQ,GACtBA,oDAIoBhH,EAAUlD,GAC/B,IAAIqQ,EAAQ,IAAMrQ,EAAYkD,EAC1BlM,KAAKsR,iBACRtR,KAAKsR,gBAAgBgI,IAAI,QAAzB,GAAA3Y,OAAqC0Y,EAArC,MAEDA,EAAO1O,KAAKC,MAAMyO,GACdrZ,KAAKgZ,aACRhZ,KAAKgZ,YAAYO,KAAjB,GAAA5Y,OAAyB0Y,EAAzB,iVCnCF,SAAAG,iGAAczZ,CAAAC,KAAAwZ,GACbxZ,KAAKuV,UAAY,GACjBvV,KAAKwV,eAAiB,GACtBxV,KAAKqV,SAAW,KAChBrV,KAAKsV,WAAa,KAClBtV,KAAK4V,cAAgB,GACrB5V,KAAKE,SAAW,KAChBF,KAAK1F,KAAO,wGAGR6D,GACJ6B,KAAKsV,WAAatV,KAAK6V,oBAAoB1X,EAAc+G,MACzDlF,KAAKqV,SAAWlX,EAAckX,wCAGxBnV,GACNF,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,2BAA4BrG,KAAKyZ,4BAA4Ble,KAAKyE,QACtGA,KAAK4V,cAAc5R,KAAK9D,EAASmG,GAAG,qBAAsBrG,KAAK0Z,uBAAuBne,KAAKyE,QAC3FA,KAAKE,SAAWA,EAChBzG,OAAO0d,WAAanX,KAAK2Z,eAAepe,KAAKyE,MAE7C,IAAMoW,EAAQpW,KAAKqW,iBAAiB,GACpC,GAAID,EAAO,CACV,IAAMuC,EAAM3Y,KAAKuV,UAAUa,GACvBjI,EAAMnO,KAAKqW,iBAAiB,GAChClI,EAAOA,GAAQA,EAAM,EACrBnO,KAAKE,SAASuP,UAAU,oBAAqB,CAACkJ,EAAIpC,cAAepI,GAAK,SAEtE1U,OAAOmgB,QAAQC,UAAU,CAAEC,aAAc9Z,KAAKsV,WAAW,GAAGxO,IAC3D,GADD,KAAAnG,OAEMX,KAAKsV,WAAW,GAAGxO,4CAIZoH,GACd,IAAM4L,EAAgB5L,EAAMkJ,MAASlJ,EAAMkJ,MAAM0C,aAAe9Z,KAAKsV,WAAW,GAAGxO,GAC7EoF,EAAYgC,EAAMkJ,MAASlJ,EAAMkJ,MAAMlL,SAAW,EAClDyM,EAAM3Y,KAAKuV,UAAUuE,GAC3B9Z,KAAKE,SAASuP,UAAU,uBAAwB,CAACkJ,EAAIpC,gBACrDvW,KAAKE,SAASuP,UAAU,oBAAqB,CAACkJ,EAAIpC,cAAerK,GAAU,mCAGrEhM,GACFF,KAAK4V,eACR5V,KAAK4V,cAAc9S,QAAQ,SAACkU,GAC3BA,MAGFhX,KAAKE,SAAW,yDAGWwF,EAAOuS,EAAwB8B,GAAkB,IAAA3Z,EAAAJ,KAG5E,GAFMiY,EAA0BA,GAAmD,IAC7E8B,OAAyCvgB,IAArBugB,GAAkCA,GACrC,CAItB/Z,KAAKE,SAASuP,UAAU,6BAA8B,CAHtB,SAACuK,GACpB5Z,EAAKyZ,UAAUG,gDAMbxD,GAChB,IAAMC,EAAOhd,OAAOid,SAASD,KACvBE,EAAYF,EAAK/O,QAAQ,KAC/B,IAAiB,EAAbiP,EAAgB,CACnB,IAAMC,EAAQH,EAAKI,UAAUF,EAAY,GACzC,GAAIC,EAEH,OADaA,EAAMhR,MAAM,KACb4Q,GAGd,OAAO,oDAGeY,GACtBpX,KAAK6Z,UAAUzC,qCAGNA,GACT,GAAKA,GAAWA,EAAMN,gBAAoBM,EAAMN,eAAeW,QAAU,CACxE,IAAIwC,OAAsCzgB,IAAnB4d,EAAMlL,SAA0BkL,EAAMlL,UAAY,EACzE,GAAI+N,EAAkB,EAAG,CAIxBja,KAAKE,SAASuP,UAAU,iCAAkC,CAHnC,SAACvD,GACR+N,EAA8B,EAAX/N,EAAiBA,EAAW,EAAK,KAKrE,IAAMgO,EAAezgB,OAAOmgB,QAAQxC,MAC/B8C,GAAkBA,EAAaJ,eAAiB1C,EAAMN,eAAehQ,GACzErN,OAAOmgB,QAAQC,UAAU,CAAEC,aAAc1C,EAAMN,eAAehQ,GAAIoF,SAAU+N,GAC3E7C,EAAML,MADP,KAAApW,OAEMyW,EAAMN,eAAehQ,GAF3B,KAAAnG,OAEiCsZ,IACtBC,GAAkBA,EAAaJ,eAAiB1C,EAAMN,eAAehQ,GAChFrN,OAAOmgB,QAAQO,aAAa,CAAEL,aAAcI,EAAaJ,aAAc5N,SAAU+N,GAChF7C,EAAML,MADP,KAAApW,OAEMuZ,EAAaJ,aAFnB,KAAAnZ,OAEmCsZ,IAEnCxgB,OAAOmgB,QAAQC,UAAU,CAAEC,aAAc1C,EAAMN,eAAehQ,GAAIoF,SAAU+N,GAC3E7C,EAAML,MADP,KAAApW,OAEMyW,EAAMN,eAAehQ,GAF3B,KAAAnG,OAEiCsZ,IAElCxgB,OAAO0b,SAAS4B,MAAQK,EAAML,mDAIZnY,GAAM,IAAAmC,EAAAf,KACnBmB,EAAS,GAyBf,OAxBAvC,EAAKkY,eAAehU,QAAQ,SAAC6V,EAAKjT,GACjC3E,EAAKwU,UAAUoD,EAAI7R,IAAM6R,GACzB5X,EAAKyU,eAAemD,EAAIpC,eAAiBoC,GACrCC,SAAWha,EAAKkY,eAAepR,EAAQ,KAG5C9G,EAAKkY,eAAehU,QAAQ,SAAC6V,EAAKjT,GAC7BiT,EAAIE,QACPF,EAAIF,KAAO1X,EAAKwU,UAAUoD,EAAIE,eACvBF,EAAIE,QAEXF,EAAIF,KAAO7Z,EAAKkY,eAAepR,EAAQ,KAIzC9G,EAAKka,MAAMhW,QAAQ,SAACgE,GACnB,IAAM6R,EAAM5X,EAAKwU,UAAUzO,GACvB6R,EAAId,WACPc,EAAId,SAAWc,EAAId,SAASxU,IAAI,SAACyD,GAChC,OAAO/F,EAAKwU,UAAUzO,MAGxB3F,EAAO6C,KAAK2U,KAENxX,qSCrIR,SAAAiZ,iGAAcra,CAAAC,KAAAoa,GACbpa,KAAKqa,aAAe,KACpBra,KAAK6S,gBAAkB,KACvB7S,KAAKsa,SAAW,KAChBta,KAAK1F,KAAO,4GAGN4F,GACN,IAAMqa,EAAara,EAASmG,GAAG,OAAQrG,KAAKwa,cAAcjf,KAAKyE,OACzDya,EAAmBva,EAASmG,GAAG,kBAAmBrG,KAAK0a,sBAAsBnf,KAAKyE,OACxFA,KAAK2a,eAAiB3a,KAAK2a,eAAepf,KAAKyE,KAAM,CAACua,EAAYE,mCAG5Dva,GACNF,KAAK2a,wDAGSC,GACVA,GACHA,EAAc9X,QAAQ,SAAC+X,GACtBA,oDAKmBC,GACrB9a,KAAK6S,gBAAkBiI,EACnB9a,KAAKsa,UACRta,KAAKsa,+CAIKrQ,GACXA,EAAUsP,KAAK,IACfvZ,KAAKsa,SAAW,2CAGHpO,GACb,IAAMgH,EAAOlT,KAAKqa,aAAanO,GAC3BgH,IACHA,IACAlT,KAAKsa,SAAWpH,oCAITjJ,EAAW8Q,GACnB9Q,EAAUsP,KAAKwB,EAAoB/a,KAAK6S,6DAGtBmI,EAAgB/Q,GAIlC,IAHA,IAAMgR,EAAeD,EAAeC,aAC9BC,EAASD,EAAa,GAAGC,OACzBC,EAAqB,GAClBphB,EAAI,EAAG2K,EAAKwW,EAAOla,OAAQjH,EAAI2K,EAAI3K,IAAK,CAEhD,IADA,IAAMghB,EAAsB,GACnBK,EAAI,EAAGC,EAAKJ,EAAaja,OAAQoa,EAAIC,EAAID,IAAK,CACtD,IAAME,EAAOL,EAAaG,GAC1BL,EAAoBO,EAAKC,MAAQD,EAAKJ,OAAOnhB,GAAGwf,KAEjD4B,EAAmBD,EAAOnhB,GAAGiP,SAASC,OAASjJ,KAAKwb,SAASjgB,KAAKyE,KAAMiK,EAAW8Q,GACnFI,EAAmBD,EAAOnhB,GAAGiP,SAASE,KAAOlJ,KAAKyb,YAEnD,OAAON,+BAGHH,GACJ,IAAM/Q,EAAY+Q,EAAe1J,gBACjCtR,KAAKyb,YAAczb,KAAKyb,YAAYlgB,KAAKyE,KAAMiK,GAC/CjK,KAAK6S,gBAAkBmI,EAAelV,SACtC9F,KAAKqa,aAAera,KAAK0b,mBAAmBV,EAAgB/Q,43FCvE9D,IAAA0R,EAAA1c,EAAApF,EAAA,KACA+hB,EAAA3c,EAAApF,EAAA,KACAgiB,EAAA5c,EAAApF,EAAA,KACAiiB,EAAA7c,EAAApF,EAAA,KACAkiB,EAAA9c,EAAApF,EAAA,KACAmiB,EAAA/c,EAAApF,EAAA,KACAoiB,EAAAhd,EAAApF,EAAA,KACAqiB,EAAAjd,EAAApF,EAAA,KACAsiB,EAAAld,EAAApF,EAAA,KACAuiB,EAAAnd,EAAApF,EAAA,KACAwiB,EAAApd,EAAApF,EAAA,KACAyiB,EAAArd,EAAApF,EAAA,KACA0iB,EAAAtd,EAAApF,EAAA,KACA2iB,EAAAvd,EAAApF,EAAA,KACA4iB,EAAAxd,EAAApF,EAAA,KACA6iB,EAAAzd,EAAApF,EAAA,KACA8iB,EAAA1d,EAAApF,EAAA,KACA+iB,EAAA3d,EAAApF,EAAA,KACAgjB,EAAA5d,EAAApF,EAAA,KACAijB,EAAA7d,EAAApF,EAAA,KACAkjB,EAAA9d,EAAApF,EAAA,KACAmjB,EAAA/d,EAAApF,EAAA,KACAojB,EAAAhe,EAAApF,EAAA,KACAqjB,EAAAje,EAAApF,EAAA,KACAsjB,EAAAle,EAAApF,EAAA,KACAujB,EAAAne,EAAApF,EAAA,KACAwjB,EAAApe,EAAApF,EAAA,KACAyjB,EAAAre,EAAApF,EAAA,KACA0jB,EAAAte,EAAApF,EAAA,KACA2jB,EAAAve,EAAApF,EAAA,KACA4jB,EAAAxe,EAAApF,EAAA,uIC9BA,WAAkBsE,EAAe2B,GAAU,IAChCwR,EAA8BnT,EAA9BmT,gBAAiBoM,EAAavf,EAAbuf,UAExB,OADApM,EAAgB+G,SAASqF,GAClBvf,qGCHX,IAAAwf,EAAA1e,EAAApF,EAAA,KACA+jB,EAAA3e,EAAApF,EAAA,8CAEA,WAAgCsE,EAAe2B,GAAU,IAC9CwR,EAAuCnT,EAAvCmT,gBAAiBuM,EAAsB1f,EAAtB0f,oBAExB,EAAAF,EAAA,SAA0BrM,EAAiBuM,GAE3CA,EAAmBrT,KAAKrM,GAExB,IAAMwQ,EAAUkP,EAAmBnF,OAAO5Y,GAE1C,OAAI6O,EACO,IAAItO,QAAQ,SAACnC,EAASoC,GACzBqO,EAAQtN,KAAK,SAACjD,IACV,EAAAwf,EAAA,SAAgB1f,EAASC,EAAeC,IACzCkC,KAGAnC,qGCnBf,IAAA2f,EAAAjkB,EAAA,GAEA,WAAmC8E,EAASof,GACnCpf,EAAQC,KAAK,4BACdD,EAAQC,KAAK,0BAA2B,KAExB,EAAAkf,EAAAjf,uBAAsBF,GAC9BqF,KAAK+Z,sGCGrB,WAAuB5f,EAAe2B,GAAU,IACpCke,EAA0F7f,EAA1F6f,cAAeC,EAA2E9f,EAA3E8f,cAAeC,EAA4D/f,EAA5D+f,aAAcC,EAA8ChgB,EAA9CggB,aAAcC,EAAgCjgB,EAAhCigB,WAAY9M,EAAoBnT,EAApBmT,gBAExE+M,EAbV,SAAiCL,EAAeC,EAAeC,EAAcC,EAAcvf,EAAM8G,GAC7F,IAAIgN,EAAW,GAMf,OALIyL,EACAzL,EAAY9T,EAAKof,KAAmBG,EAAgB,YAAc,GAC3DD,IACPxL,EAAYhN,IAAUwY,EAAgB,YAAc,IAExD,kBAAAvd,OAAyB/B,EAAKof,GAA9B,KAAArd,OAAgD+R,EAAhD,KAAA/R,OAA4D/B,EAAKqf,GAAjE,cAM6C1iB,KAAK,KAAMyiB,EAAeC,EAAeC,EAAcC,GAE9FG,EAAiBF,EAAW/a,IAAIgb,GAItC,OAFA/M,EAAgBlH,KAAKkU,GAEdngB,qGCnBX,MAAAyf,KAAA/jB,EAAA,uBAEA,WAAiBsE,EAAe2B,GAAU,IAC/Bye,EAA4EpgB,EAA5EogB,gBAAiBjN,EAA2DnT,EAA3DmT,gBAAiBkN,EAA0CrgB,EAA1CqgB,oBAAqBC,EAAqBtgB,EAArBsgB,kBAqB9D,OApBgB,IAAIpe,QAAQ,SAACnC,EAASoC,GAClC,IACQie,EACAjN,EAAgBoN,QAAQF,EACpBC,EACAF,EACA,YACI,EAAAX,EAAA,SAAgB1f,EAAS,GAAIC,KAGrCmT,EAAgBoN,QAAQF,EACpBC,EACA,YACI,EAAAb,EAAA,SAAgB1f,EAAS,GAAIC,KAG3C,MAAMqC,GACJF,EAAOE,yGCrBnB,MAAAod,KAAA/jB,EAAA,uBAEA,WAA0BsE,EAAe2B,GAAU,IAC1CwR,EAA4CnT,EAA5CmT,gBAAiBoM,EAA2Bvf,EAA3Buf,UAAWtF,EAAgBja,EAAhBia,YACjCA,OAA+B5e,IAAhB4e,GAA6BA,EAE5C,IAAMzJ,EAAU,IAAItO,QAAQ,SAACnC,EAASoC,GAClC,IACIgR,EAAgBqN,IAAI,6EACpB,WACQvG,GACA9G,EAAgB8G,YAAYsF,IAEhC,EAAAE,EAAA,SAAgB1f,EAAS,GAAIC,KAEnC,MAAMqC,GACJF,EAAOE,MAMf,OAFA8Q,EAAgB+G,SAASqF,GAElB/O,qGCtBX,IAAAiQ,EAAA3f,EAAApF,EAAA,KACAglB,EAAA5f,EAAApF,EAAA,+CAEA,WAAwBsE,EAAe2B,GAAU,IACtCyQ,EAAoCpS,EAApCoS,UAAWrN,EAAyB/E,EAAzB+E,WAAYD,EAAa9E,EAAb8E,UAExB6b,GAAiB,EAAAF,EAAA,SAAsBzgB,EAAeoS,GAExDrN,EACApD,EAAS8M,kBAAkB3J,EAAWC,EAAY4b,GAElDhf,EAAS2P,UAAUxM,EAAW6b,IAGlC,EAAAD,EAAA,SAAiC1gB,sGCdrC,MAAAsK,KAAA5O,EAAA,wBAEA,WAA+BsE,EAAeoS,GAC1C,GAAKA,EAAL,CAGA,IAAM5H,EAAUC,UAAmCrN,KAAK,KAAM4C,GAC9D,OAAOoS,EAAUlN,IAAIsF,uGCPzB,WAA0CxK,UAC/BA,EAAc8E,iBACd9E,EAAc+E,kBACd/E,EAAcoS,6GCHzB,WAAsBpS,EAAe2B,GAGjC,OAF0B3B,EAAnBmT,gBACSyN,QACT5gB,qGCHX,WAA4BA,EAAe2B,GACvC,MAAO,sGCDX,IAAA8d,EAAA3e,EAAApF,EAAA,IACAuF,EAAAH,EAAApF,EAAA,8CAEA,WAAwBsE,EAAe2B,GAAU,IACtCoC,EAAc/D,EAAd+D,WACP,OAAO,IAAI7B,QAAQ,SAACnC,EAASoC,GAWzBR,EAAS2P,UAAU1T,UAAmBsB,iBAAkB,CAAC6E,EAVlC,SAACgR,GACpB,IAAMvE,EAAUuE,EAAK/U,EAAe2B,GAChC6O,EACAA,EAAQtN,KAAK,YACT,EAAAuc,EAAA,SAAgB1f,EAAS,GAAIC,IAC9BmC,IAEH,EAAAsd,EAAA,SAAgB1f,EAAS,GAAIC,2GCb7C,IAAAF,EAAAgB,EAAApF,EAAA,IACA+jB,EAAA3e,EAAApF,EAAA,8CAEA,WAAmBsE,EAAe2B,GAAU,IACjCgS,EAAuC3T,EAAvC2T,eAAgBP,EAAuBpT,EAAvBoT,oBAEvB,cADOpT,EAAcoT,oBACd,IAAIlR,QAAQ,SAACnC,EAASoC,GACzB,IAAM0e,GAAa,EAAA/gB,EAAA,SAAmBE,EAAeoT,GACrDO,EAAe5I,IAAI8V,GAAY3d,KAAK,YAChC,EAAAuc,EAAA,SAAgB1f,EAASC,IAC1BmC,uTCVX,WAA0BnC,EAAe2B,GAAU,IACvC+d,EAA4C1f,EAA5C0f,mBAAoBoB,EAAwB9gB,EAAxB8gB,oBAI5B,OAFA9gB,EAAc0f,mBAAqBxf,EAAcwf,EAAoBoB,GAE9D9gB,qGCLX,IAAA2f,EAAAjkB,EAAA,GAEA,WAAkCsE,EAAe2B,GAAU,IAChDwR,EAAmCnT,EAAnCmT,gBAAiB4N,EAAkB/gB,EAAlB+gB,eAClBzO,GAAc,EAAAqN,EAAAjf,uBAAsByS,GACtCyM,EAAa,KAYjB,OAXAtN,EAAYxC,KAAK,SAACgJ,GACd,OAAIA,EAAK3c,OAAS4kB,IACdnB,EAAa9G,GACN,KAIV8G,GACDtd,QAAQ0e,KAAR,wBAAAxe,OAAqCue,EAArC,yCAEJ/gB,EAAc0f,mBAAqBE,EAC5B5f,qGCjBX,MAAAiB,KAAAvF,EAAA,uBAEA,WAA+BsE,EAAe2B,GAAU,IAC7CoC,EAAc/D,EAAd+D,WACF2G,EAAgB1K,EAAhB0K,aAOL,OALAA,EAAeA,GAAgB,qBAI/B/I,EAAS2P,UAAU1T,UAAmBoB,iBAAkB,CAAC+E,EAHlC,SAACd,GACpBjD,EAAc0K,GAAgBzH,KAG3BjD,qGCXX,MAAAihB,KAAAvlB,EAAA,wBAEA,WAA8BsE,EAAe2B,GAAU,IAC9CwR,EAAyCnT,EAAzCmT,gBAAiB+N,EAAwBlhB,EAAxBkhB,WAAYC,EAAYnhB,EAAZmhB,SAWlC,OAVAD,EAAaA,GAAc,IAChBE,MAAQjO,EAAgBkO,aACnCH,EAAWI,OAASnO,EAAgBoO,cACV,IAAtBL,EAAWI,SACXJ,EAAWI,OAASJ,EAAWE,OAE/BD,IACA,EAAAF,EAAA,SAAiBC,EAAYC,GAEjCnhB,EAAckhB,WAAaA,EACpBlhB,ufC4EX,WAA0BkhB,EAAYC,GAClC,IAAIK,EAAgB,KACpB,IAA6B,EAAzBL,EAAS5X,QAAQ,KAAW,KAAAkY,EAAAjO,EACA2N,EAAS1Z,MAAM,KADf,GAC3B0Z,EAD2BM,EAAA,GACjBD,EADiBC,EAAA,GAIhC,IAAMC,EAASP,EAASva,OAAO,EAAG,GANU+a,EAAAnO,EA9EhD,SAA2B2N,GACvB,IAAIS,EAAS,EACTva,EAAS8Z,EAASva,OAAOua,EAASte,OAAS,EAAG,GAClC,MAAXwE,GAA+B,MAAXA,GAA+B,MAAXA,IACzCA,EAAS,MAEb,IAAMwa,EAAwB,MAAXxa,EASnB,OARIwa,IACAD,EAAS,EAEO,OADhBva,EAAS8Z,EAASva,OAAOua,EAASte,OAAS+e,EAAQ,KACf,MAAXva,IACrBA,EAAS,KACTua,EAAS,IAGV,CAACva,EAAQua,EAAQC,GAsEUC,CAAkBX,GAPR,GAOvC9Z,EAPuCsa,EAAA,GAO/BC,EAP+BD,EAAA,GAOvBE,EAPuBF,EAAA,GAStC9kB,EAAQklB,SAAqB,OAAX1a,EAAmB8Z,EAASva,OAAO,EAAGua,EAASte,OAAS+e,EAAS,GAAKT,EAASva,OAAO,EAAGua,EAASte,QAAS,IAE/Hmf,EAAgBnlB,EAChBolB,EAAiBplB,EACjBglB,IACAG,EAAiBd,EAAWE,MAAQ,IAAOvkB,EAC3ColB,EAAkBf,EAAWI,OAAS,IAAOzkB,GAGjDqkB,EA9EJ,SAA2BA,EAAYQ,EAAQra,EAAQ2a,EAAeC,GAClE,OAAQP,GACJ,IAAK,IACD,OAAQra,GACJ,IAAK,IACD6Z,EAAWI,QAAUW,EACrB,MACJ,IAAK,IACDf,EAAWE,OAASY,EACpB,MACJ,QACId,EAAWI,QAAUW,EACrBf,EAAWE,OAASY,EAE5B,MACJ,IAAK,IACD,OAAQ3a,GACJ,IAAK,IACD6Z,EAAWI,QAAUW,EACrB,MACJ,IAAK,IACDf,EAAWE,OAASY,EACpB,MACJ,QACId,EAAWI,QAAUW,EACrBf,EAAWE,OAASY,EAE5B,MACJ,IAAK,IACD,OAAQ3a,GACJ,IAAK,IACD6Z,EAAWI,QAAUW,EACrB,MACJ,IAAK,IACDf,EAAWE,OAASY,EACpB,MACJ,QACId,EAAWI,QAAUW,EACrBf,EAAWE,OAASY,EAE5B,MACJ,IAAK,IACD,OAAQ3a,GACJ,IAAK,IACD6Z,EAAWI,QAAUW,EACrB,MACJ,IAAK,IACDf,EAAWE,OAASY,EACpB,MACJ,QACId,EAAWI,QAAUW,EACrBf,EAAWE,OAASY,EAE5B,MACJ,QACI1f,QAAQC,MAAR,2BAAAC,OAAyCkf,IAEjD,OAAOR,EAqBMD,CAAkBC,EAAYQ,EAAQra,EAAQ2a,EAAeC,GAEtET,GA9GR,SAAiCA,EAAeN,GAE5C,IAAIQ,EAASF,EAAc5a,OAAO,EAAG,GAEjCsb,EADQV,EAAc5a,OAAO4a,EAAcjY,QAAQ,KAAO,EAAGiY,EAAcjY,QAAQ,KAAOiY,EAAcjY,QAAQ,KAAO,GACxG9B,MAAM,KAAK,GAAGA,MAAM,KACxB,MAAXia,EACAR,EAAWI,OAAUJ,EAAWE,OAASc,EAAO,IAAOA,EAAO,GAC5C,MAAXR,IACPR,EAAWE,MAASF,EAAWI,QAAUY,EAAO,IAAOA,EAAO,IAuG9DC,CAAwBX,EAAeN,4GC/G/C,SAAkBkB,EAAWpiB,EAAe2B,GAAU,IAC3CiU,EAAc5V,EAAd4V,IAAKyM,EAASriB,EAATqiB,MAEN3X,EAAiB1K,EAAjB0K,aAGN,OAFAA,EAAeA,GAAgB,OAE3B2X,GAASD,EAAUxM,IACnB5V,EAAc0K,GAAgB0X,EAAUxM,GACjC5V,GAIJ,IAAIkC,QAAQ,SAACnC,EAASoC,GACzBmgB,MAAM1M,GACL1S,KAAK,SAACqf,GACHH,EAAUxM,GAAO5V,EAAc0K,GAAgB6X,EAASC,KACxDziB,EAAQC,KAHZ,MAKOmC,MAIS/E,KAAK,KAAM,uGCtBnC,WAAqB4C,EAAe2B,GAAU,IACnCwR,EAA8BnT,EAA9BmT,gBAAiBoM,EAAavf,EAAbuf,UAExB,OADApM,EAAgB8G,YAAYsF,GACrBvf,qGCHX,IAAA2f,EAAAjkB,EAAA,GAEA,WAAqCsE,EAAe2B,GAAU,IACnDwR,EAAmCnT,EAAnCmT,gBAAiB4N,EAAkB/gB,EAAlB+gB,eAElBzO,GAAc,EAAAqN,EAAAjf,uBAAsByS,GAC1C,GAAIb,EAAa,CACb,IAAIsN,EAAa,KAQjB,GAPAtN,EAAYxC,KAAK,SAACgJ,GACd,OAAIA,EAAK3c,OAAS4kB,IACdnB,EAAa9G,GACN,KAIX8G,EAAY,CACZ,IAAMld,EAAM4P,EAAY/I,QAAQqW,IACrB,EAAPld,GACA4P,EAAY9I,OAAO9G,EAAK,GAE5Bkd,EAAW7G,OAAOpX,IAG1B,OAAO3B,4CCvBJ,SAASyiB,EAAcziB,EAAe2B,GAEzC,OADA3B,EAAcmT,gBAAgBuP,SACvB1iB,mFAGIyiB,qGCLf,WAA2CziB,EAAe2B,GAStD,OANI3B,EADA2iB,cAGUhe,QAAQ,SAAAxI,UACX6D,EAAc7D,YAElB6D,EAAc2iB,cACd3iB,qGCTX,WAAyBA,EAAe2B,GAAU,IACvCwR,EAAsCnT,EAAtCmT,gBAAiByP,EAAqB5iB,EAArB4iB,kBACxBzP,EAAgBuP,SAASG,SAASD,sGCFtC,MAAA3hB,KAAAvF,EAAA,uBAEA,WAAuBsE,EAAe2B,GAAU,IAChC2R,EAAetT,EAAfsT,WAMR,OADA3R,EAAS2P,UAAU1T,UAAmBqB,eAAgB,CAACqU,EAHhC,SAACtO,GACpBhF,EAAc2T,eAAiB3O,KAG5BhF,qGCTf,MAAAF,KAAApE,EAAA,uBAEA,WAAsBsE,EAAe2B,GAAU,IAAAmhB,EACG9iB,EAAvC2T,EADoCmP,EACpCnP,eAAgBP,EADoB0P,EACpB1P,oBAEvB,OADApT,GAAgB,EAAAF,EAAA,SAAmBE,EAAeoT,GAC9CO,EAAe9D,OACR8D,EAAe9D,OAAO7P,GAE1BA,qGCRX,MAAAiB,KAAAvF,EAAA,uBAEA,SAASqnB,EAAsBjoB,EAAMsR,EAAUpM,EAAe0K,GAC1D,IAAMlK,EAAU1F,EAAK+b,KAAKzK,GACrB5L,EAAQqC,QACTP,QAAQ0e,KAAR,aAAAxe,OAA0B4J,EAA1B,oBAEJpM,EAAc0K,GAAgBlK,EAC1BR,EAAcvC,eAAe,wBACtBuC,EAAc0K,aAI7B,WAAuB1K,EAAe2B,GAAU,IACvCyK,EAA6CpM,EAA7CoM,SAAU1B,EAAmC1K,EAAnC0K,aAAcsY,EAAqBhjB,EAArBgjB,kBAE7B,IAAK5W,EACD,MAAM,IAAIjF,MAAM,0BAIpB,OAFAuD,EAAgBA,GAA+B,kBAE3CsY,GAAqBhjB,EAAc0K,GAEnCqY,EADoB/iB,EAAc0K,GACC0B,EAAUpM,EAAe0K,GAOhE/I,EAAS2P,UAAU1T,UAAmByB,oBAAqB,CAHtC,SAACvE,GAClBioB,EAAsBjoB,EAAMsR,EAAUpM,EAAe0K,MAJ9C1K,qGCxBf,WAA8BA,EAAe2B,GAAU,IAC5CshB,EAA+BjjB,EAA/BijB,WAAY9P,EAAmBnT,EAAnBmT,gBACnB,IAAK,IAAI+P,KAAYD,EACbA,EAAWxlB,eAAeylB,IAC1B/P,EAAgB2D,KAAKoM,EAAUD,EAAWC,IAGlD,OAAOljB,qGCPX,WAA2BA,EAAe2B,GAAU,IACzC0X,EAAqCrZ,EAArCqZ,OAAQlG,EAA6BnT,EAA7BmT,gBAAiBgQ,EAAYnjB,EAAZmjB,SAMhC,OALK9J,EAGDlG,EAAgBkG,OAAO8J,GAFvBhQ,EAAgBlH,KAAKkX,GAIlBnjB,qGCPX,MAAAojB,KAAA1nB,EAAA,uOAEA,WAA0BsE,EAAe2B,GAIrC,cAFA3B,EAAgBE,EAAcF,GADX,EAAAojB,EAAA,SAAsBpjB,EAAeA,EAAciH,cAEjDA,WACdjH,qGCNX,MAAAojB,KAAA1nB,EAAA,wBAEA,WAAkBsE,EAAe2B,GAC7B,IAAMsF,GAAa,EAAAmc,EAAA,SAAsBpjB,EAAeA,EAAciH,YAEtE,OADAjH,EAAcmT,gBAAgBgI,IAAIlU,GAC3BjH,qGCLX,IAAAF,EAAAgB,EAAApF,EAAA,IACA+jB,EAAA3e,EAAApF,EAAA,8CAEA,WAAqBsE,EAAe2B,GAAU,IAAAmhB,EACI9iB,EAAvC2T,EADmCmP,EACnCnP,eAAgBP,EADmB0P,EACnB1P,oBACvB,OAAO,IAAIlR,QAAQ,SAACnC,EAASoC,GACzBnC,GAAgB,EAAAF,EAAA,SAAmBE,EAAeoT,GAClDO,EAAe7I,MAAM9K,GAAekD,KAAK,YACrC,EAAAuc,EAAA,SAAgB1f,EAASC,IAC1BmC,wGCTX,WAAqBnC,EAAe2B,GAAU,IACnCwR,EAA8BnT,EAA9BmT,gBAAiBoM,EAAavf,EAAbuf,UAExB,OADApM,EAAgBkQ,YAAY9D,GACrBvf,qGCHX,WAAuBA,EAAe2B,GAElC,OADA3B,EAAcmT,gBAAgBmQ,SACvBtjB,qGCFX,MAAAyf,KAAA/jB,EAAA,uBAEA,WAAcsE,EAAe2B,GAAU,IAC3B4hB,EAAiBvjB,EAAjBujB,aACR,OAAO,IAAIrhB,QAAQ,SAACnC,GAChBsR,WAAW,YACP,EAAAoO,EAAA,SAAgB1f,EAASC,IAC1BujB,8SCPX,IAAAC,EAAA1iB,EAAApF,EAAA,KAEA+nB,EAAA3iB,EAAApF,EAAA,uICFA,IAAAwP,EAAApK,EAAApF,EAAA,IACAuF,EAAAH,EAAApF,EAAA,qOAIG,SAAAgoB,EAAY3hB,EAAU0C,gGAAQ7C,CAAAC,KAAA6hB,GACzB7hB,KAAKE,SAAWA,EAChBF,KAAK4C,OAASA,EACd5C,KAAK8hB,WAAalf,EAAOmf,eAAexX,SACxCvK,KAAKwM,MAAO,EACZxM,KAAKgiB,OAAS,KACdhiB,KAAKiiB,mBAAqB,KAC1BjiB,KAAKkG,EAAqB,GAC1BlG,KAAKkiB,iGAGI9f,GAIT,OAHaA,EAAcmB,UAAUgK,OAAO,SAAA4U,GAAQ,MAAsB,UAAlBA,EAASC,OAAkB/e,IAAI,SAAA8e,GACnF,OAAOA,EAASrY,mCAKnBS,GAAU,IAAAnK,EAAAJ,KACLqiB,EAAOriB,KAAKsiB,GAAatiB,KAAK4C,QAC9B2f,EAAM9oB,OAAO+oB,SACb3mB,GAAI,EAAAwN,EAAA,aAAA1I,OAAM4J,IAChB,IAAK1O,EAAEmF,OACH,MAAM,IAAIsE,MAAJ,yBAAA3E,OAAmC4J,EAAnC,gBAEV,IAAIkY,EAAI5mB,EAAE2jB,aACNkD,EAAI7mB,EAAE6jB,cACA,IAAN+C,IACAA,EAAI,KAEE,IAANC,IACAA,EAAI,KAGR1iB,KAAKgiB,OAASO,EAAIviB,KAAK4C,OAAOmf,eAAexX,UAC7CvK,KAAKgiB,OAAOW,MAAM,CACdC,KAAMP,EAAK,GACXQ,MAAO7iB,KAAK4C,OAAOmf,eAAee,OAClCrD,OAAQiD,EACRnD,MAAOkD,EACPM,UAAU,EACVC,WAAW,EACXC,cAAc,EACdC,oBAAoB,EACpBC,eAAe,EACfC,UAAW,gBACXC,UAAW,6BACXC,WAAY,OACZC,QAAQ,IAEZ,IAAMC,EAAW,GAcjB,OAbAnB,EAAKvf,QAAQ,SAACiR,GACVyP,EAASxf,KAAK,CACV4e,KAAM7O,EACNgD,MAAOhD,EACP8O,MAAOziB,EAAKwC,OAAOmf,eAAee,WAG1B,IAAIziB,QAAQ,SAACnC,EAASoC,GAClCF,EAAK4hB,OAAOvV,KAAK,QAAS,WACtBrM,EAAKqjB,GAAmBvlB,KAE5BkC,EAAK4hB,OAAO0B,KAAKF,gDAKNtlB,GAAS,IAAA6C,EAAAf,KACxBA,KAAKgiB,OAAOvV,KAAK,aAAc,WAC3B1L,EAAKihB,OAAOrV,QACZ5L,EAAKb,SAAS0M,kBAAkB7Q,UAAmBS,SAAUuE,EAAKihB,OAAOnV,SAAU,CAAC9L,EAAK+L,gBACzF5O,EAAQ6C,KAEZf,KAAKgiB,OAAO3b,GAAGtK,UAAmBU,KAAMuD,KAAK2jB,GAAapoB,KAAKyE,KAAM2K,KAAKC,QAC1E5K,KAAKgiB,OAAO3b,GAAGtK,UAAmBW,OAAQsD,KAAK4jB,GAAeroB,KAAKyE,OACnEA,KAAKgiB,OAAO3b,GAAGtK,UAAmBY,SAAUqD,KAAK6jB,GAAsBtoB,KAAKyE,OAC5EwP,WAAW,WACPzO,EAAKihB,OAAOzT,QACd,oDAIGvO,KAAKwM,OACNxM,KAAKsM,OACLtM,KAAKE,SAAS0M,kBAAkB7Q,UAAmBY,SAAUqD,KAAK8hB,WAAY,CAAC9hB,KAAKgiB,OAAO8B,+DAK/F9jB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBW,OAAQsD,KAAK8hB,WAAY,CAAC9hB,KAAK8N,cAAe9N,KAAK8M,kDAItG9M,KAAKgiB,OAAOnB,SACZ7gB,KAAKkG,EAAmBpD,QAAQ,SAAAoQ,GAAI,OAAIA,2CAG/BtI,EAAOsD,GAChB,IAAMC,EAAMvD,EAAMsD,EAAMhC,UACnBlM,KAAKwM,MAAU2B,IAAQvD,EAAM5K,KAAKgiB,OAAOlV,cAAgB,IAC1D9M,KAAKgN,KAAK,iDAIIkB,GACdlO,KAAKwM,MACLxM,KAAKgN,KAAK,gDAKdhN,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBC,oBAAqBgE,KAAK+jB,WAAWxoB,KAAKyE,MAAOA,KAAK8hB,aACvH9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBE,aAAc+D,KAAKuO,KAAKhT,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBG,aAAc8D,KAAKsM,KAAK/Q,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBI,cAAe6D,KAAK2M,MAAMpR,KAAKyE,MAAOA,KAAK8hB,aAC5G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBK,aAAc4D,KAAKgN,KAAKzR,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBM,eAAgB2D,KAAKgO,OAAOzS,KAAKyE,MAAOA,KAAK8hB,aAC9G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBO,kBAAmB0D,KAAKgkB,GAAWzoB,KAAKyE,MAAOA,KAAK8hB,aACrH9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBQ,iBAAkByD,KAAKgJ,SAASzN,KAAKyE,MAAOA,KAAK8hB,gDAG3Gpb,GACP,IAAIlB,EAAS,GAC0B,UAAnCxF,KAAKgiB,OAAOiC,cAAc3pB,OAC1BkL,EAAS,YAGbkB,GADkB,EAAA2C,EAAA,aAAA1I,OAAMX,KAAK8hB,YAAXnhB,OAAwB6E,0CAKtCxF,KAAKkkB,OACLlkB,KAAKuO,OAELvO,KAAK2M,uCAKT3M,KAAKkkB,QAAS,EACdlkB,KAAKgiB,OAAOzT,OACZvO,KAAKE,SAAS0M,kBAAkB7Q,UAAmBa,KAAMoD,KAAK8hB,2CAI9D9hB,KAAKkkB,QAAS,EACdlkB,KAAKgiB,OAAO1V,OACZtM,KAAKE,SAAS0M,kBAAkB7Q,UAAmBc,KAAMmD,KAAK8hB,4CAI9D9hB,KAAKkkB,QAAS,EACdlkB,KAAKgiB,OAAOrV,QACZ3M,KAAKE,SAAS0M,kBAAkB7Q,UAAmBe,MAAOkD,KAAK8hB,yCAG9D5V,GACD,IAAM+N,EAAkBja,KAAKgiB,OAAOlU,cACpC9N,KAAKgiB,OAAOhV,KAAKd,GACjBlM,KAAKE,SAAS0M,kBAAkB7Q,UAAmBgB,KAAMiD,KAAK8hB,WAAY,CAAC5V,EAAU+N,EAAiBja,KAAKgiB,OAAOlV,+CAG/GyS,EAAOE,GACVzf,KAAKgiB,OAAOhU,OAAOuR,EAAOE,GAC1Bzf,KAAKE,SAAS0M,kBAAkB7Q,UAAmBiB,OAAQgD,KAAK8hB,WAAY,CAACvC,EAAOE,qCAG/E/Y,GACLA,EAAeiE,KAAKC,MAAM5K,KAAK8M,qDAGtBpH,GACT1F,KAAKgiB,OAAO9U,aAAaxH,gCAGxBzC,EAAWkhB,GACZnkB,KAAKgiB,OAAOvV,KAAKxJ,EAAWkhB,+BAG5BlhB,EAAWkhB,GACXnkB,KAAKgiB,OAAO1a,IAAIrE,EAAWkhB,8BAG5BlhB,EAAWkhB,GACVnkB,KAAKgiB,OAAO3b,GAAGpD,EAAWkhB,yCAI1B,OAAOnkB,KAAKgiB,OAAOlU,yDAInB,OAAO9N,KAAKgiB,OAAO8B,sDAInB,OAAO9jB,KAAKgiB,OAAOoC,iDAInB,OAAOpkB,KAAKgiB,OAAOlV,gDAInB,OAAO9M,KAAKgiB,OAAOqC,8CAInB,OAAOrkB,KAAKgiB,OAAOsC,4CAGflN,GACJpX,KAAKgiB,OAAOuC,QAAQnN,qCAGdoN,GACNxkB,KAAKgiB,OAAOyC,UAAUD,+GC7N9B,IAAAnb,EAAApK,EAAApF,EAAA,IACAuF,EAAAH,EAAApF,EAAA,qOAII,SAAA6qB,EAAYxkB,EAAU0C,gGAAQ7C,CAAAC,KAAA0kB,GAC1B1kB,KAAKE,SAAWA,EAChBF,KAAK4C,OAASA,EACd5C,KAAK2kB,UAAY,KACjB3kB,KAAK4kB,KAAO,EACZ5kB,KAAK6kB,QAAU,EACf7kB,KAAK8kB,GAAe9kB,KAAK+kB,GAAQxpB,KAAKyE,MACtCA,KAAKwM,MAAO,EACZxM,KAAKkG,EAAqB,GAC1BlG,KAAK8hB,WAAL,WAAAnhB,OAA2C,IAAdgK,KAAKqa,UAClChlB,KAAKkiB,KACLliB,KAAKwjB,SAAW,GAChBxjB,KAAKilB,oBAAsB,KAC3BjlB,KAAKklB,YAAa,EAClBllB,KAAKkkB,QAAS,kGAGD9hB,GAIb,OAHiBA,EAAcmB,UAAUgK,OAAO,SAAA4U,GAAQ,MAAsB,cAAlBA,EAASC,OAAsB/e,IAAI,SAAA8e,GAC3F,OAAOA,yCAKFzc,GACLA,EAAQ,GAAKA,EAAQ1F,KAAKwjB,SAASxiB,SAGvChB,KAAKilB,oBAAsBjlB,KAAKwjB,SAAS9d,GACzC1F,KAAKklB,YAAa,EAClBllB,KAAKmlB,sDAILnlB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBC,oBAAqBgE,KAAK+jB,WAAWxoB,KAAKyE,MAAOA,KAAK8hB,aACvH9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBE,aAAc+D,KAAKuO,KAAKhT,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBG,aAAc8D,KAAKsM,KAAK/Q,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBI,cAAe6D,KAAK2M,MAAMpR,KAAKyE,MAAOA,KAAK8hB,aAC5G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBK,aAAc4D,KAAKgN,KAAKzR,KAAKyE,MAAOA,KAAK8hB,aAC1G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBM,eAAgB2D,KAAKolB,GAAQ7pB,KAAKyE,MAAOA,KAAK8hB,aAC/G9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBO,kBAAmB0D,KAAKgkB,GAAWzoB,KAAKyE,MAAOA,KAAK8hB,aACrH9hB,KAAKkG,EAAmBlC,KAAKhE,KAAKE,SAASmG,GAAGtK,UAAmBQ,iBAAkByD,KAAKqlB,uBAAuB9pB,KAAKyE,MAAOA,KAAK8hB,6CAG5HwD,GACJ,GAAKtlB,KAAKkkB,OAAV,CAGA,IAAIlkB,KAAK4kB,MAA2B,KAAnBU,EAAMtlB,KAAK4kB,KAAc,CAOtC,IANK5kB,KAAK4kB,MAAQ5kB,KAAKklB,aACnBllB,KAAKklB,YAAa,EAClBllB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBwpB,WAAYvlB,KAAK8hB,aAExE9hB,KAAK4kB,KAAOU,EACZtlB,KAAK6kB,UACD7kB,KAAK6kB,QAAU7kB,KAAKilB,oBAAoBjc,SAAU,CAClD,IAAIhJ,KAAKwM,KAKL,OAFAxM,KAAKsM,YACLtM,KAAKE,SAAS0M,kBAAkB7Q,UAAmBY,SAAUqD,KAAK8hB,YAHlE9hB,KAAKwlB,KAObxlB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBU,KAAMuD,KAAK8hB,WAAY9hB,KAAK6kB,SAEnF7kB,KAAK2kB,UAAYc,sBAAsBzlB,KAAK8kB,sCAIxC9kB,KAAK2kB,YAGT3kB,KAAK2kB,UAAYc,sBAAsBzlB,KAAK8kB,sCAI5C9kB,KAAK0lB,KACL1lB,KAAK4kB,KAAO,EACZ5kB,KAAK6kB,QAAU,oCAIfpkB,QAAQC,MAAM,0DAGPilB,GACPA,EAAS3lB,KAAKiK,2DAIVjK,KAAK2kB,YACLiB,qBAAqB5lB,KAAK2kB,WAC1B3kB,KAAK2kB,UAAa,qCAQtB,GAHA3kB,KAAKwjB,SAAWxjB,KAAK6lB,GAAiB7lB,KAAK4C,QAC3C5C,KAAKilB,oBAAsBjlB,KAAKwjB,SAAS,GACzCxjB,KAAKiK,WAAY,EAAAZ,EAAA,SAAErJ,KAAKilB,oBAAoB1a,WACvCvK,KAAKiK,UAAUjJ,OAChB,MAAM,IAAIsE,MAAJ,sBAAA3E,OAAgC4J,SAAhC,gBAKV,OAHgB,IAAIlK,QAAQ,SAACnC,GACzBA,wCAOJ8B,KAAKsM,OACLtM,KAAKkG,EAAmBpD,QAAQ,SAAAoQ,GAC5BA,2CAKAlT,KAAKkkB,OACLlkB,KAAKuO,OAELvO,KAAK2M,uCAKT3M,KAAKkkB,QAAS,EACdlkB,KAAK8lB,KACL9lB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBa,KAAMoD,KAAK8hB,2CAI9D9hB,KAAKkkB,QAAS,EACdlkB,KAAK0lB,KACL1lB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBc,KAAMmD,KAAK8hB,4CAI9D9hB,KAAKkkB,QAAS,EACdlkB,KAAKE,SAAS0M,kBAAkB7Q,UAAmBe,MAAOkD,KAAK8hB,yCAG9D5V,GACGA,EAAW,GAAKA,EAAWlM,KAAKilB,oBAAoBjc,WAGxDhJ,KAAKE,SAAS0M,kBAAkB7Q,UAAmBgB,KAAMiD,KAAK8hB,YAC9D9hB,KAAK6kB,QAAU3Y,EACflM,KAAKE,SAAS0M,kBAAkB7Q,UAAmBW,OAAQsD,KAAK8hB,4DAG7C6D,GACnBA,EAAS3lB,KAAKilB,oBAAoBjc,qCAGnC/F,EAAW+T,GACV,OAAOhX,KAAKE,SAASmG,GAAGpD,EAAW+T,EAAShX,KAAK8hB,yCAGhD7e,EAAW+T,GACZ,OAAOhX,KAAKE,SAASuM,KAAKxJ,EAAW+T,EAAShX,KAAK8hB","file":"library.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"lottie-web\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [\"jquery\", \"lottie-web\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory(require(\"jquery\"), require(\"lottie-web\"));\n\telse\n\t\troot[\"library\"] = factory(root[undefined], root[undefined]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__28__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","class TimelineEventNames {\r\n    // timeline requests\r\n    static PLAY_TOGGLE_REQUEST = 'timeline-play-toggle-request';\r\n    static PLAY_REQUEST = 'timeline-play-request';\r\n    static STOP_REQUEST = 'timeline-stop-request';\r\n    static PAUSE_REQUEST = 'timeline-pause-request';\r\n    static SEEK_REQUEST = 'timeline-seek-request';\r\n    static RESIZE_REQUEST = 'timeline-resize-request';\r\n    static CONTAINER_REQUEST = 'timeline-container-request';\r\n    static DURATION_REQUEST = 'timeline-duration-request';\r\n\r\n    // timeline announcements\r\n    static DURATION = 'timeline-duration';\r\n    static TIME = 'timeline-time';\r\n    static SEEKED = 'timeline-seeked';\r\n    static COMPLETE = 'timeline-complete';\r\n    static PLAY = 'timeline-play';\r\n    static STOP = 'timeline-stop';\r\n    static PAUSE = 'timeline-pause';\r\n    static SEEK = 'timeline-seek';\r\n    static RESIZE = 'timeline-resize';\r\n    static POSITION_UPDATE = 'timeline-position-update';\r\n    static TIME_UPDATE = 'timeline-time-update';\r\n\r\n    // factory and engine events\r\n    static REQUEST_INSTANCE = 'request-instance';\r\n    static REQUEST_ACTION = 'request-action';\r\n    static REQUEST_FUNCTION = 'request-function';\r\n    static REQUEST_TIMELINE_URI = 'request-timeline-uri';\r\n    static BEFORE_REQUEST_TIMELINE_URI = 'before-request-timeline-uri';\r\n    static REQUEST_ENGINE_ROOT = 'request-engine-root';\r\n    static REQUEST_CURRENT_TIMELINE_POSITION = 'request-current-timeline-position';\r\n    static REQUEST_TIMELINE_CLEANUP = 'request-timeline-cleanup';\r\n    static EXECUTE_TIMELINEACTION = 'execute-timelineaction';\r\n    static RESIZE_TIMELINEACTION = 'resize-timelineaction';\r\n\r\n    //language manager events\r\n    static REQUEST_LABEL_COLLECTION = 'request-label-collection';\r\n    static REQUEST_LABEL_COLLECTIONS = 'request-label-collections';\r\n    static REQUEST_CURRENT_LANGUAGE = 'request-current-language';\r\n    static LANGUAGE_CHANGE = 'language-change';\r\n}\r\n\r\nexport default TimelineEventNames;\r\n","import mergeOperationData from './mergeOperationData';\r\n\r\nfunction internalResolve(resolve, operationData, newOperationData) {\r\n    if (newOperationData) {\r\n        resolve(mergeOperationData(operationData, newOperationData));\r\n    } else {\r\n        resolve(operationData);\r\n    }\r\n}\r\n\r\nexport default internalResolve;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","function mergeOperationData(operationData, newOperationData) {\r\n    return Object.assign(operationData, newOperationData);\r\n}\r\n\r\nexport default mergeOperationData;\r\n","function deepcopy(original) {\r\n    return JSON.parse(JSON.stringify(original));\r\n}\r\n\r\nexport default deepcopy;\r\n","function getElementData(name, element) {\r\n    return element.data(name);\r\n}\r\n\r\nconst getElementControllers = getElementData.bind(null, \"chronoEngineControllers\");\r\n\r\nexport {\r\n    getElementData,\r\n    getElementControllers\r\n}","import * as actions from './action';\r\nexport { default as ConfigurationResolver } from './configuration/configuration-resolver';\r\nexport { default as ChronoTriggerEngine } from './chrono-trigger-engine';\r\nexport { default as EngineFactory } from './engine-factory';\r\nexport { default as TimelineEventNames } from './timeline-event-names';\r\nexport { default as LanguageManager } from './language-manager';\r\nexport { default as WebpackResourceImporter } from './importer/webpack-resource-importer';\r\nexport { default as Eventbus } from './eventbus/eventbus';\r\nexport default actions;","export { default as Action } from './action';\r\nexport { default as EndableAction } from './endableaction';\r\nexport { default as TimelineAction } from './timelineaction';","import deepcopy from '../operation/helper/deepcopy';\r\n\r\nclass Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tthis.name = actionData.name;\r\n\t\tthis.startOperations = actionData.startOperations;\r\n\t\tthis.eventbus = eventBus; \r\n\t}\r\n\r\n\tstart(initOperationData) {\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeOperation(this.startOperations, 0, resolve, reject, initOperationData);\r\n\t\t}).catch((e) => {\r\n\t\t\tconsole.error(`Error in action start '${this.name}'`);\r\n\t\t\tthrow e;\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tconst copy = (operationInfo.operationData) ? deepcopy(operationInfo.operationData) : {};\r\n\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\t\t\t\r\n\t\t\tconst result = operationInfo.instance(mergedOperationData, this.eventbus);\r\n\t\t\t\r\n            if (result.then) {\r\n\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\tthis.executeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n            } else {\r\n                this.executeOperation(operations, ++idx, resolve, reject, result);\r\n            }\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tconst idx = 0;\r\n\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\tthis.executeResizeOperation(this.startOperations, idx, resolve, reject, operationData);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\texecuteResizeOperation(operations, idx, resolve, reject, previousOperationData) {\r\n\t\tpreviousOperationData = previousOperationData || {};\r\n\t\t\r\n\t\tif (idx < operations.length) {\r\n\t\t\tconst operationInfo = operations[idx];\r\n\t\t\tif ((operationInfo.resizeInstance)) {\r\n\t\t\t\tconst copy = ((operationInfo.operationData)) ? deepcopy(operationInfo.operationData) : {};\r\n\t\t\t\tconst mergedOperationData = Object.assign(previousOperationData, copy);\r\n\r\n\t\t\t\tconst result = operationInfo.resizeInstance(mergedOperationData);\r\n\t\t\t\tif (result.then){\r\n\t\t\t\t\tresult.then((resultOperationData) => {\r\n\t\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, resultOperationData);\r\n\t\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, result);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.executeResizeOperation(operations, ++idx, resolve, reject, previousOperationData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresolve(previousOperationData);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Action;\r\n","import Action from './action';\r\n\r\nclass EndableAction extends Action {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.endOperations = actionData.endOperations;\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tif ((this.endOperations) && (this.endOperations.length)) {\r\n\t\t\tconst idx = 0;\r\n\t\t\tconst result = new Promise((resolve, reject) => {\r\n\t\t\t\tthis.executeOperation(this.endOperations, idx, resolve, reject, initOperationData);\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tconsole.error(`Error in action end'${this.name}'`);\r\n\t\t\t\tthrow e;\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve(initOperationData);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default EndableAction;\r\n","import { TimelineAction, EndableAction, Action } from '../action';\r\nimport getNestedPropertyValue from '../operation/helper/getNestedPropertyValue';\r\n\r\nclass ConfigurationResolver {\r\n\r\n    constructor(importer, eventbus) {\r\n        this.importer = importer;\r\n        this.eventbus = eventbus;\r\n    }\r\n\r\n    importSystemEntry(systemName) {\r\n        return this.importer.import(systemName)[systemName];\r\n    }\r\n\r\n    process(actionRegistryListener, configuration) {\r\n        const actionsLookup = {};\r\n        this.processConfiguration(configuration, configuration);\r\n        this.resolveOperations(configuration);\r\n        this.initializeTimelineActions(configuration);\r\n        this.initializeInitActions(configuration, actionsLookup);\r\n        this.initializeActions(configuration, actionsLookup);\r\n        this.initializeEventActions(actionRegistryListener, configuration);\r\n        return actionsLookup;\r\n    }\r\n\r\n    initializeEventActions(actionRegistryListener, config) {\r\n        if ((actionRegistryListener) && (config.eventActions)) {\r\n            config.eventActions.forEach((actionData) => {\r\n                const eventAction = new Action(actionData, this.eventbus);\r\n                actionRegistryListener.registerAction(eventAction, actionData.eventName, actionData.eventTopic);\r\n            });\r\n            delete config.eventActions;\r\n        }\r\n    }\r\n\r\n    initializeActions(config, actionsLookup) {\r\n        if (config.actions) {\r\n            config.actions.forEach((actionData) => {\r\n                const action = new EndableAction(actionData, this.eventbus);\r\n                actionsLookup[actionData.name] = action;\r\n            });\r\n            delete config.actions;\r\n        }\r\n    }\r\n\r\n    initializeInitActions(config, actionsLookup) {\r\n        if (!config.initActions) {\r\n            return;\r\n        }\r\n        config.initActions = config.initActions.map((actionData) => {\r\n            const initAction = new EndableAction(actionData, this.eventbus);\r\n            actionsLookup[actionData.name] = initAction;\r\n            return initAction;\r\n        });\r\n    }\r\n\r\n    initializeTimelineActions(config) {\r\n        if (config.timelines) {\r\n            config.timelines.forEach(this.initializeTimelineAction.bind(this));\r\n        }\r\n    }\r\n\r\n    initializeTimelineAction(timelineConfig) {\r\n        if (!timelineConfig.timelineActions) {\r\n            return;\r\n        }\r\n        timelineConfig.timelineActions = timelineConfig.timelineActions.map((actionData) => {\r\n            const timelineAction = new TimelineAction(actionData, this.eventbus);\r\n            if (!timelineAction.endOperations) {\r\n                timelineAction.endOperations = [];\r\n            }\r\n            return timelineAction;\r\n        });\r\n    }\r\n\r\n    resolveOperations(config) {\r\n        const timelineOperations = [];\r\n        if (config.timelines) {\r\n            config.timelines.forEach((timelineInfo) => {\r\n                timelineOperations.push(...this._gatherOperations(timelineInfo.timelineActions));\r\n            });\r\n        }\r\n\r\n        const systemNameHolders = this._gatherOperations(config.initActions)\r\n                                    .concat(timelineOperations)\r\n                                    .concat(this._gatherOperations(config.actions))\r\n                                    .concat(this._gatherOperations(config.eventActions));\r\n\r\n        systemNameHolders.forEach((holder)=> {\r\n            holder.instance = this.importSystemEntry(holder.systemName);\r\n        });\r\n    }\r\n\r\n    processConfiguration(config, parentConfig) {\r\n        if (config == null) {\r\n            return;\r\n        }\r\n        if (config.constructor === Array) {\r\n            for (let i = 0, ii = config.length; i < ii; i++) {\r\n                this.processConfiguration(config[i], parentConfig);\r\n            }\r\n        } else {\r\n            Object.keys(config).forEach((key) => {\r\n                this.processConfigProperty(key, config, parentConfig);\r\n            });\r\n        }\r\n    }\r\n\r\n    processConfigProperty(key, config, parentConfig) {\r\n        const value = config[key];\r\n        if (typeof value === 'string') {           \r\n            if ((value.startsWith('config:'))) {\r\n                const configProperty = value.substr(7, value.length);\r\n                config[key] = getNestedPropertyValue(configProperty, parentConfig);\r\n            }\r\n            else if ((value.startsWith('template:'))) {\r\n                const templateKey = value.substr(9, value.length);\r\n                config[key] = this.importSystemEntry(templateKey);\r\n            }\r\n            else if ((value.startsWith('json:'))) {\r\n                const jsonKey = value.substr(5, value.length);\r\n                const json = this.importSystemEntry(jsonKey);\r\n                config[key] = json;\r\n            }\r\n        } else if (typeof value === 'object') {\r\n            this.processConfiguration(config[key], parentConfig);\r\n        }\r\n    }\r\n\r\n    _gatherOperations(actions) {\r\n        let result = [];\r\n        if (!actions) {\r\n            return result;\r\n        }\r\n        actions.forEach((action) => {\r\n            if (action.endOperations) {\r\n                result = result.concat(action.startOperations.concat(action.endOperations));\r\n            } else {\r\n                result = result.concat(action.startOperations);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\nexport default ConfigurationResolver;\r\n","function getNestedValue(properties, sourceObject) {\r\n    if (!properties) {\r\n        throw Error('properties arg cannot be null');\r\n    }\r\n    if (!sourceObject) {\r\n        throw Error('sourceObject arg cannot be null');\r\n    }\r\n    let currentInstance = sourceObject;\r\n    let suffix = null;\r\n    properties.forEach((prop, index) => {\r\n        if (index === properties.length-1) {\r\n            const parts = prop.split('+');\r\n            if (parts.length > 1) {\r\n                prop = parts[0];\r\n                suffix = parts[1];\r\n            }\r\n        }\r\n        currentInstance = currentInstance[prop];\r\n    });\r\n\r\n    return (suffix) ? currentInstance + suffix : currentInstance;\r\n}\r\n\r\nexport default getNestedValue;\r\n","import TimelineEventNames from \"./timeline-event-names\";\r\n\r\nclass LanguageManager {\r\n\r\n    constructor(language, labels, eventbus) {\r\n        if (!language || !language.length) {\r\n            throw new Error('language ctor arg cannot be null or have zero length');\r\n        }\r\n        if (!labels) {\r\n            throw new Error('labels ctor arg cannot be null');\r\n        }\r\n        if (!eventbus) {\r\n            throw new Error('eventbus ctor arg cannot be null');\r\n        }\r\n        this._labelLookup = {};\r\n        this._currentLanguage = language;\r\n        this._eventbusListeners = [];\r\n        this.createLabelLookup(labels);\r\n        this.addEventbusListeners(eventbus);\r\n    }\r\n\r\n    addEventbusListeners(eventbus) {\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTION, this.handleRequestLabelCollection.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_LABEL_COLLECTIONS, this.handleRequestLabelCollections.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, this.handleRequestCurrentLanguage.bind(this)));\r\n        this._eventbusListeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n    }\r\n\r\n    handleRequestCurrentLanguage(resultCallback) {\r\n        resultCallback(this._currentLanguage);\r\n    }\r\n\r\n    handleRequestLabelCollection(labelId, resultCallback) {\r\n        resultCallback(this._labelLookup[labelId]);\r\n    }\r\n\r\n    handleRequestLabelCollections(labelIds, resultCallback) {\r\n        const labelCollections = labelIds.map((labelId) => {\r\n            return this._labelLookup[labelId];\r\n        });\r\n        resultCallback(labelCollections);\r\n    }\r\n\r\n    handleLanguageChange(language) {\r\n        if (language && language.length) {\r\n            this._currentLanguage = language;\r\n        } else {\r\n            console.error('Language cannot be changed to null or empty string');\r\n        }\r\n    }\r\n\r\n    createLabelLookup(labels) {\r\n        labels.forEach((label) => {\r\n            this._labelLookup[label.id] = label.labels;\r\n        });\r\n    }\r\n}\r\n\r\nexport default LanguageManager;\r\n","class Eventbus {\r\n\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.eventHandlers = {};\r\n\t\tthis.eventListeners = [];\r\n\t\tthis.eventInterceptors = {};\r\n\t}\r\n\r\n\t_getEventInterceptors(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventInterceptors[eventName]) {\r\n\t\t\tthis.eventInterceptors[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventInterceptors[eventName];\r\n\t}\r\n\r\n\t_getEventHandlers(eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.eventHandlers[eventName]) {\r\n\t\t\tthis.eventHandlers[eventName] = [];\r\n\t\t}\r\n\t\treturn this.eventHandlers[eventName];\r\n\t}\r\n\r\n\ton(eventName, eventHandler, eventTopic) {\r\n\t\tthis._getEventHandlers(eventName, eventTopic).push(eventHandler);\r\n\t\treturn () => {\r\n\t\t\tthis.off(eventName, eventHandler, eventTopic);\r\n\t\t}\r\n\t}\r\n\r\n\tonce(eventName, eventHandler, eventTopic) {\r\n\t\tconst _this = this;\r\n\t\tconst eventHandlerDecorator = function() {\r\n\t\t\teventHandler(...arguments)\r\n\t\t\t_this.off(eventName, eventHandlerDecorator, eventTopic);\r\n\t\t};\r\n\t\tthis.on(eventName, eventHandlerDecorator, eventTopic);\r\n\t}\r\n\r\n\toff(eventName, eventHandler, eventTopic) {\r\n\t\tconst handlers = this._getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tconst idx = handlers.indexOf(eventHandler);\r\n\t\t\tif (idx > -1) {\r\n\t\t\t\thandlers.splice(idx, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbroadcast(eventName, args) {\r\n\t\tthis._callHandlers(eventName, null, args);\r\n\t}\r\n\r\n\tbroadcastForTopic(eventName, eventTopic, args) {\r\n\t\tthis._callHandlers(eventName, eventTopic, args);\r\n\t}\r\n\r\n\tregisterEventlistener(eventbusListener) {\r\n\t\tthis.eventListeners.push(eventbusListener);\r\n\t}\r\n\r\n\tregisterInterceptor(eventName, interceptor, eventTopic) {\r\n\t\tconst interceptors = this._getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.push(interceptor);\r\n\t}\r\n\r\n\t_callHandlers(eventName, eventTopic, args=[]) {\r\n\t\tconst interceptors = this._getEventInterceptors(eventName, eventTopic);\r\n\t\tinterceptors.forEach((interceptor) => {\r\n\t\t\targs = interceptor.intercept(args);\r\n\t\t});\r\n\t\tthis.eventListeners.forEach((listener) => {\r\n\t\t\tlistener.handleEvent(eventName, eventTopic, args);\r\n\t\t});\r\n\t\tconst handlers = this._getEventHandlers(eventName, eventTopic);\r\n\t\tif (handlers) {\r\n\t\t\tfor (let i = 0, l = handlers.length; i < l; i++) {\r\n\t\t\t\thandlers[i](...args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Eventbus;\r\n","import getNestedValue from './getNestedValue';\r\n\r\nfunction extractOperationDataArgumentValues(sourceObject, argumentValue) {\r\n    if ((argumentValue) && (argumentValue.toLowerCase) && (argumentValue.toLowerCase().startsWith('operationdata.'))) {\r\n        let propNames = argumentValue.split('.');\r\n        propNames.shift();\r\n        return getNestedValue(propNames, sourceObject);\r\n    }\r\n    return argumentValue;\r\n}\r\n\r\nexport default extractOperationDataArgumentValues;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\nimport deepcopy from './deepcopy';\r\n\r\nfunction resolvePropertyValues(operationData, properties) {\r\n    const copy = deepcopy(properties);\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    for(let propertyName in properties) {\r\n        const propertyValue = properties[propertyName];\r\n        copy[propertyName] = extract(propertyValue);\r\n    }\r\n    return copy;\r\n}\r\n\r\nexport default resolvePropertyValues\r\n","import EndableAction from './endableaction';\r\n\r\nclass TimelineAction extends EndableAction {\r\n\r\n\tconstructor(actionData, eventBus) {\r\n\t\tsuper(actionData, eventBus);\r\n\t\tthis.active = false;\r\n\t\tthis.duration = actionData.duration;\r\n\t\tthis.duration.start = +this.duration.start;\r\n\t\tthis.duration.end = +this.duration.end;\r\n\t}\r\n\r\n\tstart() {\r\n\t\tif ((!this.active) || (this.duration.end < 0)) {\r\n\t\t\tthis.active = (this.duration.end > -1);\r\n\t\t\treturn super.start();\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tend(initOperationData) {\r\n\t\tthis.active = false;\r\n\t\treturn super.end(initOperationData);\r\n\t}\r\n\r\n\tresize(operationData) {\r\n\t\tif ((this.active) || (this.duration.end < 0)) {\r\n\t\t\treturn super.resize(operationData);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexport default TimelineAction;\r\n","import getNestedValue from \"./getNestedValue\";\r\n\r\nfunction getNestedPropertyValue(propertyChain, sourceObject) {\r\n    const properties = propertyChain.split('.');\r\n    return getNestedValue(properties, sourceObject);\r\n}\r\n\r\nexport default getNestedPropertyValue;\r\n","import LanguageManager from './language-manager';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\n\r\nclass ChronoTriggerEngine {\r\n\r\n    constructor(configuration, eventbus, timelineProvider) {\r\n        this._configuration = configuration;\r\n        this._eventbus = eventbus;\r\n        this._timelineProvider = timelineProvider;\r\n        this._timeLineActionsLookup = {};\r\n        this._eventbusListeners = [];\r\n    }\r\n\r\n    init() {\r\n        this._createLayoutTemplate();\r\n\r\n        this._addInitialisationListeners();\r\n\r\n        this._languageManager = new LanguageManager(this._configuration.language, this._configuration.labels, this._eventbus);\r\n\r\n        const { timelines } = this._configuration;\r\n        this._currentTimelineUri = (timelines && timelines.length) ? timelines[0].uri : null;\r\n\r\n        this._createTimelineLookup();\r\n\r\n        return this._initializeTimelineProvider();\r\n    }\r\n\r\n    _createLayoutTemplate() {\r\n        const container = $(this._configuration.containerSelector);\r\n        if (!container || !container.length) {\r\n            throw new Error(`Container selector not found: ${this._configuration.containerSelector}`);\r\n        }\r\n        const { layoutTemplate } = this._configuration;\r\n        if (layoutTemplate && layoutTemplate.length) {\r\n            container.html(layoutTemplate);\r\n        } else {\r\n            console.warning('layoutTemplate is empty, unable to create layout');\r\n        }\r\n    }\r\n\r\n    _initializeTimelineProvider() {\r\n        if (!this._configuration.timelineProviderSettings) {\r\n            return;\r\n        }\r\n\r\n        const playerContainer = $(`#${this._configuration.timelineProviderSettings.selector}`);\r\n\r\n        if (playerContainer.length) {\r\n            return new Promise((resolve) => {\r\n                this._timelineProvider.init().then(() => {\r\n                    this._executeActions((this._configuration.initActions), \"start\").then(() => {\r\n                        this._timelineProvider.on(TimelineEventNames.TIME, this._onTimeHandler.bind(this, Math.floor));\r\n                        this._timelineProvider.on(TimelineEventNames.SEEK, this._onSeekHandler.bind(this, Math.floor));\r\n                        resolve(this._timelineProvider);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        return new Promise((resolve)=> {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this._configuration = null;\r\n        this._eventbus = null;\r\n        this._timelineProvider = null;\r\n        this._timeLineActionsLookup = null;\r\n        this._eventbusListeners.forEach(remover => remover());\r\n        if (this._timelineProvider) {\r\n            this._timelineProvider.destroy();\r\n        }\r\n    }\r\n\r\n    _addInitialisationListeners() {\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_ENGINE_ROOT, this._handleRequestEngineRoot.bind(this, this._configuration.containerSelector)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_TIMELINE_URI, this._handleRequestTimelineUri.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_CURRENT_TIMELINE_POSITION, this._handleRequestTimelinePosition.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.REQUEST_TIMELINE_CLEANUP, this._handleTimelineComplete.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.EXECUTE_TIMELINEACTION, this._handleExecuteTimelineAction.bind(this)));\r\n        this._eventbusListeners.push(this._eventbus.on(TimelineEventNames.RESIZE_TIMELINEACTION, this._resizeTimelineAction.bind(this)));\r\n    }\r\n\r\n    _createTimelineLookup() {\r\n        if (!this._configuration.timelines) {\r\n            return;\r\n        }\r\n        this._configuration.timelines.forEach((timelineInfo) => {\r\n            timelineInfo.timelineActions.forEach(this._addTimelineAction.bind(this, timelineInfo.uri));\r\n        });\r\n    }\r\n\r\n    _addTimelineAction(uri, timeLineAction) {\r\n        const start = timeLineAction.duration.start;\r\n        const timelineStartPositions = this._initializeTimelinePosition(this._initializeUriLookup(this._timeLineActionsLookup, uri), start);\r\n        const startMethod = timeLineAction.start.bind(timeLineAction);\r\n        timelineStartPositions.push(startMethod);\r\n\r\n        let end = timeLineAction.duration.end;\r\n        if ((!end) || (isNaN(end))) {\r\n            end = timeLineAction.duration.end = Infinity;\r\n        }\r\n        if (isFinite(end)) {\r\n            const timelineEndPositions = this._initializeTimelinePosition(this._timeLineActionsLookup[uri], end);\r\n            const endMethod = timeLineAction.end.bind(timeLineAction);\r\n            timelineEndPositions.push(endMethod);\r\n        }\r\n    }\r\n\r\n    _initializeUriLookup(lookup, uri) {\r\n        if (!lookup[uri]) {\r\n            lookup[uri] = {};\r\n        }\r\n        return lookup[uri];\r\n    }\r\n\r\n    _initializeTimelinePosition(lookup, position) {\r\n        if (!lookup[position]) {\r\n            lookup[position] = [];\r\n        }\r\n        return lookup[position];\r\n    }\r\n\r\n    _executeActions(actions, methodName, idx=0) {\r\n        if (idx < actions.length) {\r\n            const action = actions[idx];\r\n\r\n            const promise = action[methodName]();\r\n            return promise.then(() => {\r\n                return this._executeActions(actions, methodName, ++idx);\r\n            });\r\n        }\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    _handleRequestEngineRoot(engineRootSelector, resultCallback) {\r\n        resultCallback($(engineRootSelector));\r\n    }\r\n\r\n    _handleRequestTimelineUri(index, position, previousVideoPosition) {\r\n        position = position || 0;\r\n        previousVideoPosition = previousVideoPosition || 0;\r\n        this._timelineProvider.stop();\r\n        this._cleanUpTimeline().then(() => {\r\n            const timelineConfig = this._configuration.timelines[index];\r\n            this._currentTimelineUri = timelineConfig.uri;\r\n            this._timelineProvider.loop = timelineConfig.loop;\r\n            if ((!this._timelineProvider.loop) && (position > 0)) {\r\n                this._timelineProvider.once(TimelineEventNames.FIRST_FRAME, () => {\r\n                    this._timelineProvider.pause();\r\n                    this._eventbus.broadcastForTopic(TimelineEventNames.DURATION, this._timelineProvider.playerid, [this.getDuration()]);\r\n                    this._executeStartActions().then(() => {\r\n                        this._timelineProvider.seek(position);\r\n                        this._onSeekHandler(Math.floor, { offset: position });\r\n                    });\r\n                });\r\n            }\r\n            this._timelineProvider.playlistItem(index);\r\n        });\r\n    }\r\n\r\n    _cleanUpTimeline() {\r\n        return this._executeRelevantActions(this._getActiveActions, \"end\");\r\n    }\r\n\r\n    _executeStartActions() {\r\n        return this._executeRelevantActions(this._getActionsForPosition.bind(this, 0), \"start\");\r\n    }\r\n\r\n    _getActionsForPosition(position, allActions) {\r\n        return allActions.filter((action) => {\r\n            return (!action.active) && ((action.duration.start <= position) && (action.duration.end >= position));\r\n        });\r\n    }\r\n\r\n    _getActiveActions(allActions) {\r\n        const actions = allActions.filter((action) => {\r\n            return action.active;\r\n        });\r\n        return actions.sort((a, b) => {\r\n            if (b.duration.start < a.duration.start) {\r\n                return -1;\r\n            } else if (b.duration.start > a.duration.start) {\r\n                return 1;\r\n            } else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    _executeRelevantActions(filter, executionType) {\r\n        const timelineActions = this._getRelevantTimelineActions();\r\n        const currentActions = filter.apply(this, [timelineActions]);\r\n        return this._executeActions(currentActions, executionType, 0);\r\n    }\r\n\r\n    _handleRequestTimelinePosition(resultCallback) {\r\n        resultCallback(Math.floor(this._timelineProvider.getPosition()));\r\n    }\r\n\r\n    _handleTimelineComplete() {\r\n        this._cleanUpTimeline();\r\n    }\r\n\r\n    _handleExecuteTimelineAction(uri, index, start) {\r\n        const actions = this._getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            if (start) {\r\n                action.start();\r\n            } else {\r\n                action.end();\r\n            }\r\n        }\r\n    }\r\n\r\n    _resizeTimelineAction(uri, index) {\r\n        const actions = this._getTimelineActionsForUri(uri);\r\n        const action = (actions) ? actions[index] : null;\r\n        if (action) {\r\n            action.resize();\r\n        }\r\n    }\r\n\r\n    _getRelevantTimelineActions() {\r\n        return this._getTimelineActionsForUri(this._currentTimelineUri);\r\n    }\r\n\r\n    _getTimelineActionsForUri(uri) {\r\n        let timelineActions;\r\n        this._configuration.timelines.some((timelineInfo) => {\r\n            if (timelineInfo.uri === uri) {\r\n                timelineActions = timelineInfo.timelineActions;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return timelineActions;\r\n    }\r\n\r\n    _onTimeHandler(floor, event) {\r\n        if (!isNaN(event.position)) {\r\n            const pos = floor(event.position);\r\n            if (this._lastPosition !== pos) {\r\n                this._executeActionsForPosition(pos);\r\n                this._eventbus.broadcastForTopic(TimelineEventNames.POSITION_UPDATE, this._timelineProvider.playerid, [pos, this._timelineProvider.getDuration()]);\r\n            }\r\n            this._eventbus.broadcastForTopic(TimelineEventNames.TIME_UPDATE, this._timelineProvider.playerid, [event.position, this._timelineProvider.getDuration()]);\r\n        }\r\n    }\r\n\r\n    _onSeekHandler(floor, event) {\r\n        const pos = floor(event.offset);\r\n        if (isNaN(pos)) {\r\n            return;\r\n        }\r\n        this._executeSeekActions(pos).then(() => {\r\n            this._timelineProvider.play();\r\n        });\r\n    }\r\n\r\n    _executeActionsForPosition(position) {\r\n        this._lastPosition = position;\r\n        const actions = this._timeLineActionsLookup[this._currentTimelineUri];\r\n        if (actions) {\r\n            const executions = actions[position];\r\n            if (executions) {\r\n                executions.forEach((exec) => {\r\n                    exec();\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    _executeSeekActions(pos) {\r\n        const timelineActions = this._getRelevantTimelineActions();\r\n        const currentActions = this._getActiveActions(timelineActions);\r\n        const newActions = this._getActionsForPosition(pos, timelineActions);\r\n\r\n        const promise = this._executeActions(currentActions, \"end\", 0);\r\n\r\n        return new Promise((resolve) => {\r\n            promise.then(() => {\r\n                this._executeActions(newActions, \"start\", 0).then(() => {\r\n                    resolve();\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default ChronoTriggerEngine;\r\n","import { Eventbus, ActionRegistryEventbusListener, RequestVideoUriInterceptor } from './eventbus';\r\nimport $ from 'jquery';\r\nimport TimelineEventNames from './timeline-event-names';\r\nimport ConfigurationResolver from './configuration/configuration-resolver';\r\n\r\nclass EngineFactory {\r\n    \r\n    constructor(importer, windowRef, eventbus) {\r\n        this._init(importer, windowRef, eventbus);\r\n    }\r\n\r\n    _init(importer, windowRef, eventbus) {\r\n        this._resizeTimeout = -1;\r\n        this._actionsLookup = null;\r\n\r\n        this._importer = importer;\r\n\r\n        this._eventBus = eventbus || new Eventbus();\r\n        this._eventBus.on(TimelineEventNames.REQUEST_INSTANCE, this._requestInstanceHandler.bind(this));\r\n        this._eventBus.on(TimelineEventNames.REQUEST_ACTION, this._requestActionHandler.bind(this));\r\n        this._eventBus.on(TimelineEventNames.REQUEST_FUNCTION, this._requestFunctionHandler.bind(this));\r\n        \r\n        $(windowRef).resize(this._resizeHandler.bind(this));\r\n    }\r\n\r\n    destroy() {\r\n        this._eventBus.clear();\r\n        this._eventBus = null;\r\n    }\r\n\r\n    _resizeHandler() {\r\n        if (this._resizeTimeout > -1) {\r\n            clearTimeout(this._resizeTimeout);\r\n        }\r\n        this._resizeTimeout = setTimeout(() => {\r\n            this._eventBus.broadcast(TimelineEventNames.RESIZE);\r\n        }, 200);\r\n    }\r\n\r\n    _importSystemEntryWithEventbusDependency(systemName) {\r\n        const ctor = this._importSystemEntry(systemName);\r\n        return new ctor(this._eventBus);\r\n    }\r\n\r\n    _importSystemEntry(systemName) {\r\n        return this._importer.import(systemName)[systemName];\r\n    }\r\n\r\n    _requestInstanceHandler(systemName, resultCallback) {\r\n        resultCallback(this._importSystemEntryWithEventbusDependency(systemName));\r\n    }\r\n\r\n    _requestFunctionHandler(systemName, resultCallback) {\r\n        resultCallback(this._importSystemEntry(systemName));\r\n    }\r\n\r\n    _requestActionHandler(systemName, resultCallback) {\r\n        const action = this._actionsLookup[systemName];\r\n        if (action) {\r\n            resultCallback(action);\r\n        } else {\r\n            console.error(`Unknown action: ${systemName}`);\r\n            resultCallback(null);\r\n        }\r\n    }\r\n\r\n    createEngine(configuration, resolver) {\r\n        const { systemName } = configuration.engine;\r\n        const engineClass = this._importSystemEntry(systemName);\r\n\r\n        let actionRegistryListener = null;\r\n        if ((configuration.eventActions) && (configuration.eventActions.length)) {\r\n            actionRegistryListener = new ActionRegistryEventbusListener();\r\n            this._eventBus.registerEventlistener(actionRegistryListener);\r\n        }\r\n\r\n        this._eventBus.registerInterceptor(TimelineEventNames.REQUEST_TIMELINE_URI, new RequestVideoUriInterceptor(this._eventBus));\r\n\r\n        resolver = resolver || new ConfigurationResolver(this._importer, this._eventBus);\r\n        this._actionsLookup = resolver.process(actionRegistryListener, configuration);\r\n\r\n        const timelineProviderClass = this._importSystemEntry(configuration.timelineProviderSettings.systemName);\r\n        const timelineProvider = new timelineProviderClass(this._eventBus, configuration);\r\n\r\n        const chronoTriggerEngine = new engineClass(configuration, this._eventBus, timelineProvider);\r\n        return chronoTriggerEngine;\r\n    }\r\n\r\n}\r\n\r\nexport default EngineFactory;\r\n","export { default as Eventbus } from './eventbus';\r\nexport { default as ActionRegistryEventbusListener } from './actionregistry-eventbus-listener';\r\nexport { default as RequestVideoUriInterceptor } from './request-video-uri-interceptor';","class ActionRegistryEventbusListener {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionRegistry = {};\r\n\t}\r\n\r\n\tregisterAction(action, eventName, eventTopic) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tif (!this.actionRegistry[eventName]) {\r\n\t\t\tthis.actionRegistry[eventName] = [];\r\n\t\t}\r\n\t\tthis.actionRegistry[eventName].push(action);\r\n\t}\r\n\r\n\thandleEvent(eventName, eventTopic, args) {\r\n\t\tif ((eventTopic) && (eventTopic.length)) {\r\n\t\t\teventName = `${eventName}:${eventTopic}`;\r\n\t\t}\r\n\t\tconst actions = this.actionRegistry[eventName];\r\n\t\tif (actions) {\r\n\t\t\tconst operationData = {\r\n\t\t\t\teventArgs: args\r\n\t\t\t};\r\n\t\t\tactions.forEach((action) => {\r\n\t\t\t\taction.start(operationData);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ActionRegistryEventbusListener;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass RequestVideoUriInterceptor {\r\n\r\n\tconstructor(eventbus) {\r\n\t\tthis.eventbus = eventbus;\r\n\t}\r\n\r\n\tintercept(args) {\r\n\t\tthis.eventbus.broadcast(TimelineEventNames.BEFORE_REQUEST_TIMELINE_URI, args.slice());\r\n\t\treturn args;\r\n\t}\r\n\r\n}\r\n\r\nexport default RequestVideoUriInterceptor;\r\n","import * as controllers from '../controllers';\r\nimport * as operations from '../operation';\r\nimport * as providers from '../timelineproviders';\r\nimport * as main from '../';\r\n\r\nclass WebpackResourceImporter {\r\n\r\n    getOperationNames() {\r\n        return Object.keys(operations);\r\n    }\r\n\r\n    getControllerNames() {\r\n        return Object.keys(controllers);\r\n    }\r\n\r\n    getProviderNames() {\r\n        return Object.keys(providers);\r\n    }\r\n\r\n    import(name) {\r\n        if (operations[name]) {\r\n            return {\r\n                [name]: operations[name]\r\n            };\r\n        } else if (controllers[name]) {\r\n            return {\r\n                [name]: controllers[name]\r\n            };\r\n        } else if (providers[name]) {\r\n            return {\r\n                [name]: providers[name]\r\n            };\r\n        } else if (main[name]) {\r\n            return {\r\n                [name]: main[name]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default WebpackResourceImporter;\r\n","export { default as EventListenerController } from './EventListenerController';\r\nexport { default as LabelController } from './LabelController';\r\nexport { default as LottieController } from './LottieController';\r\nexport { default as NavigationController } from './NavigationController';\r\nexport { default as ProgressbarController } from './ProgressbarController';\r\nexport { default as RoutingController } from './RoutingController';\r\nexport { default as SubtitlesController } from './SubtitlesController';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from \"../timeline-event-names\";\r\nimport deepcopy from '../operation/helper/deepcopy';\r\n\r\nclass EventListenerController {\r\n\r\n\tconstructor() {\r\n\t\tthis.operationData = null;\r\n\t\tthis.actionInstanceInfos = null;\r\n\t\tthis.name = \"EventListenerController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\teventName: operationData.eventName,\r\n\t\t\tactions: operationData.actions.slice(),\r\n\t\t\tactionOperationData: operationData.actionOperationData ? deepcopy(operationData.actionOperationData) : undefined\r\n\t\t}\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst { selectedElement, actions, eventName } = this.operationData;\r\n\t\tif (!this.actionInstanceInfos) {\r\n\t\t\tthis.actionInstanceInfos = [];\r\n\t\t\tactions.forEach((actionName) => {\r\n\t\t\t\tconst [isStart, name] = this._isStartAction(actionName);\r\n\t\t\t\tconst resultCallback = (actionInstance) => {\r\n\t\t\t\t\tthis.actionInstanceInfos.push({ start: isStart, action: actionInstance });\r\n\t\t\t\t};\r\n\r\n\t\t\t\teventbus.broadcast(TimelineEventNames.REQUEST_ACTION, [name, resultCallback]);\r\n\t\t\t});\r\n\t\t\tif (this._getElementTagName(selectedElement) === \"SELECT\") {\r\n\t\t\t\tselectedElement.on(eventName, this._selectEventHandler.bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tselectedElement.on(eventName, this._eventHandler.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_getElementTagName(element) {\r\n\t\tconst tagName = (element.length) ? element[0].tagName : element.tagName;\r\n\t\treturn tagName.toUpperCase();\r\n\t}\r\n\r\n\t_isStartAction(actionName) {\r\n\t\tconst prefix = actionName.substr(0, \"end:\".length);\r\n\t\tif (prefix === \"end:\") {\r\n\t\t\treturn [false, actionName.substr(\"end:\".length)];\r\n\t\t} else {\r\n\t\t\treturn [true, actionName];\r\n\t\t}\r\n\t}\r\n\r\n\t_eventHandler(event) {\r\n\t\tconst copy = (this.operationData.actionOperationData) ? deepcopy(this.operationData.actionOperationData) : {};\r\n\t\tif (event.target) {\r\n\t\t\tcopy.targetValue = event.target.value;\r\n\t\t}\r\n\t\tthis._executeAction(this.actionInstanceInfos, copy, 0);\r\n\t}\r\n\r\n\t_executeAction(actions, operationData, idx) {\r\n\t\tif (idx < actions.length) {\r\n\t\t\tconst actionInfo = actions[idx];\r\n\t\t\tconst { action } = actionInfo;\r\n\t\t\tconst method = (actionInfo.start) ? action.start.bind(action) : action.end.bind(action);\r\n\t\t\tmethod(operationData)\r\n\t\t\t\t.then((resultOperationData) => {\r\n\t\t\t\t\treturn this._executeAction(actions, Object.assign(operationData, resultOperationData), ++idx);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_selectEventHandler(event) {\r\n\t\tconst options = event.target;\r\n\t\tfor (let i = 0, l = options.length; i < l; i++) {\r\n\t\t\tconst opt = options[i];\r\n\t\t\tif (opt.selected) {\r\n\t\t\t\tconst copy = (this.operationData.actionOperationData) ? deepcopy(this.operationData.actionOperationData) : {};\r\n\t\t\t\tthis._executeAction(this.actionInstanceInfos, Object.assign({ eventArgs: [opt.value] }, copy), 0);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.operationData.selectedElement.off(this.operationData.eventName);\r\n\t}\r\n\r\n}\r\n\r\nexport default EventListenerController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass LabelController {\r\n\r\n\tconstructor() {\r\n\t\tthis.listeners = [];\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.name = \"LabelController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = Object.assign({},operationData);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_CURRENT_LANGUAGE, [(language)=> {\r\n\t\t\tthis.currentLanguage = language;\r\n\t\t}]);\r\n\t\teventbus.broadcast(TimelineEventNames.REQUEST_LABEL_COLLECTION, [this.operationData.labelId, (labelCollection)=> {\r\n\t\t\tthis.createTextDataLookup(labelCollection);\r\n\t\t}]);\r\n\t\tthis.setLabel();\r\n\t\tthis.listeners.push(eventbus.on(TimelineEventNames.LANGUAGE_CHANGE, this.handleLanguageChange.bind(this)));\r\n\t}\r\n\r\n\tsetLabel() {\r\n\t\tthis.operationData.selectedElement.html(this.labelData[this.currentLanguage]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.setLabel();\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((d) => {\r\n\t\t\tthis.labelData[d.code] = d.label;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default LabelController;\r\n","import lottie from 'lottie-web';\r\n\r\nclass LottieController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = \"LottieController\";\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.labelData = {};\r\n\t\tthis.listeners = [];\r\n\t\tthis.anim = null;\r\n\t\tthis.operationData = null;\r\n\t\tthis.serializedData = null;\r\n\t\tthis.serializedIEData = null;\r\n\t\tthis.animationData = null;\r\n\t\tthis.freezePosition = -1;\r\n\t\tthis.endPosition = -1;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.operationData = {\r\n\t\t\tselectedElement: operationData.selectedElement,\r\n\t\t\trenderer: operationData.renderer,\r\n\t\t\tloop: operationData.loop,\r\n\t\t\tautoplay: operationData.autoplay,\r\n\t\t\tanimationData: operationData.animationData,\r\n\t\t\tjson: operationData.json,\r\n\t\t\tlabelIds: operationData.labelIds,\r\n\t\t\tviewBox: operationData.viewBox\r\n\t\t};\r\n\t\tif (operationData.url.indexOf(\"[\") > -1) {\r\n\t\t\tthis.parseFilename(operationData.url);\r\n\t\t}\r\n\t\tthis.serializedData = this.operationData.json\r\n\t\t\t? JSON.stringify(this.operationData.json)\r\n\t\t\t: JSON.stringify(this.operationData.animationData);\r\n\t\tif (this.operationData.iefallback) {\r\n\t\t\tthis.serializedIEData = JSON.stringify(this.operationData.iefallback);\r\n\t\t}\r\n\t}\r\n\r\n\tparseFilename(name) {\r\n\t\tconst params = name.substr(name.indexOf(\"[\") + 1, name.indexOf(\"]\") - name.indexOf(\"[\") - 1);\r\n\t\tconst settings = params.split(\",\");\r\n\t\tsettings.forEach((setting) => {\r\n\t\t\tconst values = setting.split(\"=\");\r\n\t\t\tif (values[0] === \"freeze\") {\r\n\t\t\t\tthis.freezePosition = +values[1];\r\n\t\t\t} else if (values[0] === \"end\") {\r\n\t\t\t\tthis.endPosition = +values[1];\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tif ((this.operationData.labelIds) && (this.operationData.labelIds.length)) {\r\n\t\t\tconst resultHolder = {};\r\n\t\t\teventbus.broadcast('request-current-language', [resultHolder]);\r\n\t\t\tthis.currentLanguage = resultHolder.language;\r\n\t\t\tthis.listeners.push(eventbus.on('language-change', this.handleLanguageChange.bind(this)));\r\n\t\t\teventbus.broadcast('request-label-collections', [this.operationData.labelIds, resultHolder]);\r\n\t\t\tthis.createTextDataLookup(resultHolder.labelCollections);\r\n\t\t}\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.listeners.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t\tif (this.anim) {\r\n\t\t\tif (this.endPosition > -1) {\r\n\t\t\t\tthis.anim.onComplete = this.destroy.bind(this);\r\n\t\t\t\tthis.anim.playSegments([this.freezePosition, this.endPosition], true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.anim.destroy();\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    \r\n\tdestroy() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t\tthis.anim = null;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateAnimation() {\r\n\t\tif (this.anim) {\r\n\t\t\tthis.anim.destroy();\r\n\t\t}\r\n\t\tlet serialized = (this.isIE()) ? this.serializedIEData : this.serializedData;\r\n\r\n\t\tconst labelIds = this.operationData.labelIds;\r\n\t\tif ((labelIds) && (labelIds.length)) {\r\n\t\t\tlabelIds.forEach((id) => {\r\n\t\t\t\tserialized = serialized.split(`!!${id}!!`).join(this.labelData[id][this.currentLanguage]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst animData = JSON.parse(serialized);\r\n\r\n\t\tconst animationData = {\r\n\t\t\tautoplay: this.operationData.autoplay,\r\n\t\t\tcontainer: this.operationData.selectedElement[0],\r\n\t\t\tloop: this.operationData.loop,\r\n\t\t\trenderer: this.operationData.renderer,\r\n\t\t\tanimationData:animData\r\n\t\t}\r\n\r\n\t\tthis.anim = lottie.loadAnimation(animationData);\r\n\t\tif (this.endPosition < 0) {\r\n\t\t\tthis.endPosition = this.anim.timeCompleted;\r\n\t\t}\r\n\r\n\t\tif (this.freezePosition > -1) {\r\n\t\t\tthis.anim.playSegments([0, this.freezePosition], true);\r\n\t\t}\r\n\t\tif (this.operationData.viewBox) {\r\n\t\t\tthis.operationData.selectedElement.find(\"svg\").attr('viewBox', this.operationData.viewBox);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateTextDataLookup(data) {\r\n\t\tdata.forEach((infos, index) => {\r\n\t\t\tinfos.forEach((d) => {\r\n\t\t\t\tthis.labelData[this.operationData.labelIds[index]][d.code] = d.label;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\thandleLanguageChange(code) {\r\n\t\tthis.currentLanguage = code;\r\n\t\tthis.createAnimation();\r\n\t}\r\n\r\n\tisIE() {\r\n\t\tconst isIE = false || !!document['documentMode'];\r\n\r\n\t\t// Edge 20+\r\n\t\tconst isEdge = !isIE && !!window['StyleMedia'];\r\n\r\n\t\treturn isEdge || isIE;\r\n\t}\r\n\r\n}\r\n\r\nexport default LottieController;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__28__;","import $ from 'jquery';\r\n\r\nclass NavigationController {\r\n\r\n\tconstructor() {\r\n\t\tthis.name = 'NavigationController';\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.ctrlLookup = {};\r\n\t\tthis.activeNavigationPoint = null;\r\n\t\tthis.labelControllers = null;\r\n\t\tthis.eventhandlers = null;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.container = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.labelControllers = [];\r\n\t\tthis.eventhandlers.push(eventbus.on('navigate-to-video-url', this.handleNavigateVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('highlight-navigation', this.highlightMenu.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('request-current-navigation', this.handleRequestCurrentNavigation.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on('video-complete', this.handleVideoComplete.bind(this), this.playerId));\r\n\t\tthis.eventbus = eventbus;\r\n\r\n        this.buildHtml(this.container, this.navigation);\r\n        this.initHistory.bind(this);\r\n\t}\r\n\r\n\tinitHistory() {\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[0];\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tlet videoIndex = 0;\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tvideoIndex = nav.videoUrlIndex;\r\n\t\t}\r\n\t\tthis.highlightMenu(videoIndex);\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf('#');\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split('/');\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandleRequestCurrentNavigation(resultCallback) {\r\n\t\tresultCallback({\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint.labelId].currentLanguage]\r\n\t\t});\r\n\t}\r\n\r\n\t detach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.labelControllers.forEach((ctrl) => {\r\n\t\t\tctrl.detach(eventbus);\r\n\t\t});\r\n\t\tthis.labelControllers.length = 0;\r\n\t\tthis.eventbus = null;\r\n\t\tthis.container = null;\r\n\t\twindow.onpopstate = null;\r\n\t}\r\n\r\n\tpushCurrentState(position = -1) {\r\n\t\tconst state = {\r\n\t\t\tnavigationData: this.activeNavigationPoint,\r\n\t\t\ttitle: this.ctrlLookup[this.activeNavigationPoint.labelId].labelData[this.ctrlLookup[this.activeNavigationPoint\r\n\t\t\t\t.labelId].currentLanguage]\r\n\t\t};\r\n\t\tif (position > -1) {\r\n\t\t\tstate.position = position;\r\n\t\t}\r\n\t\tthis.eventbus.broadcast('push-history-state',[state]);\r\n\t}\r\n\r\n\tbuildHtml(parentElm, data) {\r\n\t\tconst ul = $('<ul/>');\r\n\t\tdata.forEach(this.addNavElement.bind(this, ul));\r\n\t\tparentElm.append(ul);\r\n\t}\r\n\r\n\taddNavElement(parentElm, data) {\r\n\t\tif (data.visible) {\r\n\t\t\tconst li = $('<li/>');\r\n\t\t\tconst a = $(`<a href='javascript:;' id='nav_${data.videoUrlIndex}'/>`);\r\n\t\t\tli.append(a);\r\n\t\t\tthis.addLabel(a, data.labelId);\r\n\t\t\tthis.addClickHandler(a, data.videoUrlIndex);\r\n\t\t\tif (data.children) {\r\n\t\t\t\tconst ul = $('<ul/>');\r\n\t\t\t\tdata.children.forEach(this.addNavElement.bind(this, ul));\r\n\t\t\t\tli.append(ul);\r\n\t\t\t}\r\n\t\t\tparentElm.append(li);\r\n\t\t}\r\n\t}\r\n\r\n\taddClickHandler(parentElm, videoIndex) {\r\n\t\tparentElm.mouseup(this.menuMouseupHandler.bind(this, videoIndex));\r\n\t}\r\n\r\n\tmenuMouseupHandler(videoIndex) {\r\n\t\tconst navdata = this.navVidIdLookup[videoIndex];\r\n\t\tif (navdata) {\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navdata.videoUrlIndex]);\r\n\t\t\tthis.handleNavigateVideoUrl(navdata.videoUrlIndex);\r\n\t\t}\r\n\t}\r\n\r\n\thandleNavigateVideoUrl(index, requestedVideoPosition) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n\t\tthis.highlightMenu(index);\r\n\t\tthis.eventbus.broadcast('request-video-url', [index, requestedVideoPosition]);\r\n\t\tthis.activeNavigationPoint = this.navVidIdLookup[index];\r\n\t\tthis.pushCurrentState(requestedVideoPosition);\r\n\t}\r\n\r\n\thighlightMenu(index) {\r\n\t\tconst navElm = $(`#nav_${index}`);\r\n\t\tif (navElm.length) {\r\n\t\t\t$('.current-menu-item').removeClass('current-menu-item');\r\n\t\t\tnavElm.addClass('current-menu-item');\r\n\t\t}\r\n\t}\r\n\r\n\thandleVideoComplete(index) {\r\n\t\tconsole.log('Navigation controller received video complete');\r\n\t\tconst navData = this.navVidIdLookup[index];\r\n\t\tif (navData.autoNext) {\r\n\t\t\tconsole.log('NavigationController.handleVideoComplete - request-video-url: ' + navData.next.videoUrlIndex);\r\n\t\t\tthis.eventbus.broadcast('request-video-url', [navData.next.videoUrlIndex]);\r\n\t\t} else {\r\n\t\t\tconsole.log('handleVideoComplete - request-video-cleanup');\r\n\t\t\tthis.eventbus.broadcast('request-video-cleanup');\r\n\t\t}\r\n\t}\r\n\r\n\taddLabel(parentElm, labelId) {\r\n\t\tconst data = {\r\n\t\t\t\tselectedElement: parentElm,\r\n\t\t\t\tlabelId: labelId\r\n\t\t\t};\r\n\t\tconst resultCallback = (instance)=> {\r\n            instance.init(data);\r\n            instance.attach(this.eventbus);\r\n            this.labelControllers.push(instance);\r\n            this.ctrlLookup[labelId] = instance;\r\n\t\t};\r\n\t\tthis.eventbus.broadcast('request-instance', ['LabelController', resultCallback]);\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nexport default NavigationController;\r\n","import TimelineEventNames from \"../timeline-event-names\";\r\n\r\nclass ProgressbarController {\r\n\r\n\tconstructor() {\r\n\t\tthis.selectedElement = null;\r\n\t\tthis.textElement = null;\r\n\t\tthis.detachers = [];\r\n\t\tthis.name = \"ProgressbarController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.selectedElement = operationData.selectedElement;\r\n\t\tthis.playerId = operationData.playerId;\r\n\t\tthis.textElement = operationData.textElement;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.detachers.push(eventbus.on(TimelineEventNames.POSITION_UPDATE, this.positionUpdateHandler.bind(this), this.playerId));\r\n\t\tconst clickHandler = this.clickHandler.bind(this);\r\n\t\tthis.selectedElement.on(\"click\", clickHandler);\r\n\t\tthis.detachers.push(()=> this.selectedElement.off(\"click\"), clickHandler);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.detacher.forEach((func)=> {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\tpositionUpdateHandler(position, duration) {\r\n\t\tlet perc = (100 / duration) * position;\r\n\t\tif (this.selectedElement) {\r\n\t\t\tthis.selectedElement.css(\"width\", `${perc}%`);\r\n\t\t}\r\n\t\tperc = Math.floor(perc);\r\n\t\tif (this.textElement) {\r\n\t\t\tthis.textElement.text(`${perc}%`);\r\n\t\t}\r\n\t}\r\n\r\n\tclickHandler() {\r\n\r\n\t}\r\n}\r\n\r\nexport default ProgressbarController;\r\n","class RoutingController {\r\n\r\n\tconstructor() {\r\n\t\tthis.navLookup = {};\r\n\t\tthis.navVidIdLookup = {};\r\n\t\tthis.playerId = null;\r\n\t\tthis.navigation = null;\r\n\t\tthis.eventhandlers = [];\r\n\t\tthis.eventbus = null;\r\n\t\tthis.name = \"RoutingController\";\r\n\t}\r\n\r\n\tinit(operationData) {\r\n\t\tthis.navigation = this.buildNavigationData(operationData.json);\r\n\t\tthis.playerId = operationData.playerId;\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tthis.eventhandlers.push(eventbus.on(\"before-request-video-url\", this.handleBeforeRequestVideoUrl.bind(this)));\r\n\t\tthis.eventhandlers.push(eventbus.on(\"push-history-state\", this.handlePushHistoryState.bind(this)));\r\n\t\tthis.eventbus = eventbus;\r\n\t\twindow.onpopstate = this.handlePopstate.bind(this);\r\n\r\n\t\tconst navId = this.getQueryVariable(0);\r\n\t\tif (navId) {\r\n\t\t\tconst nav = this.navLookup[navId];\r\n\t\t\tlet pos = this.getQueryVariable(1);\r\n\t\t\tpos = (pos) ? +pos : 0;\r\n\t\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, pos, true]);\r\n\t\t} else {\r\n\t\t\twindow.history.pushState({ navigationId: this.navigation[0].id },\r\n\t\t\t\t\"\",\r\n\t\t\t\t`#/${this.navigation[0].id}`);\r\n\t\t}\r\n\t}\r\n\r\n\thandlePopstate(event) {\r\n\t\tconst navigationId = (event.state) ? event.state.navigationId : this.navigation[0].id;\r\n\t\tconst position = (event.state) ? event.state.position : 0;\r\n\t\tconst nav = this.navLookup[navigationId];\r\n\t\tthis.eventbus.broadcast(\"highlight-navigation\", [nav.videoUrlIndex]);\r\n\t\tthis.eventbus.broadcast(\"request-video-url\", [nav.videoUrlIndex, position, true]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tif (this.eventhandlers) {\r\n\t\t\tthis.eventhandlers.forEach((handler) => {\r\n\t\t\t\thandler();\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.eventbus = null;\r\n\t}\r\n\r\n\thandleBeforeRequestVideoUrl(index, requestedVideoPosition, isHistoryRequest) {\r\n        requestedVideoPosition = (requestedVideoPosition) ? requestedVideoPosition : 0;\r\n        isHistoryRequest = (isHistoryRequest !== undefined) ? isHistoryRequest : false;\r\n\t\tif (!isHistoryRequest) {\r\n            const resultCallback = (item)=> {\r\n                this.pushState(item);\r\n            };\r\n\t\t\tthis.eventbus.broadcast(\"request-current-navigation\", [resultCallback]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetQueryVariable(variableIdx) {\r\n\t\tconst href = window.location.href;\r\n\t\tconst hashIndex = href.indexOf(\"#\");\r\n\t\tif (hashIndex > -1) {\r\n\t\t\tconst query = href.substring(hashIndex + 2);\r\n\t\t\tif (query) {\r\n\t\t\t\tconst vars = query.split(\"/\");\r\n\t\t\t\treturn vars[variableIdx];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\thandlePushHistoryState(state) {\r\n\t\tthis.pushState(state);\r\n\t}\r\n\r\n\tpushState(state) {\r\n\t\tif ((state) && (state.navigationData) && (state.navigationData.visible)) {\r\n\t\t\tlet currentPosition = (state.position !== undefined) ? state.position : -1;\r\n\t\t\tif (currentPosition < 0) {\r\n\t\t\t\tconst resultCallback = (position)=> {\r\n                    currentPosition = (position > 3) ? (position - 3) : 0;\r\n                };\r\n\t\t\t\tthis.eventbus.broadcast(\"request-current-video-position\", [resultCallback]);\r\n\t\t\t}\r\n\r\n\t\t\tconst currentState = window.history.state;\r\n\t\t\tif ((currentState) && (currentState.navigationId !== state.navigationData.id)) {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t} else if ((currentState) && (currentState.navigationId === state.navigationData.id)) {\r\n\t\t\t\twindow.history.replaceState({ navigationId: currentState.navigationId, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${currentState.navigationId}/${currentPosition}`);\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.pushState({ navigationId: state.navigationData.id, position: currentPosition },\r\n\t\t\t\t\tstate.title,\r\n\t\t\t\t\t`#/${state.navigationData.id}/${currentPosition}`);\r\n\t\t\t}\r\n\t\t\twindow.document.title = state.title;\r\n\t\t}\r\n\t}\r\n\r\n\tbuildNavigationData(data) {\r\n\t\tconst result = [];\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tthis.navLookup[nav.id] = nav;\r\n\t\t\tthis.navVidIdLookup[nav.videoUrlIndex] = nav;\r\n\t\t\tnav.previous = data.navigationData[index - 1];\r\n\t\t});\r\n\r\n\t\tdata.navigationData.forEach((nav, index) => {\r\n\t\t\tif (nav.nextId) {\r\n\t\t\t\tnav.next = this.navLookup[nav.nextId];\r\n\t\t\t\tdelete nav.nextId;\r\n\t\t\t} else {\r\n\t\t\t\tnav.next = data.navigationData[index + 1];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdata.roots.forEach((id) => {\r\n\t\t\tconst nav = this.navLookup[id];\r\n\t\t\tif (nav.children) {\r\n\t\t\t\tnav.children = nav.children.map((id) => {\r\n\t\t\t\t\treturn this.navLookup[id];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tresult.push(nav);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n\r\nexport default RoutingController;\r\n","class SubtitlesController {\r\n\r\n\tconstructor() {\r\n\t\tthis.actionLookup = null;\r\n\t\tthis.currentLanguage = null;\r\n\t\tthis.lastFunc = null;\r\n\t\tthis.name = \"SubtitlesController\";\r\n\t}\r\n\r\n\tattach(eventbus) {\r\n\t\tconst detachTime = eventbus.on(\"time\", this.onTimeHandler.bind(this));\r\n\t\tconst detachLangChange = eventbus.on(\"language-change\", this.languageChangeHandler.bind(this));\r\n\t\tthis.internalDetach = this.internalDetach.bind(this, [detachTime, detachLangChange]);\r\n\t}\r\n\r\n\tdetach(eventbus) {\r\n\t\tthis.internalDetach();\r\n\t}\r\n\r\n\tinternalDetach(detachMethods) {\r\n\t\tif (detachMethods) {\r\n\t\t\tdetachMethods.forEach((f) => {\r\n\t\t\t\tf();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tlanguageChangeHandler(newLanguage) {\r\n\t\tthis.currentLanguage = newLanguage;\r\n\t\tif (this.lastFunc) {\r\n\t\t\tthis.lastFunc();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveTitle(container) {\r\n\t\tcontainer.text(\"\");\r\n\t\tthis.lastFunc = null;\r\n\t}\r\n\r\n\tonTimeHandler(position) {\r\n\t\tconst func = this.actionLookup[position];\r\n\t\tif (func) {\r\n\t\t\tfunc();\r\n\t\t\tthis.lastFunc = func;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTitle(container, titleLanguageLookup) {\r\n\t\tcontainer.text(titleLanguageLookup[this.currentLanguage]);\r\n\t}\r\n\r\n\tcreateActionLookup(controllerData, container) {\r\n\t\tconst subtitleData = controllerData.subtitleData;\r\n\t\tconst titles = subtitleData[0].titles;\r\n\t\tconst subtitleTimeLookup = {};\r\n\t\tfor (let i = 0, ii = titles.length; i < ii; i++) {\r\n\t\t\tconst titleLanguageLookup = {};\r\n\t\t\tfor (let j = 0, jj = subtitleData.length; j < jj; j++) {\r\n\t\t\t\tconst subs = subtitleData[j];\r\n\t\t\t\ttitleLanguageLookup[subs.lang] = subs.titles[i].text;\r\n\t\t\t}\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.start] = this.setTitle.bind(this, container, titleLanguageLookup);\r\n\t\t\tsubtitleTimeLookup[titles[i].duration.end] = this.removeTitle;\r\n\t\t}\r\n\t\treturn subtitleTimeLookup;\r\n\t}\r\n\r\n\tinit(controllerData) {\r\n\t\tconst container = controllerData.selectedElement;\r\n\t\tthis.removeTitle = this.removeTitle.bind(this, container);\r\n\t\tthis.currentLanguage = controllerData.language;\r\n\t\tthis.actionLookup = this.createActionLookup(controllerData, container);\r\n\t}\r\n}\r\n\r\nexport default SubtitlesController;\r\n","export { default as addClass } from './addClass';\r\nexport { default as addControllerToElement } from './addControllerToElement';\r\nexport { default as addOptionList } from './addOptionList';\r\nexport { default as animate } from './animate';\r\nexport { default as animateWithClass } from './animateWithClass';\r\nexport { default as broadcastEvent } from './broadcastEvent';\r\nexport { default as clearElement } from './clearElement';\r\nexport { default as clearOperationData } from './clearOperationData';\r\nexport { default as customFunction } from './customFunction';\r\nexport { default as endAction } from './endAction';\r\nexport { default as extendController } from './extendController';\r\nexport { default as getControllerFromElement } from './getControllerFromElement';\r\nexport { default as getControllerInstance } from './getControllerInstance';\r\nexport { default as getElementDimensions } from './getElementDimensions';\r\nexport { default as loadJSON } from './loadJSON';\r\nexport { default as removeClass } from './removeClass';\r\nexport { default as removeControllerFromElement } from './removeControllerFromElement';\r\nexport { default as removeElement } from './removeElement';\r\nexport { default as removePropertiesFromOperationData } from './removePropertiesFromOperationData';\r\nexport { default as reparentElement } from './reparentElement';\r\nexport { default as requestAction } from './requestAction';\r\nexport { default as resizeAction } from './resizeAction';\r\nexport { default as selectElement } from './selectElement';\r\nexport { default as setElementAttributes } from './setElementAttributes';\r\nexport { default as setElementContent } from './setElementContent';\r\nexport { default as setOperationData } from './setOperationData';\r\nexport { default as setStyle } from './setStyle';\r\nexport { default as startAction } from './startAction';\r\nexport { default as toggleClass } from './toggleClass';\r\nexport { default as toggleElement } from './toggleElement';\r\nexport { default as wait } from './wait';\r\n","function addClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.addClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default addClass;\r\n","import attachControllerToElement from './helper/attachControllerToElement';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction addControllerToElement(operationData, eventBus) {\r\n    const {selectedElement, controllerInstance} = operationData;\r\n    \r\n    attachControllerToElement(selectedElement, controllerInstance);\r\n    \r\n    controllerInstance.init(operationData);\r\n\r\n    const promise = controllerInstance.attach(eventBus);\r\n\r\n    if (promise) {\r\n        return new Promise((resolve, reject)=> {\r\n            promise.then((newOperationData) => {\r\n                internalResolve(resolve, operationData, newOperationData);\r\n            }, reject);\r\n        })\r\n    } else {\r\n        return operationData;\r\n    }\r\n}\r\n\r\nexport default addControllerToElement;\r\n","import { getElementControllers } from './getElementData';\r\n\r\nfunction attachControllerToElement(element, controller) {\r\n    if (!element.data('chronoEngineControllers')) {\r\n        element.data('chronoEngineControllers', []);\r\n    }\r\n    const controllers = getElementControllers(element);\r\n    controllers.push(controller);\r\n}\r\n\r\nexport default attachControllerToElement;\r\n","function createOptionElementText(valueProperty, labelProperty, defaultIndex, defaultValue, data, index) {\r\n    let selected = '';\r\n    if (defaultValue) {\r\n        selected = (data[valueProperty] === defaultValue) ? ' selected' : '';\r\n    } else if (defaultIndex) {\r\n        selected = (index === defaultIndex) ? ' selected' : '';\r\n    }\r\n    return `<option value='${data[valueProperty]}'${selected}>${data[labelProperty]}</option>`;\r\n}\r\n\r\nfunction addOptionList(operationData, eventBus) {\r\n    const { valueProperty, labelProperty, defaultIndex, defaultValue, optionData, selectedElement } = operationData;\r\n\r\n    const createOption = createOptionElementText.bind(null, valueProperty, labelProperty, defaultIndex, defaultValue);\r\n\r\n    const optionElements = optionData.map(createOption);\r\n\r\n    selectedElement.html(optionElements);\r\n\r\n    return operationData;\r\n}\r\n\r\nexport default addOptionList;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animate(operationData, eventBus) {\r\n    const {animationEasing, selectedElement, animationProperties, animationDuration} = operationData;\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            if (animationEasing) {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    animationEasing,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            } else {\r\n                selectedElement.animate(animationProperties,\r\n                    animationDuration,\r\n                    () => {\r\n                        internalResolve(resolve, {}, operationData);\r\n                    });\r\n            }\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n    return promise;\r\n}\r\n\r\nexport default animate;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction animateWithClass(operationData, eventBus) {\r\n    let {selectedElement, className, removeClass } = operationData;\r\n    removeClass = (removeClass !== undefined) ? removeClass : true;\r\n\r\n    const promise = new Promise((resolve, reject)=> {\r\n        try{\r\n            selectedElement.one(\"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationEnd\",\r\n            () => {\r\n                if (removeClass) {\r\n                    selectedElement.removeClass(className);\r\n                }\r\n                internalResolve(resolve, {}, operationData);\r\n            });\r\n        } catch(e){\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n    selectedElement.addClass(className);\r\n\r\n    return promise;\r\n}\r\n\r\nexport default animateWithClass;\r\n","import resolveEventArguments from './helper/resolveEventArguments';\r\nimport removeEventDataFromOperationData from './helper/removeEventDataFromOperationData';\r\n\r\nfunction broadcastEvent(operationData, eventBus) {\r\n    const {eventArgs, eventTopic, eventName} = operationData;\r\n\r\n    const eventArguments = resolveEventArguments(operationData, eventArgs);\r\n    \r\n    if (eventTopic) {\r\n        eventBus.broadcastForTopic(eventName, eventTopic, eventArguments);\r\n    } else {\r\n        eventBus.broadcast(eventName, eventArguments);\r\n    }\r\n\r\n    removeEventDataFromOperationData(operationData);\r\n}\r\n\r\nexport default broadcastEvent;\r\n","import extractOperationDataArgumentValues from './extractOperationDataArgumentValues';\r\n\r\nfunction resolveEventArguments(operationData, eventArgs) {\r\n    if (!eventArgs) {\r\n        return;\r\n    }\r\n    const extract = extractOperationDataArgumentValues.bind(null, operationData);\r\n    return eventArgs.map(extract);\r\n}\r\n\r\nexport default resolveEventArguments;\r\n","function removeEventDataFromOperationData(operationData) {\r\n    delete operationData.eventName;\r\n    delete operationData.eventTopic;\r\n    delete operationData.eventArgs;\r\n}\r\n\r\nexport default removeEventDataFromOperationData;\r\n","function clearElement(operationData, eventBus) {\r\n    const {selectedElement} = operationData;\r\n    selectedElement.empty();\r\n    return operationData;\r\n}\r\n\r\nexport default clearElement;\r\n","function clearOperationData(operationData, eventBus) {\r\n    return {};\r\n}\r\n\r\nexport default clearOperationData;\r\n","import internalResolve from './helper/internalResolve';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction customFunction(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    return new Promise((resolve, reject) => {\r\n        const resultCallback = (func)=> {\r\n            const promise = func(operationData, eventBus);\r\n            if (promise) {\r\n                promise.then(() => {\r\n                    internalResolve(resolve, {}, operationData);\r\n                }, reject);\r\n            } else {\r\n                internalResolve(resolve, {}, operationData);\r\n            }\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_FUNCTION, [systemName, resultCallback]);\r\n    });\r\n}\r\n\r\nexport default customFunction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction endAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    delete operationData.actionOperationData;\r\n    return new Promise((resolve, reject)=> {\r\n        const mergedData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.end(mergedData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default endAction;\r\n","function extendController(operationData, eventBus) {\r\n    const { controllerInstance, controllerExtension } = operationData;\r\n    \r\n    operationData.controllerInstance = Object.assign(controllerInstance, controllerExtension);\r\n    \r\n    return operationData;\r\n}\r\n\r\nexport default extendController;\r\n","import { getElementControllers } from './helper/getElementData';\r\n\r\nfunction getControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n    const controllers = getElementControllers(selectedElement);\r\n    let controller = null;\r\n    controllers.some((ctrl) => {\r\n        if (ctrl.name === controllerName) {\r\n            controller = ctrl;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (!controller) {\r\n        console.warn(`controller for name '${controllerName}' was not found on the given element`);\r\n    }\r\n    operationData.controllerInstance = controller;\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerFromElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction getControllerInstance(operationData, eventBus) {\r\n    const {systemName} = operationData;\r\n    let {propertyName} = operationData;\r\n    \r\n    propertyName = propertyName || \"controllerInstance\";\r\n    const resultCallback = (instance)=> {\r\n        operationData[propertyName] = instance;\r\n    }\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_INSTANCE, [systemName, resultCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default getControllerInstance;\r\n","import modifyDimensions from './helper/modifyDimensions';\r\n\r\nfunction getElementDimensions(operationData, eventBus) {\r\n    let {selectedElement, dimensions, modifier} = operationData;\r\n    dimensions = dimensions || {};\r\n    dimensions.width = selectedElement.innerWidth();\r\n    dimensions.height = selectedElement.innerHeight();\r\n    if (dimensions.height === 0) {\r\n        dimensions.height = dimensions.width;\r\n    }\r\n    if (modifier) {\r\n        modifyDimensions(dimensions, modifier);\r\n    }\r\n    operationData.dimensions = dimensions;\r\n    return operationData;\r\n}\r\n\r\nexport default getElementDimensions;\r\n","function modifyDimensionsByRatio(ratioModifier, dimensions) {\r\n    //h[ar=8-1]\r\n    let prefix = ratioModifier.substr(0, 1);\r\n    let ratio = ratioModifier.substr(ratioModifier.indexOf('[') + 1, ratioModifier.indexOf(']') - ratioModifier.indexOf('[') - 1);\r\n    let ratios = ratio.split('=')[1].split('-');\r\n    if (prefix === 'h') {\r\n        dimensions.height = (dimensions.width / +ratios[0]) * +ratios[1];\r\n    } else if (prefix === 'w') {\r\n        dimensions.width = (dimensions.height / +ratios[1]) * +ratios[0];\r\n    }\r\n}\r\n\r\nfunction getModifierSuffix(modifier) {\r\n    let endIdx = 1;\r\n    let suffix = modifier.substr(modifier.length - 1, 1);\r\n    if ((suffix !== 'h') && (suffix !== 'w') && (suffix !== '%')) {\r\n        suffix = null;\r\n    }\r\n    const isPercent = (suffix === '%');\r\n    if (isPercent) {\r\n        endIdx = 2;\r\n        suffix = modifier.substr(modifier.length - endIdx, 1);\r\n        if ((suffix !== 'h') && (suffix !== 'w')) {\r\n            suffix = null;\r\n            endIdx = 1;\r\n        }\r\n    }\r\n    return [suffix, endIdx, isPercent];\r\n}\r\n\r\nfunction _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier) {\r\n    switch (prefix) {\r\n        case '+':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height += heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width += widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height += heightModifier;\r\n                    dimensions.width += widthModifier;\r\n            }\r\n            break;\r\n        case '-':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height -= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width -= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height -= heightModifier;\r\n                    dimensions.width -= widthModifier;\r\n            }\r\n            break;\r\n        case '/':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height /= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width /= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height /= heightModifier;\r\n                    dimensions.width /= widthModifier;\r\n            }\r\n            break;\r\n        case '*':\r\n            switch (suffix) {\r\n                case 'h':\r\n                    dimensions.height *= heightModifier;\r\n                    break;\r\n                case 'w':\r\n                    dimensions.width *= widthModifier;\r\n                    break;\r\n                default:\r\n                    dimensions.height *= heightModifier;\r\n                    dimensions.width *= widthModifier;\r\n            }\r\n            break;\r\n        default:\r\n            console.error(`Unknown operator found: ${prefix}`);\r\n    }\r\n    return dimensions;\r\n}\r\n\r\nfunction modifyDimensions(dimensions, modifier) {\r\n    let ratioModifier = null;\r\n    if (modifier.indexOf('|') > -1) {\r\n        [modifier, ratioModifier] = modifier.split('|');\r\n    }\r\n\r\n    const prefix = modifier.substr(0, 1);\r\n    let [suffix, endIdx, isPercent] = getModifierSuffix(modifier);\r\n\r\n    const value = parseInt((suffix !== null) ? modifier.substr(1, modifier.length - endIdx - 1) : modifier.substr(1, modifier.length), 10);\r\n\r\n    let widthModifier = value;\r\n    let heightModifier = value;\r\n    if (isPercent) {\r\n        widthModifier = (dimensions.width / 100) * value;\r\n        heightModifier = (dimensions.height / 100) * value;\r\n    }\r\n\r\n    dimensions = _modifyDimensions(dimensions, prefix, suffix, widthModifier, heightModifier);\r\n\r\n    if (ratioModifier) {\r\n        modifyDimensionsByRatio(ratioModifier, dimensions)\r\n    }\r\n}\r\n\r\nexport default modifyDimensions;","function loadJSON(jsonCache, operationData, eventBus) {\r\n    const {url, cache} = operationData;\r\n\r\n    let { propertyName } = operationData;\r\n    propertyName = propertyName || \"json\";\r\n\r\n    if (cache && jsonCache[url]) {\r\n        operationData[propertyName] = jsonCache[url];\r\n        return operationData;\r\n    }\r\n\r\n\r\n    return new Promise((resolve, reject)=> {\r\n        fetch(url)\r\n        .then((response)=> {\r\n            jsonCache[url] = operationData[propertyName] = response.body;\r\n            resolve(operationData);\r\n        })\r\n        .catch(reject);\r\n    });\r\n}\r\n\r\nexport default loadJSON.bind(null, {});\r\n","function removeClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.removeClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default removeClass;\r\n","import {getElementControllers} from './helper/getElementData';\r\n\r\nfunction removeControllerFromElement(operationData, eventBus) {\r\n    const {selectedElement, controllerName} = operationData;\r\n\r\n    const controllers = getElementControllers(selectedElement);\r\n    if (controllers) {\r\n        let controller = null;\r\n        controllers.some((ctrl) => {\r\n            if (ctrl.name === controllerName) {\r\n                controller = ctrl;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (controller) {\r\n            const idx = controllers.indexOf(controller);\r\n            if (idx > -1) {\r\n                controllers.splice(idx, 1);\r\n            }\r\n            controller.detach(eventBus);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default removeControllerFromElement;\r\n","export function removeElement(operationData, eventBus) {\r\n    operationData.selectedElement.remove();\r\n    return operationData;\r\n}\r\n\r\nexport default removeElement;\r\n","function removePropertiesFromOperationData(operationData, eventBus) {\r\n    const {\r\n        propertyNames\r\n    } = operationData;\r\n\r\n    propertyNames.forEach(name => {\r\n        delete operationData[name];\r\n    });\r\n    delete operationData.propertyNames;\r\n    return operationData;\r\n}\r\n\r\nexport default removePropertiesFromOperationData;","function reparentElement(operationData, eventBus) {\r\n    const {selectedElement, newParentSelector} = operationData;\r\n    selectedElement.remove().appendTo(newParentSelector);\r\n}\r\n\r\nexport default reparentElement;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction requestAction(operationData, eventBus) {\r\n        const { actionName } = operationData;\r\n\r\n        const resultCallback = (action) => {\r\n            operationData.actionInstance = action;\r\n        };\r\n        eventBus.broadcast(TimelineEventNames.REQUEST_ACTION, [actionName, resultCallback]);\r\n        return operationData;\r\n}\r\n\r\nexport default requestAction;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\n\r\nfunction resizeAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    operationData = mergeOperationData(operationData, actionOperationData);\r\n    if (actionInstance.resize) {\r\n        return actionInstance.resize(operationData);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default resizeAction;\r\n","import TimelineEventNames from '../timeline-event-names';\r\n\r\nfunction findElementBySelector(root, selector, operationData, propertyName) {\r\n    const element = root.find(selector);\r\n    if (!element.length) {\r\n        console.warn(`selector '${selector}' wasn't found!`);\r\n    }\r\n    operationData[propertyName] = element;\r\n    if (operationData.hasOwnProperty(\"propertyName\")) {\r\n        delete operationData.propertyName;\r\n    }\r\n}\r\n\r\nfunction selectElement(operationData, eventBus) {\r\n    let {selector, propertyName, useExistingAsRoot} = operationData;\r\n\r\n    if (!selector) {\r\n        throw new Error(\"selector is undefined!\");\r\n    }\r\n    propertyName = (propertyName) ? propertyName : \"selectedElement\";\r\n\r\n    if (useExistingAsRoot && operationData[propertyName]) {\r\n        const currentRoot = operationData[propertyName];\r\n        findElementBySelector(currentRoot, selector, operationData, propertyName);\r\n        return operationData;\r\n    }\r\n\r\n    const rootCallback = (root)=> {\r\n        findElementBySelector(root, selector, operationData, propertyName);\r\n    };\r\n    eventBus.broadcast(TimelineEventNames.REQUEST_ENGINE_ROOT, [rootCallback]);\r\n    return operationData;\r\n}\r\n\r\nexport default selectElement;\r\n","function setElementAttributes(operationData, eventBus) {\r\n    const {attributes, selectedElement} = operationData;\r\n    for (let attrName in attributes) {\r\n        if (attributes.hasOwnProperty(attrName)) {\r\n            selectedElement.attr(attrName, attributes[attrName]);\r\n        }\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementAttributes;\r\n","function setElementContent(operationData, eventBus) {\r\n    const {append, selectedElement, template} = operationData;\r\n    if (!append) {\r\n        selectedElement.html(template);\r\n    } else {\r\n        selectedElement.append(template);\r\n    }\r\n    return operationData;\r\n}\r\n\r\nexport default setElementContent;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setOperationData(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData = Object.assign(operationData, properties);\r\n    delete operationData.properties;\r\n    return operationData;\r\n}\r\n\r\nexport default setOperationData;\r\n","import resolvePropertyValues from './helper/resolvePropertyValues';\r\n\r\nfunction setStyle(operationData, eventBus) {\r\n    const properties = resolvePropertyValues(operationData, operationData.properties);\r\n    operationData.selectedElement.css(properties);\r\n    return operationData;\r\n}\r\n\r\nexport default setStyle;\r\n","import mergeOperationData from './helper/mergeOperationData';\r\nimport internalResolve from './helper/internalResolve';\r\n\r\nfunction startAction(operationData, eventBus) {\r\n    const {actionInstance, actionOperationData} = operationData;\r\n    return new Promise((resolve, reject)=> {\r\n        operationData = mergeOperationData(operationData, actionOperationData);\r\n        actionInstance.start(operationData).then(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, reject);\r\n    });\r\n}\r\n\r\nexport default startAction;\r\n","function toggleClass(operationData, eventBus) {\r\n    const {selectedElement, className} = operationData;\r\n    selectedElement.toggleClass(className);\r\n    return operationData;\r\n}\r\n\r\nexport default toggleClass;\r\n","function toggleElement(operationData, eventBus) {\r\n    operationData.selectedElement.toggle();\r\n    return operationData;\r\n}\r\n\r\nexport default toggleElement;\r\n","import internalResolve from './helper/internalResolve';\r\n\r\nfunction wait(operationData, eventBus) {\r\n    const { milliseconds } = operationData;\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            internalResolve(resolve, operationData);\r\n        }, milliseconds);\r\n    });\r\n}\r\n\r\nexport default wait;\r\n","export { default as JwPlayerTimelineProvider } from './jwplayer-timeline-provider';\r\n// export { default as MediaElementTimelineProvider} from './mediaelement-timeline-provider';\r\nexport { default as RequestAnimationFrameTimelineProvider } from './request-animation-frame-timeline-provider';\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass JwPlayerTimelineProvider {\r\n\r\n   constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.providerid = config.playerSettings.selector;\r\n        this.loop = false;\r\n        this.player = null;\r\n        this.currentLoopHandler = null;\r\n        this._eventbusListeners = [];\r\n        this._addEventListeners();\r\n    }\r\n\r\n    _extractUrls(configuration) {\r\n        const urls = configuration.timelines.filter(timeline => timeline.type === \"video\").map(timeline => {\r\n            return timeline.uri;\r\n        });\r\n        return urls;\r\n    }\r\n\r\n    init(selector) {\r\n        const urls = this._extractUrls(this.config);\r\n        const jwp = window.jwplayer;\r\n        const p = $(`#${selector}`);\r\n        if (!p.length) {\r\n            throw new Error(`videoplayer selector '${selector}' not found`);\r\n        }\r\n        let w = p.innerWidth();\r\n        let h = p.innerHeight();\r\n        if (w === 0) {\r\n            w = 100;\r\n        }\r\n        if (h === 0) {\r\n            h = 300;\r\n        }\r\n\r\n        this.player = jwp(this.config.playerSettings.selector);\r\n        this.player.setup({\r\n            file: urls[0],\r\n            image: this.config.playerSettings.poster,\r\n            height: h,\r\n            width: w,\r\n            controls: true,\r\n            autostart: false,\r\n            displaytitle: false,\r\n            displaydescription: false,\r\n            nextUpDisplay: false,\r\n            abouttext: 'Rosetta Group',\r\n            aboutlink: 'http://www.rosettagroup.nl',\r\n            stretching: \"fill\",\r\n            repeat: false\r\n        });\r\n        const playlist = [];\r\n        urls.forEach((url) => {\r\n            playlist.push({\r\n                file: url,\r\n                title: url,\r\n                image: this.config.playerSettings.poster\r\n            });\r\n        });\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.player.once(\"ready\", () => {\r\n                this._handlePlayerReady(resolve);\r\n            });\r\n            this.player.load(playlist);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    _handlePlayerReady(resolve) {\r\n        this.player.once(\"firstFrame\", () => {\r\n            this.player.pause();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.DURATION, this.player.playerid, [this.getDuration()]);\r\n            resolve(this);\r\n        });\r\n        this.player.on(TimelineEventNames.TIME, this._loopHandler.bind(this, Math.floor));\r\n        this.player.on(TimelineEventNames.SEEKED, this._seekedHandler.bind(this));\r\n        this.player.on(TimelineEventNames.COMPLETE, this._handlePlayerComplete.bind(this));\r\n        setTimeout(()=> {\r\n            this.player.play();\r\n        },10);\r\n    }\r\n\r\n    _handlePlayerComplete() {\r\n        if (!this.loop) {\r\n            this.stop();\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.providerid, [this.player.getPlaylistIndex()]);\r\n        }\r\n    }\r\n\r\n    _seekedHandler() {\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.providerid, [this.getPosition(), this.getDuration()]);\r\n    }\r\n\r\n    destroy() {\r\n        this.player.remove();\r\n        this._eventbusListeners.forEach(func => func());\r\n    }\r\n\r\n    _loopHandler(floor, event) {\r\n        const pos = floor(event.position);\r\n        if ((this.loop) && (pos === floor(this.player.getDuration() - 1))) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _timeResetLoopHandler(event) {\r\n        if (this.loop) {\r\n            this.seek(0);\r\n        }\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_TOGGLE_REQUEST, this.toggleplay.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this.resize.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.duration.bind(this), this.providerid));\r\n    }\r\n\r\n    _container(resultCallback) {\r\n        let suffix = \"\";\r\n        if (this.player.getProvider().name !== \"html5\") {\r\n            suffix = \"_wrapper\";\r\n        }\r\n        const container = $(`#${this.providerid}${suffix}`);\r\n        resultCallback(container);\r\n    }\r\n\r\n    toggleplay() {\r\n        if (this.paused) {\r\n            this.play()\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    play() {\r\n        this.paused = false;\r\n        this.player.play();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.providerid);\r\n    }\r\n\r\n    stop() {\r\n        this.paused = false;\r\n        this.player.stop();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.providerid);\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n        this.player.pause();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.providerid);\r\n    }\r\n\r\n    seek(position) {\r\n        const currentPosition = this.player.getPosition();\r\n        this.player.seek(position);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.providerid, [position, currentPosition, this.player.getDuration()]);\r\n    }\r\n\r\n    resize(width, height) {\r\n        this.player.resize(width, height);\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.RESIZE, this.providerid, [width, height]);\r\n    }\r\n\r\n    duration(resultCallback) {\r\n        resultCallback(Math.floor(this.getDuration()));\r\n    }\r\n\r\n    playlistItem(index) {\r\n        this.player.playlistItem(index);\r\n    }\r\n\r\n    once(eventName, callback) {\r\n        this.player.once(eventName, callback);\r\n    }\r\n\r\n    off(eventName, callback) {\r\n        this.player.off(eventName, callback);\r\n    }\r\n\r\n    on(eventName, callback) {\r\n        this.player.on(eventName, callback);\r\n    }\r\n\r\n    getPosition() {\r\n        return this.player.getPosition();\r\n    }\r\n\r\n    getPlaylistIndex() {\r\n        return this.player.getPlaylistIndex();\r\n    }\r\n\r\n    getState() {\r\n        return this.player.getState();\r\n    }\r\n\r\n    getDuration() {\r\n        return this.player.getDuration();\r\n    }\r\n\r\n    getMute() {\r\n        return this.player.getMute();\r\n    }\r\n\r\n    getVolume() {\r\n        return this.player.getVolume();\r\n    }\r\n\r\n    setMute(state) {\r\n        this.player.setMute(state);\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.player.setVolume(volume);\r\n    }\r\n}\r\n\r\nexport default JwPlayerTimelineProvider;\r\n","import $ from 'jquery';\r\nimport TimelineEventNames from '../timeline-event-names';\r\n\r\nclass RequestAnimationFrameTimelineProvider {\r\n\r\n    constructor(eventbus, config) {\r\n        this.eventbus = eventbus;\r\n        this.config = config;\r\n        this.requestID = null;\r\n        this.last = 0;\r\n        this.current = 0;\r\n        this._updateBound = this._update.bind(this);\r\n        this.loop = false;\r\n        this._eventbusListeners = [];\r\n        this.providerid = `provider${Math.random()*1000}`;\r\n        this._addEventListeners();\r\n        this.playlist = [];\r\n        this.currentPlaylistItem = null;\r\n        this.firstFrame = true;\r\n        this.paused = true;\r\n    }\r\n\r\n    _extractPlaylist(configuration) {\r\n        const playlist = configuration.timelines.filter(timeline => timeline.type === \"animation\").map(timeline => {\r\n            return timeline;\r\n        });\r\n        return playlist;\r\n    }\r\n\r\n    playlistItem(index) {\r\n        if (index < 0 || index > this.playlist.length) {\r\n            return;\r\n        }\r\n        this.currentPlaylistItem = this.playlist[index];\r\n        this.firstFrame = true;\r\n        this.reset();\r\n    }\r\n\r\n    _addEventListeners() {\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_TOGGLE_REQUEST, this.toggleplay.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PLAY_REQUEST, this.play.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.STOP_REQUEST, this.stop.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.PAUSE_REQUEST, this.pause.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.SEEK_REQUEST, this.seek.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.RESIZE_REQUEST, this._resize.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.CONTAINER_REQUEST, this._container.bind(this), this.providerid));\r\n        this._eventbusListeners.push(this.eventbus.on(TimelineEventNames.DURATION_REQUEST, this.requestDurationHandler.bind(this), this.providerid));\r\n    }\r\n\r\n    _update(now) {\r\n        if (!this.paused) {\r\n            return;\r\n        }\r\n        if(!this.last || now - this.last >= 1000) {\r\n            if (!this.last && this.firstFrame) {\r\n                this.firstFrame = false;\r\n                this.eventbus.broadcastForTopic(TimelineEventNames.FIRSTFRAME, this.providerid);\r\n            }\r\n            this.last = now;\r\n            this.current++;\r\n            if (this.current > this.currentPlaylistItem.duration) {\r\n                if (this.loop) {\r\n                    this._reset();\r\n                } else {\r\n                    this.stop();\r\n                    this.eventbus.broadcastForTopic(TimelineEventNames.COMPLETE, this.providerid);\r\n                    return;\r\n                }\r\n            }\r\n            this.eventbus.broadcastForTopic(TimelineEventNames.TIME, this.providerid, this.current);\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound);\r\n    }\r\n\r\n    _start() {\r\n        if (this.requestID) {\r\n            return;\r\n        }\r\n        this.requestID = requestAnimationFrame(this._updateBound)\r\n    }\r\n\r\n    _reset() {\r\n        this._cancelAnimationFrame();\r\n        this.last = 0;\r\n        this.current = 0;\r\n    }\r\n\r\n    _resize() {\r\n        console.error('Not implemented yet');\r\n    }\r\n\r\n    _container(callBack) {\r\n        callBack(this.container);\r\n    }\r\n\r\n    _cancelAnimationFrame() {\r\n        if (this.requestID) {\r\n            cancelAnimationFrame(this.requestID);\r\n            this.requestID =  null;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.playlist = this._extractPlaylist(this.config);\r\n        this.currentPlaylistItem = this.playlist[0];\r\n        this.container = $(this.currentPlaylistItem.selector);\r\n        if (!this.container.length) {\r\n            throw new Error(`timeline selector '${selector}' not found`);\r\n        }\r\n        const promise = new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n        return promise;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this._eventbusListeners.forEach(func => {\r\n            func();\r\n        });\r\n    }\r\n\r\n    toggleplay() {\r\n        if (this.paused) {\r\n            this.play();\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    play(){\r\n        this.paused = false;\r\n        this._start();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PLAY, this.providerid);\r\n    }\r\n\r\n    stop() {\r\n        this.paused = false;\r\n        this._cancelAnimationFrame();\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.STOP, this.providerid);\r\n    }\r\n\r\n    pause() {\r\n        this.paused = true;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.PAUSE, this.providerid);\r\n    }\r\n\r\n    seek(position) {\r\n        if (position < 0 || position > this.currentPlaylistItem.duration) {\r\n            return;\r\n        }\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEK, this.providerid);\r\n        this.current = position;\r\n        this.eventbus.broadcastForTopic(TimelineEventNames.SEEKED, this.providerid);\r\n    }\r\n\r\n    requestDurationHandler(callBack) {\r\n        callBack(this.currentPlaylistItem.duration);\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        return this.eventbus.on(eventName, handler, this.providerid);\r\n    }\r\n\r\n    once(eventName, handler) {\r\n        return this.eventbus.once(eventName, handler, this.providerid);\r\n    }\r\n}\r\n\r\nexport default RequestAnimationFrameTimelineProvider;\r\n"],"sourceRoot":""}